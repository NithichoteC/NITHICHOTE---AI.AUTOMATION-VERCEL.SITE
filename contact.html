<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Sat Jul 19 2025 03:10:39 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="686bac2b4d1341d4cca18e06" data-wf-site="686bac2b4d1341d4cca18daf" lang="en">
<head>
  <meta charset="utf-8">
  <title>Let's Map Your Automations - Business Assessment</title>
  <meta content="Get your personalized AI automation strategy. Map your highest-impact automations to reclaim 10+ hours/week in just 30 minutes." name="description">
  <meta content="Let's Map Your Automations - Business Assessment" property="og:title">
  <meta content="Get your personalized AI automation strategy. Map your highest-impact automations to reclaim 10+ hours/week in just 30 minutes." property="og:description">
  <meta content="Let's Map Your Automations - Business Assessment" property="twitter:title">
  <meta content="Get your personalized AI automation strategy. Map your highest-impact automations to reclaim 10+ hours/week in just 30 minutes." property="twitter:description">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/phuns-fresh-site.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="favicon.ico" rel="icon" type="image/x-icon">
  <link href="apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180">
  <link href="icon-192.png" rel="icon" type="image/png" sizes="192x192">
  <link href="icon-512.png" rel="icon" type="image/png" sizes="512x512">
  <link rel="manifest" href="manifest.json">
  <!-- Mobile Overflow Fixes -->
  <link href="css/mobile-fixes.css" rel="stylesheet" type="text/css">
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-5F668SP9');</script>
  <!-- End Google Tag Manager -->
  
  <style>
    /* iOS Pull-to-Refresh Prevention */
    html {
      overscroll-behavior-y: none !important; /* Safari 16+ - Prevent pull-to-refresh */
      overscroll-behavior: none !important; /* Prevent all overscroll behaviors */
    }
    
    /* Professional Questionnaire Design */
    :root {
      --primary-black: #0f0f0f;
      --white: white;
      --border: #b4b4b414;
      --grey: #b4b4b4;
      --dark: #202020;
      --secondary-black: #202020;
    }
    
    * {
      box-sizing: border-box;
    }
    
    body {
      font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      overflow: hidden;
      height: 100vh;
      margin: 0;
      background: var(--primary-black);
      position: relative;
    }
    
    /* Ensure no scroll on mobile - Fix iOS pull-to-refresh */
    @media (max-width: 767px) {
      body {
        overflow: hidden !important;
        position: fixed !important;
        width: 100% !important;
        height: 100vh !important;
        overscroll-behavior: none !important; /* Prevent pull-to-refresh */
        /* REMOVED: touch-action: none - it blocks all scrolling! */
      }
      
      .page-wrapper {
        height: 100vh !important;
        overflow: hidden !important;
        overscroll-behavior: none !important;
      }
    }
    
    
    .page-wrapper {
      height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* Minimal Header */
    .questionnaire-header {
      padding: 1.5rem 0 1rem;
      flex-shrink: 0;
      position: relative;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      background: var(--primary-black);
      height: 120px;
      z-index: 999;
    }
    
    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 2rem;
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
    }
    
    .logo-section {
      display: none; /* Remove branding for cleaner focus */
    }
    
    .logo {
      display: none;
    }
    
    .brand-text {
      display: none;
    }
    
    .header-title {
      color: var(--white);
      font-size: 1rem;
      font-weight: 500;
      margin: 0;
      opacity: 0.9;
    }
    
    /* Subtle Progress System */
    .progress-system {
      display: none; /* Hide the anxiety-inducing progress bar */
    }
    
    .step-indicators {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 0.5rem;
      margin-top: 1rem;
      opacity: 0.6;
    }
    
    .step-dot {
      width: 6px;
      height: 1px;
      border-radius: 0;
      background: var(--grey);
      transition: all 0.3s ease;
      opacity: 0.4;
    }
    
    .step-dot.active {
      background: var(--white);
      opacity: 1;
      width: 12px;
    }
    
    .step-dot.completed {
      background: var(--white);
      opacity: 0.6;
      width: 8px;
    }
    
    /* Mobile Form Header Sticky Fix - Match Bottom Bar */
    @media (max-width: 767px) {
      .questionnaire-header {
        position: fixed !important;
        top: 0 !important;
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
        z-index: 1000 !important;
        background: var(--primary-black) !important; /* Solid black like bottom bar */
        border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
        box-shadow: 0 1px 3px rgba(0,0,0,0.2) !important; /* Subtle shadow */
        backdrop-filter: none !important; /* Remove blur for solid look */
      }
      
      /* Fix main content area to account for fixed header and navigation */
      .main-content {
        height: calc(100vh - 180px) !important; /* Header (120px) + Navigation (60px) */
        margin-top: 120px !important; /* Push down below fixed header */
        margin-bottom: 0 !important;
        overflow: hidden !important;
      }
      
      /* Make question container the scrollable area */
      .question-container {
        height: 100% !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        padding: 0.5rem 0 4rem 0 !important; /* Increased bottom padding for navigation clearance */
        align-items: flex-start !important;
        background: var(--primary-black) !important;
        overscroll-behavior-y: contain !important; /* Contain scroll within this element */
        touch-action: pan-y !important; /* Allow only vertical scrolling */
      }
      
      /* FIX CRITICAL: Change absolute positioning to relative for mobile scrolling */
      .question-slide {
        position: relative !important; /* Change from absolute to relative */
        width: 100% !important;
        height: auto !important;
        min-height: calc(100vh - 180px) !important; /* Ensure full viewport coverage */
        display: none !important; /* Hide by default instead of using visibility */
        top: auto !important;
        left: auto !important;
        right: auto !important;
        bottom: auto !important;
        transform: none !important; /* Remove scale transforms */
        opacity: 1 !important;
        transition: none !important; /* Remove transitions for instant display */
      }
      
      .question-slide.active {
        display: flex !important; /* Show when active */
        flex-direction: column !important;
        justify-content: flex-start !important; /* Start from top, not center */
        align-items: center !important;
        visibility: visible !important;
      }
      
      /* Ensure question content can expand naturally and starts at top */
      .question-card {
        position: relative !important; /* Remove absolute positioning */
        min-height: auto !important; /* Remove fixed height constraints */
        height: auto !important;
        align-items: flex-start !important;
        padding: 0.5rem 0 2rem 0 !important; /* Added bottom padding for better spacing */
        margin-top: 0 !important;
        width: 100% !important;
      }
      
      /* Add balanced spacing to first question sections */
      .assessment-section:last-child {
        margin-bottom: 2rem !important; /* Equal spacing at bottom */
      }
    }
    
    /* Professional Landing Page Spacing Classes */
    .padding-global {
      padding-left: 2.5rem;
      padding-right: 2.5rem;
    }
    
    .container-large {
      width: 100%;
      max-width: 95rem;
      margin-left: auto;
      margin-right: auto;
    }
    
    .padding-section-large {
      padding-top: 8rem;
      padding-bottom: 8rem;
    }
    
    .spacer-large {
      padding-top: 3rem;
    }
    
    .spacer-medium {
      width: 100%;
      padding-top: 2rem;
    }
    
    .text-align-center {
      text-align: center;
    }
    
    /* Main Content Area */
    .main-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      height: calc(100vh - 180px); /* Account for header (120px) + navigation (60px) */
    }
    
    /* Full-Screen Question Container */
    .question-container {
      flex: 1;
      display: flex;
      background: var(--primary-black);
      height: 100%;
      overflow-y: auto;
      align-items: flex-start;
      padding: 2rem 0 4rem 0;
    }
    
    /* Special handling for Calendly page */
    .question-container.calendly-page {
      overflow-y: auto;
      align-items: flex-start;
      padding: 2rem 0;
    }
    
    .question-card {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: calc(100vh - 180px - 4rem);
      padding: 1rem 0;
    }
    
    /* Perfect centering for all question content */
    .question-slide {
      width: 100%;
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      visibility: hidden;
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.3s ease-out;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    
    .question-slide.active {
      visibility: visible;
      opacity: 1;
      transform: scale(1);
    }
    
    .question-content {
      width: 100%;
      max-width: 1200px;
      text-align: center;
    }
    
    .question-group {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2rem;
      padding: 2rem 0;
    }
    
    
    /* Professional Typography */
    .question-title {
      font-size: 2.2rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 3rem;
      line-height: 1.3;
      letter-spacing: -0.02em;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    
    .question-subtitle {
      font-size: 1.1rem;
      color: var(--grey);
      margin-bottom: 3rem;
      font-weight: 300;
      opacity: 0.8;
      line-height: 1.4;
    }
    
    /* Business Assessment Layout */
    .business-assessment {
      width: 100%;
      padding: 0;
    }
    
    .assessment-title {
      font-size: 1.8rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 2.5rem;
      line-height: 1.3;
      letter-spacing: -0.02em;
      text-align: center;
    }
    
    .assessment-grid {
      display: grid;
      gap: 1.5rem;
      margin-bottom: 0;
    }
    
    .assessment-section {
      position: relative;
    }
    
    .section-label {
      display: block;
      color: var(--white);
      font-size: 0.95rem;
      font-weight: 500;
      margin-bottom: 1rem;
      letter-spacing: 0.02em;
    }
    
    /* Pill-style Options */
    .pill-options {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 0.75rem;
      justify-content: center;
      max-width: 600px;
      margin: 0 auto;
    }
    
    .pill-option {
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 0;
      color: var(--grey);
      font-size: 0.9rem;
      font-weight: 400;
      cursor: pointer;
      transition: all 0.3s ease;
      user-select: none;
      text-align: center;
      min-height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .pill-option:hover {
      border-color: rgba(255, 255, 255, 0.2);
      background: rgba(255, 255, 255, 0.08);
      color: var(--white);
    }
    
    .pill-option.selected {
      background: rgba(255, 255, 255, 0.12) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
      color: var(--white) !important;
      font-weight: 500 !important;
    }
    
    /* Minimal Input Styles */
    .input-container {
      margin-bottom: 0;
      max-width: 100%;
    }
    
    .question-input {
      width: 100%;
      padding: 1rem 0;
      font-size: 1.1rem;
      background: transparent;
      border: none;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      color: var(--white);
      text-align: center;
      transition: all 0.3s ease;
      outline: none;
      font-family: inherit;
      font-weight: 400;
    }
    
    .question-input::placeholder {
      color: var(--grey);
      opacity: 0.6;
      font-weight: 300;
    }
    
    .question-input:focus {
      border-bottom-color: var(--white);
      box-shadow: none;
    }
    
    .question-input:focus::placeholder {
      opacity: 0.4;
    }
    
    /* Option Cards for Individual Questions */
    .options-container {
      display: grid;
      gap: 1rem;
      margin: 0 auto;
      max-width: 800px;
      width: 100%;
    }
    
    .option-card {
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border);
      border-radius: 0;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: left;
      position: relative;
      width: 100%;
      min-height: 80px;
      display: flex;
      align-items: center;
    }
    
    .option-card:hover {
      border-color: rgba(255, 255, 255, 0.15);
      background: rgba(255, 255, 255, 0.04);
      transform: translateY(-2px);
    }
    
    .option-card.selected {
      border-color: var(--white);
      background: rgba(255, 255, 255, 0.06);
      transform: translateY(-1px);
    }
    
    .option-card.with-icon {
      display: flex;
      align-items: center;
      gap: 1rem;
      text-align: left;
    }
    
    .option-icon {
      width: 24px;
      height: 24px;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .option-icon img {
      width: 24px;
      height: 24px;
      opacity: 0.7;
      transition: opacity 0.3s ease;
      filter: brightness(0.8);
    }
    
    .option-card:hover .option-icon img,
    .option-card.selected .option-icon img {
      opacity: 1;
      filter: brightness(1);
    }
    
    .option-content {
      flex: 1;
    }
    
    .option-text {
      font-size: 1rem;
      font-weight: 500;
      color: var(--white);
      margin-bottom: 0.25rem;
    }
    
    .option-desc {
      font-size: 0.85rem;
      color: var(--grey);
      line-height: 1.3;
    }
    
    /* Contact Form */
    .contact-inputs {
      display: grid;
      gap: 1rem;
      margin-bottom: 2rem;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Calendly */
    .calendly-integration {
      margin-top: 2rem;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid var(--border);
      border-radius: 0;
    }
    
    .calendly-text {
      color: var(--grey);
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }
    
    .calendly-button {
      background: transparent;
      color: var(--white);
      border: none;
      border-bottom: 2px solid var(--white);
      padding: 0.75rem 1.5rem;
      border-radius: 0;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .calendly-button:hover {
      transform: none;
      box-shadow: none;
      opacity: 0.8;
    }
    
    .calendly-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      pointer-events: none;
    }
    
    /* Calendly Integration Styling */
    .calendly-integration {
      width: 100%;
    }
    
    /* Calendly Inline Widget Styling - Full Width Optimized for Dark Theme */
    .calendly-inline-wrapper {
      margin-top: 1rem;
      margin-left: -2.5rem; /* Extend beyond padding-global */
      margin-right: -2.5rem; /* Extend beyond padding-global */
      width: calc(100% + 5rem); /* Account for extended margins */
      background: transparent; /* Let Calendly handle background */
      border: none;
      border-radius: 0;
      overflow: hidden;
      transition: opacity 0.5s ease;
    }
    
    .calendly-inline-widget {
      width: 100%;
      min-height: 800px; /* Increased height for better proportion */
      background: var(--primary-black);
      position: relative;
    }
    
    .calendly-inline-widget iframe {
      width: 100% !important;
      height: 800px !important;
      border: none !important;
      background: var(--primary-black) !important;
      display: block !important;
      color-scheme: light; /* Prevent dark theme conflicts */
    }
    
    /* Large Desktop Optimization (1440px+) */
    @media screen and (min-width: 1440px) {
      .calendly-inline-widget {
        min-height: 850px; /* Increased for better proportion */
      }
      
      .calendly-inline-widget iframe {
        height: 850px !important;
      }
    }
    
    /* Desktop Optimization (1024px - 1439px) */
    @media screen and (max-width: 1439px) and (min-width: 1024px) {
      .calendly-inline-widget {
        min-height: 750px; /* Increased height */
      }
      
      .calendly-inline-widget iframe {
        height: 750px !important;
      }
    }
    
    /* Large Tablet Optimization (768px - 1023px) */
    @media screen and (max-width: 1023px) and (min-width: 768px) {
      .calendly-inline-wrapper {
        margin-top: 1rem;
        margin-left: -2.5rem; /* Full width on tablet too */
        margin-right: -2.5rem;
        width: calc(100% + 5rem);
        background: transparent;
      }
      
      .calendly-inline-widget {
        min-height: 700px;
      }
      
      .calendly-inline-widget iframe {
        height: 700px !important;
      }
    }
    
    /* Tablet/Mobile Landscape Optimization (768px and below) */
    @media screen and (max-width: 767px) {
      .calendly-inline-wrapper {
        margin-top: 1rem;
        margin-left: -2.5rem;
        margin-right: -2.5rem;
        width: calc(100% + 5rem);
        border: none;
        background: transparent;
      }
      
      .calendly-inline-widget {
        min-height: 650px;
        background: var(--primary-black);
        border-radius: 0;
      }
      
      .calendly-inline-widget iframe {
        height: 650px !important;
      }
    }
    
    /* Mobile Portrait Optimization (479px and below) */
    @media screen and (max-width: 479px) {
      .calendly-inline-wrapper {
        margin-top: 0.75rem;
        margin-left: -20px; /* Account for mobile padding */
        margin-right: -20px;
        width: calc(100% + 40px);
      }
      
      .calendly-inline-widget {
        min-height: 600px; /* Increased mobile height */
        border-radius: 0;
      }
      
      .calendly-inline-widget iframe {
        height: 600px !important;
      }
    }
    
    /* Safe area support for modern mobile devices */
    @supports (padding: max(0px)) {
      @media screen and (max-width: 479px) {
        .calendly-inline-widget {
          min-height: calc(600px + env(safe-area-inset-bottom));
          padding-bottom: env(safe-area-inset-bottom);
        }
      }
    }
    
    /* Additional Dark Theme Integration Improvements */
    .calendly-inline-widget iframe[src*="calendly.com"] {
      background-color: #0f0f0f !important;
      color-scheme: light !important;
    }
    
    /* Loading state styling */
    .calendly-inline-wrapper[style*="opacity: 0"] {
      background: linear-gradient(135deg, rgba(255,255,255,0.02) 0%, rgba(255,255,255,0.01) 100%);
    }
    
    /* Smooth transitions for calendar appearance */
    .calendly-inline-wrapper {
      transform: translateZ(0); /* Force GPU acceleration */
      will-change: opacity, transform;
    }
    
    /* Button state when transitioning to calendar */
    .calendly-button[style*="opacity: 0"] {
      pointer-events: none;
      transform: scale(0.98);
    }
    
    /* Structured Navigation */
    .navigation-area {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 0.75rem;
      background: rgba(15, 15, 15, 0.98);
      flex-shrink: 0;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      height: 60px;
      z-index: 1000;
    }
    
    .navigation-container {
      display: flex;
      justify-content: center;
      align-items: center;
      max-width: 400px;
      margin: 0 auto;
      gap: 1rem;
      height: 100%;
    }
    
    .nav-button {
      padding: 0.65rem 1.25rem;
      border-radius: 0;
      font-size: 0.85rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      border: none;
      outline: none;
      font-family: inherit;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      position: relative;
    }
    
    .nav-button.primary {
      background: transparent;
      color: var(--white);
      border-bottom: 2px solid var(--white);
    }
    
    .nav-button.primary:hover {
      transform: none;
      box-shadow: none;
      opacity: 0.8;
    }
    
    .nav-button.secondary {
      background: transparent;
      color: var(--grey);
      border-bottom: 1px solid var(--border);
    }
    
    .nav-button.secondary:hover {
      color: var(--white);
      border-bottom-color: rgba(255, 255, 255, 0.3);
    }
    
    .nav-button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    
    /* Skip Option */
    .skip-option {
      margin-top: 1.5rem;
      text-align: center;
    }
    
    .skip-button {
      background: none;
      border: none;
      color: var(--grey);
      font-size: 0.85rem;
      cursor: pointer;
      text-decoration: underline;
      transition: color 0.3s ease;
      font-family: inherit;
    }
    
    .skip-button:hover {
      color: var(--white);
    }
    
    /* Success/Error Messages */
    .success-message, .error-message {
      text-align: center;
      padding: 3rem 2rem;
    }
    
    .success-content h2 {
      color: var(--white);
      font-size: 1.5rem;
      margin-bottom: 1rem;
      font-weight: 600;
    }
    
    .success-content p {
      color: var(--grey);
      font-size: 1rem;
      margin-bottom: 0.5rem;
      line-height: 1.5;
    }
    
    .error-message p {
      color: #ff6b6b;
      font-size: 1rem;
    }
    
    /* Responsive Design - Match Landing Page Breakpoints */
    @media screen and (max-width: 991px) {
      .padding-section-large {
        padding-top: 6rem;
        padding-bottom: 6rem;
      }
      
      .spacer-large {
        padding-top: 2.5rem;
      }
      
      .spacer-medium {
        padding-top: 1.5rem;
      }
      
      .question-card {
        min-height: calc(100vh - 150px - 4rem);
        height: auto !important; /* Allow natural content height */
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
      }
      
      .options-container {
        max-width: 600px;
      }
    }
    
    @media screen and (max-width: 767px) {
      .header-content {
        padding: 0 1rem;
      }
      
      .logo-section {
        left: 1rem;
      }
      
      .questionnaire-header {
        height: 100px;
        padding: 1rem 0;
      }
      
      .main-content {
        min-height: calc(100vh - 150px); /* Allow content to expand beyond viewport */
        height: auto !important; /* Remove fixed height to prevent cutoff */
      }
      
      .padding-global {
        padding-left: 1.25rem;
        padding-right: 1.25rem;
      }
      
      .question-content {
        padding-left: 1.25rem;
        padding-right: 1.25rem;
      }
      
      .padding-section-large {
        padding-top: 5rem;
        padding-bottom: 5rem;
      }
      
      .spacer-large {
        padding-top: 1.5rem;
      }
      
      .spacer-medium {
        padding-top: 1.25rem;
      }
      
      .question-card {
        min-height: calc(100vh - 150px - 4rem);
        height: auto !important; /* Allow natural content height */
        display: flex !important;
        flex-direction: column !important;
        justify-content: center !important;
      }
      
      .pill-options {
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      }
      
      .question-title {
        font-size: 2rem;
      }
      
      .assessment-title {
        font-size: 1.6rem;
      }
      
      
      .option-card {
        padding: 1rem 1.25rem;
      }
      
      .navigation-area {
        padding: 0.75rem;
        height: 50px;
        background: rgba(15, 15, 15, 0.98);
      }
      
    }
    
    @media screen and (max-width: 479px) {
      /* System fonts for faster loading on mobile - Vercel approach */
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 
                     'Helvetica Neue', Arial, sans-serif !important;
      }
      
      .logo-section {
        position: static;
        transform: none;
        justify-content: center;
        margin-bottom: 0.5rem;
      }
      
      .header-content {
        flex-direction: column;
        text-align: center;
      }
      
      /* Header title - More compact */
      .header-title {
        font-size: 0.875rem !important; /* 14px - smaller, cleaner */
        letter-spacing: 0.05em !important;
      }
      
      /* PROFESSIONAL MOBILE TYPOGRAPHY - Apple/Vercel Standards */
      .question-title {
        font-size: 1.25rem !important; /* 20px - 22% smaller for better fit */
        line-height: 1.2 !important; /* Tighter line height */
        letter-spacing: -0.01em !important; /* Slightly tighter tracking */
        margin-bottom: 1.25rem !important;
      }
      
      .assessment-title {
        font-size: 1.1rem !important; /* 17.6px - more compact */
        line-height: 1.25 !important;
        letter-spacing: -0.01em !important;
        margin-bottom: 1.25rem !important;
      }
      
      .questionnaire-header {
        height: 120px !important; /* Keep consistent with larger mobile */
        padding: 0.75rem 0;
      }
      
      .main-content {
        height: calc(100vh - 160px - env(safe-area-inset-bottom)) !important; /* Header (120px) + Navigation (40px) */
        margin-top: 120px !important;
        overflow: hidden !important;
      }
      
      .question-container {
        height: 100% !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        padding: 0.25rem 0 3rem 0 !important; /* Increased bottom padding for navigation clearance */
        overscroll-behavior-y: contain !important;
        touch-action: pan-y !important;
      }
      
      /* FIX CRITICAL: Apply same positioning fixes for smaller mobile */
      .question-slide {
        position: relative !important; /* Change from absolute to relative */
        width: 100% !important;
        height: auto !important;
        min-height: calc(100vh - 160px - env(safe-area-inset-bottom)) !important;
        display: none !important;
        top: auto !important;
        left: auto !important;
        right: auto !important;
        bottom: auto !important;
        transform: none !important;
        opacity: 1 !important;
        transition: none !important;
      }
      
      .question-slide.active {
        display: flex !important;
        flex-direction: column !important;
        justify-content: flex-start !important;
        align-items: center !important;
        visibility: visible !important;
      }
      
      /* Better text flow with slightly more padding */
      .question-content {
        padding-left: 24px !important; /* Slightly more than 20px */
        padding-right: 24px !important;
      }
      
      .question-title, .question-subtitle, .assessment-title {
        padding-left: 24px !important; /* Match content padding */
        padding-right: 24px !important;
      }
      
      .calendly-text {
        padding-left: 20px;
        padding-right: 20px;
      }
      
      .contact-inputs {
        padding-left: 20px;
        padding-right: 20px;
      }
      
      .padding-section-large {
        padding-top: 4rem;
        padding-bottom: 4rem;
      }
      
      .spacer-large {
        padding-top: 1rem;
      }
      
      .spacer-medium {
        padding-top: 1rem;
      }
      
      .question-card {
        min-height: auto !important; /* Remove fixed height constraints */
        height: auto !important;
        align-items: flex-start !important;
        padding: 0 !important;
      }
      
      .pill-options {
        grid-template-columns: 1fr;
        max-width: 500px;
        width: calc(100% - 40px);
        margin: 0 auto;
      }
      
      /* Options and pills - Slightly smaller text */
      .pill-option {
        width: 100%;
        min-height: 44px;
        padding: 0.75rem 1rem;
        font-size: 0.875rem !important; /* 14px */
      }
      
      .option-card {
        width: 100%;
        min-height: 44px;
        padding: 0.75rem 1rem;
        font-size: 0.875rem !important; /* 14px */
      }
      
      /* Section labels - Compact sizing */
      .section-label {
        font-size: 0.813rem !important; /* 13px */
        letter-spacing: 0.03em !important;
      }
      
      .options-container {
        max-width: 500px;
        width: calc(100% - 40px);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
      }
      
      
      .option-card.with-icon {
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
        min-height: 44px;
        padding: 1rem;
      }
      
      /* Navigation buttons - Professional sizing for mobile */
      .nav-button {
        padding: 0.65rem 1rem !important; /* Slightly less padding */
        min-height: 44px;
        font-size: 0.75rem !important; /* 12px - smaller for long text */
        letter-spacing: 0.03em !important; /* Tighter spacing */
        text-transform: uppercase !important;
        white-space: nowrap !important; /* Prevent text wrapping */
      }
      
      .navigation-area {
        padding: 0.5rem;
        padding-bottom: max(0.5rem, env(safe-area-inset-bottom));
        height: 40px !important; /* Consistent navigation height */
        background: rgba(15, 15, 15, 0.98);
        z-index: 1001 !important;
      }
      
      /* Make navigation container responsive */
      .navigation-container {
        max-width: calc(100% - 32px) !important; /* Full width minus padding */
      }
      
    }
    
    /* Ultra-narrow screens (360px and below) - iPhone SE, small Android */
    @media screen and (max-width: 360px) {
      .question-title {
        font-size: 1.125rem !important; /* 18px - even smaller for ultra-narrow */
        line-height: 1.15 !important;
        letter-spacing: -0.015em !important;
      }
      
      .assessment-title {
        font-size: 1rem !important; /* 16px - very compact */
        line-height: 1.2 !important;
      }
      
      .header-title {
        font-size: 0.813rem !important; /* 13px - very small but readable */
        letter-spacing: 0.04em !important;
      }
      
      .nav-button {
        font-size: 0.688rem !important; /* 11px - very small but readable */
        letter-spacing: 0.02em !important;
        padding: 0.6rem 0.875rem !important; /* Even tighter padding */
      }
      
      .pill-option, .option-card {
        font-size: 0.813rem !important; /* 13px */
      }
      
      .section-label {
        font-size: 0.75rem !important; /* 12px */
      }
    }
  </style>
  
  <!-- Calendly Integration Script -->
  <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
  <!-- Cookie Consent Styles -->
  <link href="css/cookie-consent.css" rel="stylesheet" type="text/css">
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5F668SP9"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->
  <!-- Progress System -->
  <div class="progress-system">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <div class="page-wrapper">
    <!-- Minimal Header -->
    <header class="questionnaire-header">
      <div class="header-content">
        <div class="logo-section">
          <img src="images/ntihcihtoe.svg" alt="Logo" class="logo">
          <span class="brand-text">NITHICHOTE</span>
        </div>
        <div class="header-title">LET'S MAP YOUR AUTOMATIONS</div>
        <div class="step-indicators">
          <div class="step-dot active" id="dot1"></div>
          <div class="step-dot" id="dot2"></div>
          <div class="step-dot" id="dot3"></div>
          <div class="step-dot" id="dot4"></div>
          <div class="step-dot" id="dot5"></div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="main-content">
      <div class="question-container">
        <div class="question-card">
          <form id="automation-questionnaire" name="automation-questionnaire" data-name="Automation Questionnaire">
            
            <!-- Question 1: Business Basics -->
            <div class="question-slide active" id="q1">
              <div class="question-content">
                <div class="padding-global">
                  <div class="container-large">
                    <div class="text-align-center">
                      <h2 class="assessment-title">Tell me about your business so I can create your personalized automation roadmap</h2>
                      <div class="spacer-medium"></div>
                      
                      <div class="assessment-grid">
                  <!-- Company Name -->
                  <div class="assessment-section">
                    <label class="section-label">Company name</label>
                    <div class="input-container">
                      <input class="question-input" name="company-name" placeholder="Your company" type="text" id="company-name" required>
                    </div>
                  </div>

                  <!-- Your Role -->
                  <div class="assessment-section">
                    <label class="section-label">Your role</label>
                    <div class="pill-options">
                      <div class="pill-option" data-field="your-role" data-value="founder-ceo">Founder/CEO</div>
                      <div class="pill-option" data-field="your-role" data-value="operations">Operations Manager</div>
                      <div class="pill-option" data-field="your-role" data-value="other">Other leadership</div>
                    </div>
                    <input type="hidden" name="your-role" id="your-role" required>
                  </div>

                  <!-- Team Size -->
                  <div class="assessment-section">
                    <label class="section-label">Team size</label>
                    <div class="pill-options">
                      <div class="pill-option" data-field="team-size" data-value="1-10">1-10 people</div>
                      <div class="pill-option" data-field="team-size" data-value="11-50">11-50 people</div>
                      <div class="pill-option" data-field="team-size" data-value="50+">50+ people</div>
                    </div>
                    <input type="hidden" name="team-size" id="team-size" required>
                  </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Question 2: Primary Challenge -->
            <div class="question-slide" id="q2">
              <div class="question-content">
                <div class="padding-global">
                  <div class="container-large">
                    <div class="text-align-center">
                      <div class="question-group">
                        <h2 class="question-title">What's the biggest challenge you're facing right now?</h2>
                        <div class="options-container">
                <div class="option-card with-icon" data-value="manual-tasks">
                  <div class="option-icon">
                    <img src="images/icons8-clock.svg" alt="Clock" width="24" height="24">
                  </div>
                  <div class="option-content">
                    <div class="option-text">Too much manual work</div>
                    <div class="option-desc">Repetitive tasks eating up your time</div>
                  </div>
                </div>
                <div class="option-card with-icon" data-value="slow-processes">
                  <div class="option-icon">
                    <img src="images/icons8-snail (1).svg" alt="Snail" width="24" height="24">
                  </div>
                  <div class="option-content">
                    <div class="option-text">Processes are too slow</div>
                    <div class="option-desc">Things take forever to get done</div>
                  </div>
                </div>
                <div class="option-card with-icon" data-value="missed-opportunities">
                  <div class="option-icon">
                    <img src="images/icons8-missed-call.svg" alt="Missed Call" width="24" height="24">
                  </div>
                  <div class="option-content">
                    <div class="option-text">Missing opportunities</div>
                    <div class="option-desc">Deals and leads slipping through</div>
                  </div>
                </div>
                <div class="option-card with-icon" data-value="scaling-issues">
                  <div class="option-icon">
                    <img src="images/icons8-graph.svg" alt="Graph" width="24" height="24">
                  </div>
                  <div class="option-content">
                    <div class="option-text">Can't scale efficiently</div>
                    <div class="option-desc">Growth limited by manual work</div>
                  </div>
                </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <input type="hidden" name="primary-challenge" id="primary-challenge" required>
            </div>

            <!-- Question 3: Time Savings Goal -->
            <div class="question-slide" id="q3">
              <h2 class="question-title">How much time would you like to save each week?</h2>
              <div class="options-container">
                <div class="option-card" data-value="5-10">
                  <div class="option-text">5-10 hours</div>
                </div>
                <div class="option-card" data-value="10-20">
                  <div class="option-text">10-20 hours</div>
                </div>
                <div class="option-card" data-value="20+">
                  <div class="option-text">20+ hours</div>
                </div>
              </div>
              <input type="hidden" name="time-savings" id="time-savings" required>
            </div>

            <!-- Question 4: Budget Range -->
            <div class="question-slide" id="q4">
              <h2 class="question-title">What's your monthly budget for automation?</h2>
              <div class="options-container">
                <div class="option-card" data-value="under-2k">
                  <div class="option-text">Under $2,000</div>
                </div>
                <div class="option-card" data-value="2k-5k">
                  <div class="option-text">$2,000 - $5,000</div>
                </div>
                <div class="option-card" data-value="5k+">
                  <div class="option-text">$5,000+</div>
                </div>
              </div>
              <input type="hidden" name="budget-range" id="budget-range" required>
            </div>

          </form>
        </div>
      </div>

    </div>

    <!-- Floating Navigation -->
    <div class="navigation-area">
      <div class="navigation-container">
        <button type="button" class="nav-button secondary" id="prevBtn" onclick="previousQuestion()" style="display: none;">Back</button>
        <button type="button" class="nav-button primary" id="nextBtn" onclick="nextQuestion()">Continue</button>
        <button type="submit" class="nav-button primary" id="submitBtn" style="display: none;" form="automation-questionnaire">Complete</button>
      </div>
    </div>

    <!-- Success Message -->
    <div class="success-message" id="successMessage" style="display: none;">
      <div class="success-content">
        <h2>🎉 All set!</h2>
        <p>I'll send you a personalized roadmap within 24 hours.</p>
        <p>Looking forward to our chat!</p>
      </div>
    </div>

    <!-- Error Message -->
    <div class="error-message" id="errorMessage" style="display: none;">
      <p>Something went wrong. Please try again or email me directly.</p>
    </div>
  </div>
    <footer class="footer">
      <div class="padding-global">
        <div class="w-layout-blockcontainer container-large w-container">
          <div class="divider-stripe"></div>
          <div class="footer-padding">
            <div class="footer-logo-wrapper">
              <a href="#" class="brand-link w-inline-block"><img src="images/ntihcihtoe.svg" loading="lazy" alt="" class="logo"></a>
              <div class="text-size-small text-color-secondary">Your AI strategist</div>
            </div>
            <div class="w-layout-grid footer-grid">
              <div id="w-node-_252d0a0a-03ca-2fee-3dfb-7feacbc65c25-cbc65c16" class="footer-content">
                <div class="footer-block">
                  <a href="https://www.instagram.com/" data-w-id="252d0a0a-03ca-2fee-3dfb-7feacbc65c27" target="_blank" class="link-button w-inline-block">
                    <div class="button-link-wrapper">
                      <div class="button-text-block">
                        <div class="button-text">Linkedin</div>
                        <div class="button-text is-hover">Instagram</div>
                      </div>
                    </div>
                  </a>
                  <div class="button-wrap">
                    <a href="mailto:hi@nithichote.com?subject=Let%E2%80%99s%20Automate%20My%20Busywork" data-w-id="252d0a0a-03ca-2fee-3dfb-7feacbc65c44" class="link-button w-inline-block">
                      <div class="button-link-wrapper">
                        <div class="button-text-block">
                          <div class="button-text is-hover">HI@nithichote.com</div>
                          <div class="button-text">HI@nithichote.com</div>
                        </div>
                        <div class="arrow-button-block">
                          <div class="arrow-button _01 w-embed"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
                              <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg></div>
                          <div class="arrow-button _02 w-embed"><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" fill="currentColor">
                              <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                            </svg></div>
                        </div>
                      </div>
                      <div class="underline is-nav"></div>
                    </a>
                  </div>
                </div>
              </div>
              <div id="w-node-_252d0a0a-03ca-2fee-3dfb-7feacbc65c4f-cbc65c16" class="footer-content">
                <div class="footer-block">
                  <a href="template-info/style-guide.html" data-w-id="252d0a0a-03ca-2fee-3dfb-7feacbc65c51" class="link-button w-inline-block">
                    <div class="button-link-wrapper">
                      <div class="button-text-block">
                        <div class="button-text">Privacy Policy</div>
                        <div class="button-text is-hover">Style guide</div>
                      </div>
                    </div>
                  </a>
                  <a href="template-info/licenses.html" data-w-id="252d0a0a-03ca-2fee-3dfb-7feacbc65c58" class="link-button w-inline-block">
                    <div class="button-link-wrapper">
                      <div class="button-text-block">
                        <div class="button-text">Terms of Service</div>
                        <div class="button-text is-hover">Linceses</div>
                      </div>
                    </div>
                  </a>
                  <a href="template-info/changelog.html" data-w-id="252d0a0a-03ca-2fee-3dfb-7feacbc65c5f" class="link-button w-inline-block">
                    <div class="button-link-wrapper">
                      <div class="button-text-block">
                        <div class="button-text">Cookie Policy</div>
                        <div class="button-text is-hover">Changelog</div>
                      </div>
                    </div>
                  </a>
                </div>
              </div>
              <div id="w-node-_252d0a0a-03ca-2fee-3dfb-7feacbc65c6c-cbc65c16" class="divider-stripe"></div>
            </div>
          </div>
        </div>
      </div><img src="images/bg-pattern.svg" loading="lazy" alt="Graphical element pattern" class="footer-bg">
    </footer>
  
  <script>
    // Production questionnaire initialization
    
    // Security: Input sanitization function
    function sanitizeInput(input) {
      if (typeof input !== 'string') return input;
      
      // Remove any HTML tags
      input = input.replace(/<[^>]*>/g, '');
      
      // Escape special characters
      input = input
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#x27;')
        .replace(/\//g, '&#x2F;');
      
      // Remove any script tags or javascript: protocols
      input = input.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
      input = input.replace(/javascript:/gi, '');
      
      // Trim whitespace
      input = input.trim();
      
      // Limit length to prevent buffer overflow attacks
      if (input.length > 500) {
        input = input.substring(0, 500);
      }
      
      return input;
    }
    
    // Professional questionnaire functionality
    let currentQuestion = 1;
    const totalQuestions = 4; // Updated: Budget question is now final
    const formData = {};
    
    function updateProgress() {
      const progressFill = document.getElementById('progressFill');
      const progressPercentage = (currentQuestion / totalQuestions) * 100;
      if (progressFill) {
        progressFill.style.width = progressPercentage + '%';
      }
      
      // Update step dots
      document.querySelectorAll('.step-dot').forEach((dot, index) => {
        dot.classList.remove('active', 'completed');
        if (index + 1 === currentQuestion) {
          dot.classList.add('active');
        } else if (index + 1 < currentQuestion) {
          dot.classList.add('completed');
        }
      });
    }
    
    // Professional mobile text optimization - Apple/Vercel approach
    function updateTextForMobile(questionNum) {
      const width = window.innerWidth;
      const nextBtn = document.getElementById('nextBtn');
      
      if (width <= 390) {
        // Ultra-short versions for narrow screens including iPhone 12 Pro (390px)
        if (questionNum === totalQuestions) {
          nextBtn.textContent = 'Book Call'; // Even shorter for narrow screens
        } else {
          nextBtn.textContent = 'Continue';
        }
      } else if (width <= 479) {
        // Short versions for wider mobile
        if (questionNum === totalQuestions) {
          nextBtn.textContent = 'Book Strategy'; // Slightly shorter
        } else {
          nextBtn.textContent = 'Continue';
        }
      } else {
        // Standard text for larger screens
        if (questionNum === totalQuestions) {
          nextBtn.textContent = 'Book Strategy Call';
        } else {
          nextBtn.textContent = 'Continue';
        }
      }
    }
    
    function showQuestion(questionNum) {
      // Hide all questions
      document.querySelectorAll('.question-slide').forEach(function(slide) {
        slide.classList.remove('active');
      });
      
      // Show current question
      const questionElement = document.getElementById('q' + questionNum);
      if (questionElement) {
        setTimeout(() => {
          questionElement.classList.add('active');
        }, 50);
      }
      
      // Handle scrolling for Calendly page
      const questionContainer = document.querySelector('.question-container');
      if (questionNum === 5) {
        questionContainer.classList.add('calendly-page');
      } else {
        questionContainer.classList.remove('calendly-page');
      }
      
      // Update navigation buttons
      const prevBtn = document.getElementById('prevBtn');
      const nextBtn = document.getElementById('nextBtn');
      const submitBtn = document.getElementById('submitBtn');
      
      // Show/hide previous button
      if (questionNum === 1) {
        prevBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'block';
      }
      
      // Show continue button for all questions (including final budget question)
      nextBtn.style.display = 'block';
      submitBtn.style.display = 'none';
      
      // Update button text for final question with smart mobile alternatives
      updateTextForMobile(questionNum);
      
      updateProgress();
    }
    
    function validateQuestion(questionNum) {
      const questionElement = document.getElementById('q' + questionNum);
      const requiredFields = questionElement.querySelectorAll('[required]');
      let isValid = true;
      
      requiredFields.forEach(function(field) {
        if (field.type === 'hidden') {
          // For option cards, check if value is set
          if (!field.value) {
            isValid = false;
          }
        } else if (!field.value.trim()) {
          field.style.borderColor = 'rgba(255, 107, 107, 0.5)';
          isValid = false;
        } else {
          field.style.borderColor = '';
        }
      });
      
      return isValid;
    }
    
    function nextQuestion() {
      // Only validate if it's not a skip
      if (currentQuestion !== 1 && !validateQuestion(currentQuestion)) {
        return;
      }
      
      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        showQuestion(currentQuestion);
      } else if (currentQuestion === totalQuestions) {
        // Budget question completed - redirect to calendar
        redirectToCalendar();
      }
    }
    
    function previousQuestion() {
      if (currentQuestion > 1) {
        currentQuestion--;
        showQuestion(currentQuestion);
      }
    }
    
    function skipQuestion() {
      // Skip validation for optional questions
      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        showQuestion(currentQuestion);
      }
    }
    
    // Simple pill selection function
    window.selectPill = function(element) {
      const fieldName = element.getAttribute('data-field');
      const value = element.getAttribute('data-value');
      
      // Remove selected class from all pills in this group
      const container = element.parentElement;
      const pills = container.querySelectorAll('.pill-option');
      pills.forEach(pill => pill.classList.remove('selected'));
      
      // Add selected class to clicked pill
      element.classList.add('selected');
      
      // Set hidden field value
      const hiddenField = document.getElementById(fieldName);
      if (hiddenField) {
        hiddenField.value = value;
        console.log('✅ Selected:', element.textContent, '- Value set to:', value);
        
        // Production: Log selection for analytics
        if (window.gtag) {
          gtag('event', 'form_interaction', {
            event_category: 'questionnaire',
            event_label: fieldName + ':' + value
          });
        }
      }
    };
    
    function selectOption(element, fieldName) {
      // Remove selection from siblings
      const container = element.parentElement;
      container.querySelectorAll('.option-card').forEach(card => {
        card.classList.remove('selected');
      });
      
      // Add selection to clicked card
      element.classList.add('selected');
      
      // Set hidden field value
      const hiddenField = document.getElementById(fieldName);
      if (hiddenField) {
        hiddenField.value = element.getAttribute('data-value');
      }
      
      // Auto-advance after selection
      setTimeout(() => {
        nextQuestion();
      }, 400);
    }
    
    function redirectToCalendar() {
      
      // Get form data from questionnaire with sanitization
      const questionnaireData = {
        company: sanitizeInput(document.getElementById('company-name')?.value || ''),
        role: sanitizeInput(document.getElementById('your-role')?.value || ''), 
        teamSize: sanitizeInput(document.getElementById('team-size')?.value || ''),
        challenge: sanitizeInput(document.getElementById('primary-challenge')?.value || ''),
        budget: sanitizeInput(document.getElementById('budget-range')?.value || '')
      };
      
      // Capture UTM parameters for complete attribution tracking
      const urlParams = new URLSearchParams(window.location.search);
      const utmSource = urlParams.get('utm_source') || sessionStorage.getItem('utm_source') || 'direct';
      const utmMedium = urlParams.get('utm_medium') || sessionStorage.getItem('utm_medium') || 'none';
      const utmCampaign = urlParams.get('utm_campaign') || sessionStorage.getItem('utm_campaign') || 'none';
      const utmTerm = urlParams.get('utm_term') || sessionStorage.getItem('utm_term') || '';
      const utmContent = urlParams.get('utm_content') || sessionStorage.getItem('utm_content') || '';
      
      // Save questionnaire data to sessionStorage for n8n webhook (with complete UTM tracking)
      const dataForWebhook = {
        company: questionnaireData.company,
        role: questionnaireData.role,
        teamSize: questionnaireData.teamSize,
        challenge: questionnaireData.challenge,
        challengeLabel: getChallengeLabel(questionnaireData.challenge),
        budget: questionnaireData.budget,
        original_source: utmSource,
        original_medium: utmMedium,
        original_campaign: utmCampaign,
        original_term: utmTerm,
        original_content: utmContent,
        submittedAt: new Date().toISOString()
      };
      
      // Store in both localStorage (persistent) and sessionStorage (temporary) for compatibility
      localStorage.setItem('questionnaireData', JSON.stringify(dataForWebhook));
      sessionStorage.setItem('questionnaireData', JSON.stringify(dataForWebhook));
      console.log('💾 Questionnaire data stored in both localStorage and sessionStorage for maximum reliability');
      
      // Build URL parameters for calendar page
      const calendarPageParams = new URLSearchParams();
      
      // Add questionnaire data (no name/email since Calendly will collect this)
      if (questionnaireData.company) calendarPageParams.append('a1', `Company: ${questionnaireData.company}`);
      if (questionnaireData.role) calendarPageParams.append('a2', `Role: ${questionnaireData.role}`);
      if (questionnaireData.teamSize) calendarPageParams.append('a3', `Team Size: ${questionnaireData.teamSize}`);
      if (questionnaireData.challenge) calendarPageParams.append('a4', `Challenge: ${questionnaireData.challenge}`);
      if (questionnaireData.budget) calendarPageParams.append('a5', `Budget: ${questionnaireData.budget}`);
      
      // Preserve original UTM parameters from URL or sessionStorage
      const calendarUrlParams = new URLSearchParams(window.location.search);
      
      const utmParams = ['utm_source', 'utm_medium', 'utm_campaign', 'utm_term', 'utm_content'];
      
      let hasUTM = false;
      utmParams.forEach(param => {
        // Check URL first, then sessionStorage
        const urlValue = calendarUrlParams.get(param);
        const sessionValue = sessionStorage.getItem(param);
        const value = urlValue || sessionValue;
        
        
        if (value) {
          calendarPageParams.append(param, value);
          hasUTM = true;
        }
      });
      
      // If no UTM params were found in URL or sessionStorage, use defaults
      if (!hasUTM) {
        calendarPageParams.append('utm_campaign', 'automation-questionnaire');
        calendarPageParams.append('utm_source', 'website');
        calendarPageParams.append('utm_medium', 'questionnaire-completion');
      } else {
      }
      
      // 🔄 PASS THROUGH SCHEDULE_ANOTHER PARAMETER - Essential for rescheduling flow
      const currentUrlParams = new URLSearchParams(window.location.search);
      const scheduleAnother = currentUrlParams.get('schedule_another');
      if (scheduleAnother === 'true') {
        calendarPageParams.append('schedule_another', 'true');
        console.log('🔄 Passing schedule_another=true parameter to calendar.html for fresh booking flow');
      }
      
      // Build calendar page URL
      const calendarPageUrl = `calendar.html?${calendarPageParams.toString()}`;
      
      
      // Show loading state briefly, then redirect
      const nextBtn = document.getElementById('nextBtn');
      if (nextBtn) {
        // Smart loading text based on screen width - optimized for iPhone 12 Pro (390px)
        const width = window.innerWidth;
        if (width <= 390) {
          nextBtn.textContent = 'Loading...'; // Shortest for narrow screens including iPhone 12 Pro
        } else if (width <= 479) {
          nextBtn.textContent = 'Opening Calendar...';
        } else {
          nextBtn.textContent = 'Redirecting to Calendar...';
        }
        nextBtn.disabled = true;
      }
      
      // Smooth transition to calendar page
      setTimeout(() => {
        window.location.href = calendarPageUrl;
      }, 800);
    }
    
    async function submitForm() {
      if (!validateQuestion(currentQuestion)) {
        return;
      }
      
      try {
        // Show loading state
        const submitBtn = document.getElementById('submitBtn');
        submitBtn.textContent = 'Sending...';
        submitBtn.disabled = true;
        
        // Collect all form data with sanitization
        const formElements = document.querySelectorAll('input[name]');
        formElements.forEach(element => {
          if (element.value) {
            formData[element.name] = sanitizeInput(element.value);
          }
        });
        
        // Prepare data for n8n webhook
        const submissionData = {
          timestamp: new Date().toISOString(),
          source: 'questionnaire',
          ...formData
        };
        
        // Simulate submission (replace with actual webhook)
        await new Promise(resolve => setTimeout(resolve, 1500));
        
        // For actual n8n webhook submission:
        /*
        const webhookUrl = 'https://your-n8n-instance.com/webhook/automation-questionnaire';
        const response = await fetch(webhookUrl, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(submissionData)
        });
        
        if (!response.ok) {
          throw new Error('Submission failed');
        }
        */
        
        // Show success message
        document.querySelector('.page-wrapper').style.display = 'none';
        const progressSystem = document.querySelector('.progress-system');
        if (progressSystem) {
          progressSystem.style.display = 'none';
        }
        document.getElementById('successMessage').style.display = 'block';
        
        // Track conversion
        if (typeof gtag !== 'undefined') {
          gtag('event', 'form_submit', {
            'event_category': 'engagement',
            'event_label': 'questionnaire_complete'
          });
        }
        
      } catch (error) {
        // Production error logging
        if (window.gtag) {
          gtag('event', 'exception', {
            description: 'Form submission error: ' + error.message,
            fatal: false
          });
        }
        
        // Show error message
        document.getElementById('errorMessage').style.display = 'block';
        
        // Reset submit button
        submitBtn.textContent = 'Complete';
        submitBtn.disabled = false;
      }
    }
    
    // Helper function to get human-readable challenge labels
    function getChallengeLabel(value) {
      const labels = {
        'manual-tasks': 'Too much manual work',
        'slow-processes': 'Processes are too slow',
        'scaling-issues': "Can't scale efficiently",
        'missed-opportunities': 'Missing opportunities'
      };
      return labels[value] || value;
    }
    
    // Initialize questionnaire
    document.addEventListener('DOMContentLoaded', function() {
      showQuestion(1);
      
      // IMMEDIATE click handlers - no delay needed
      function attachClickHandlers() {
        console.log('🔧 Attaching click handlers...');
        
        // Add direct click handlers to all pill options
        const allPills = document.querySelectorAll('.pill-option');
        console.log('🔍 Found', allPills.length, 'pill-option elements');
        
        allPills.forEach((pill, index) => {
          console.log(`🔍 Pill ${index}:`, pill.textContent.trim());
          
          // Remove any existing listeners first
          pill.removeEventListener('click', pill._clickHandler);
          
          // Create new click handler
          pill._clickHandler = function(e) {
            console.log('🎯 PILL CLICKED:', this.textContent.trim());
            e.preventDefault();
            e.stopPropagation();
            selectPill(this);
          };
          
          pill.addEventListener('click', pill._clickHandler);
        });
        
        // Add direct click handlers to all option cards  
        const allCards = document.querySelectorAll('.option-card');
        console.log('🔍 Found', allCards.length, 'option-card elements');
        
        allCards.forEach(card => {
          // Remove any existing listeners first
          card.removeEventListener('click', card._clickHandler);
          
          card._clickHandler = function(e) {
            console.log('🎯 CARD CLICKED:', this.textContent.trim());
            e.preventDefault();
            e.stopPropagation();
            const hiddenField = this.closest('.question-slide').querySelector('input[type="hidden"]');
            if (hiddenField) {
              selectOption(this, hiddenField.id);
            }
          };
          
          card.addEventListener('click', card._clickHandler);
        });
        
        console.log('✅ Click handlers attached successfully!');
      }
      
      // Attach handlers immediately and also after a short delay
      attachClickHandlers();
      setTimeout(attachClickHandlers, 100);
      
      // Add form submit handler
      document.getElementById('automation-questionnaire').addEventListener('submit', function(e) {
        e.preventDefault();
        submitForm();
      });
      
      // Add keyboard navigation
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && e.target.classList.contains('question-input')) {
          e.preventDefault();
          nextQuestion();
        }
      });
      
      // Auto-focus text inputs when question appears
      const observer = new MutationObserver(function(mutations) {
        mutations.forEach(function(mutation) {
          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
            const target = mutation.target;
            if (target.classList.contains('active') && target.classList.contains('question-slide')) {
              const input = target.querySelector('.question-input');
              if (input && (input.type === 'text' || input.type === 'email')) {
                setTimeout(() => input.focus(), 300);
              }
            }
          }
        });
      });
      
      document.querySelectorAll('.question-slide').forEach(slide => {
        observer.observe(slide, { attributes: true });
      });
      
      // Professional booking detection - redirect to confirmation page
      function checkExistingBooking() {
        try {
          console.log('🔍 === BOOKING CHECK DEBUG ===');
          console.log('🔍 Current URL:', window.location.href);
          console.log('🔍 Document referrer:', document.referrer);
          
          // Check if user explicitly wants to schedule another session
          const urlParams = new URLSearchParams(window.location.search);
          const scheduleAnother = urlParams.get('schedule_another') === 'true';
          const fromConfirmation = document.referrer.includes('booking-confirmed.html');
          
          console.log('🔍 schedule_another parameter:', urlParams.get('schedule_another'));
          console.log('🔍 scheduleAnother:', scheduleAnother);
          console.log('🔍 fromConfirmation:', fromConfirmation);
          
          // Don't redirect if user is intentionally scheduling another session
          if (scheduleAnother || fromConfirmation) {
            console.log('🔄 Allowing fresh booking flow (schedule_another=true or from confirmation)');
            return;
          }
          
          const existingBooking = localStorage.getItem('questionnaireData');
          const bookingConfirmed = localStorage.getItem('bookingConfirmed');
          
          console.log('🔍 existingBooking:', !!existingBooking);
          console.log('🔍 bookingConfirmed:', bookingConfirmed);
          console.log('🔍 Should redirect to static confirmation?', !!(existingBooking || bookingConfirmed)); 
          
          if (existingBooking || bookingConfirmed) {
            // Show professional site-matching loading overlay
            const loadingMessage = document.createElement('div');
            loadingMessage.style.cssText = `
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(15, 15, 15, 0.98);
              display: flex;
              flex-direction: column;
              align-items: center;
              justify-content: center;
              z-index: 10000;
              font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif;
              color: white;
            `;
            // Fixed: Removed cache buster causing double execution
            loadingMessage.innerHTML = `
              <div style="width: 24px; height: 24px; border: 2px solid rgba(255, 255, 255, 0.3); border-top: 2px solid white; border-radius: 50%; animation: spin 0.6s linear infinite;"></div>
            `;
            
            // Add professional spin animation
            const style = document.createElement('style');
            style.textContent = `
              @keyframes spin { 
                0% { transform: rotate(0deg); } 
                100% { transform: rotate(360deg); } 
              }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(loadingMessage);
            
            // Redirect after brief delay
            setTimeout(() => {
              console.log('🔄 Redirecting returning user to static confirmation page');
              window.location.href = 'booking-confirmed.html';
            }, 800);
          }
        } catch (err) {
          console.log('Booking check error:', err);
        }
      }
      
      // Run booking check IMMEDIATELY on page load - no delay to prevent bypass
      checkExistingBooking();
      
      // Add resize listener for dynamic text updates
      window.addEventListener('resize', function() {
        updateTextForMobile(currentQuestion);
      });
      
      // iOS Pull-to-Refresh Prevention - JavaScript Fallback for Safari < 16
      let startY = 0;
      let isQuestionContainerTouch = false;
      
      document.addEventListener('touchstart', function(e) {
        startY = e.touches[0].pageY;
        
        // Check if touch started on question container
        const container = document.querySelector('.question-container');
        isQuestionContainerTouch = container && container.contains(e.target);
      }, { passive: false });
      
      document.addEventListener('touchmove', function(e) {
        if (!isQuestionContainerTouch) {
          // Only prevent default if touching outside question container
          const touchY = e.touches[0].pageY;
          const scrollTop = document.body.scrollTop || document.documentElement.scrollTop;
          
          // If at top and trying to scroll up (pull-to-refresh gesture), prevent it
          if (scrollTop <= 0 && touchY > startY) {
            e.preventDefault();
            console.log('🚫 Prevented pull-to-refresh gesture');
          }
        }
      }, { passive: false });
      
      // Also prevent default touchmove on document to be extra safe on iOS
      document.addEventListener('touchmove', function(e) {
        // Allow scrolling only within question-container
        if (!e.target.closest('.question-container')) {
          e.preventDefault();
        }
      }, { passive: false });
    });
  </script>
  <!-- Cookie Consent Script -->
  <script src="js/cookie-consent.js" type="text/javascript"></script>
</body>
</html>
