<!DOCTYPE html><!--  Professional Calendar Booking Page  -->
<html data-wf-page="686bac2b4d1341d4cca18e08" data-wf-site="686bac2b4d1341d4cca18daf" lang="en">
<head>
  <meta charset="utf-8">
  <title>Book Your Strategy Session - AI Automation Consultation</title>
  <meta content="Book your personalized 30-minute AI automation strategy session. Let's map your highest-impact automations together." name="description">
  <meta content="Book Your Strategy Session - AI Automation Consultation" property="og:title">
  <meta content="Book your personalized 30-minute AI automation strategy session. Let's map your highest-impact automations together." property="og:description">
  <meta content="Book Your Strategy Session - AI Automation Consultation" property="twitter:title">
  <meta content="Book your personalized 30-minute AI automation strategy session. Let's map your highest-impact automations together." property="twitter:description">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/phuns-fresh-site.webflow.css" rel="stylesheet" type="text/css">
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="favicon.ico" rel="shortcut icon" type="image/x-icon">
  <link href="apple-touch-icon.png" rel="apple-touch-icon">
  <link rel="manifest" href="/manifest.json">
  <!-- Mobile Overflow Fixes -->
  <link href="css/mobile-fixes.css" rel="stylesheet" type="text/css">
  
  <!-- Custom Video Player Styles -->
  
  <!-- Removed iframe-resizer due to license requirements -->
  
  <!-- Performance: Preload Cal.com resources -->
  <link rel="preload" href="https://app.cal.com/embed/embed.js" as="script">
  <link rel="dns-prefetch" href="https://app.cal.com">
  <link rel="preconnect" href="https://app.cal.com">
  
  <!-- Video.js Professional Video Player -->
  <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet">
  <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
  
  <!-- Cal.com embed script -->
  <script type="text/javascript">
    (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
    Cal("init", "30min", {origin:"https://app.cal.com"});
    // Cal.com initialized with namespace "30min"
  </script>
  
  <style>
    /* Calendar Page Design */
    :root {
      /* CORRECTED: Use actual main site background color #0f0f0f */
      --primary-black: #0f0f0f; /* Match main site dark grey background */
      --white: white;
      --border: #b4b4b414;
      --grey: #b4b4b4;
      --dark: #0f0f0f;
      --secondary-black: #0f0f0f;
    }
    
    * {
      box-sizing: border-box;
      -webkit-text-stroke: unset !important;
      text-stroke: unset !important;
    }

    /* Remove unwanted text effects globally */
    ::selection {
      background: rgba(59, 130, 246, 0.2) !important;
      color: inherit !important;
      -webkit-text-stroke: none !important;
    }

    ::-moz-selection {
      background: rgba(59, 130, 246, 0.2) !important;
      color: inherit !important;
    }
    
    html {
      overflow-x: hidden;
      overflow-y: auto;
    }
    
    body {
      font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 0;
      background-color: var(--primary-black);
      color: var(--white);
      line-height: 1.5;
      overflow-x: hidden;
      overflow-y: auto;
    }
    
    .page-wrapper {
      min-height: 100vh;
      background-color: var(--primary-black);
      overflow: visible;
    }
    
    /* Header Section */
    .calendar-header {
      text-align: center;
      padding: 4rem 0 2rem 0;
      background-color: var(--primary-black); /* Match site background */
    }
    
    .calendar-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin: 0 0 1rem 0;
      color: var(--white);
      letter-spacing: -0.02em;
    }
    
    .calendar-header p {
      font-size: 1.1rem;
      color: var(--grey);
      margin: 0;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Progress Indicator */
    .progress-indicator {
      text-align: center;
      padding: 1rem 0 2rem 0;
    }
    
    .progress-steps {
      display: inline-flex;
      align-items: center;
      gap: 1rem;
    }
    
    .progress-step {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .step-circle {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.2);
      color: var(--grey);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: 600;
      border: 2px solid rgba(255, 255, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .step-circle.completed {
      background: var(--white) !important;
      color: var(--primary-black) !important;
      border: 2px solid var(--white) !important;
      box-shadow: 0 2px 8px rgba(255, 255, 255, 0.3);
      font-size: 0.9rem;
      font-weight: 700;
    }
    
    .step-circle:not(.completed) {
      background: rgba(255, 255, 255, 0.8);
      color: var(--primary-black);
      border: 2px solid rgba(255, 255, 255, 0.9);
    }
    
    .step-text {
      font-size: 0.9rem;
      color: var(--grey);
      font-weight: 500;
      transition: all 0.3s ease;
    }
    
    .progress-step:has(.step-circle.completed) .step-text {
      color: var(--white) !important;
      font-weight: 600;
    }
    
    .progress-step:has(.step-circle:not(.completed)) .step-text {
      color: rgba(255, 255, 255, 0.9);
      font-weight: 600;
    }
    
    .step-divider {
      width: 40px;
      height: 2px;
      background: var(--grey); /* Match subtext color */
      border-radius: 1px;
      transition: all 0.2s ease;
    }
    
    .progress-steps:hover .step-divider {
      background: var(--grey); /* Keep consistent grey on hover */
    }
    
    /* Calendar Container - Professional Design */
    .calendar-container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 0 1rem 2rem 1rem;
      background-color: var(--primary-black); /* Match site background */
    }
    
    /* Personalized Message Section */
    .personalized-message {
      text-align: center;
      padding: 0.5rem 0 1rem 0; /* Reduced top padding */
    }
    
    .personalized-text {
      font-size: 1.1rem;
      color: var(--grey);
      margin: 0 0 1.5rem 0; /* Reduced bottom margin */
      font-weight: 400;
    }
    
    .calendar-divider {
      width: 100px;
      height: 1px;
      background: var(--border);
      margin: 0 auto 0.375rem auto; /* Tighter spacing between divider and calendar */
    }
    
    /* Modern Container-Free Cal.com Architecture - 2024 Best Practice */
    .cal-modern-embed {
      width: 100%;
      background: var(--primary-black);
    }
    
    /* Modern responsive iframe with CSS aspect-ratio */
    .cal-modern-embed iframe {
      width: 100%;
      border: none;
      background: var(--primary-black);
      display: block;
    }
    
    /* Mobile: 4:3 aspect ratio for optimal mobile viewing */
    @media (max-width: 767px) {
      .cal-modern-embed iframe {
        aspect-ratio: 4 / 3;
      }
    }
    
    /* Tablet: 16:10 aspect ratio for tablet viewing */
    @media (min-width: 768px) and (max-width: 1023px) {
      .cal-modern-embed iframe {
        aspect-ratio: 16 / 10;
      }
    }
    
    /* Desktop: 16:9 aspect ratio for desktop viewing */
    @media (min-width: 1024px) {
      .cal-modern-embed iframe {
        aspect-ratio: 16 / 9;
      }
    }
    
    
    /* Aggressively hide ALL Cal.com branding */
    [data-cal-namespace] [class*="cal-com"],
    [data-cal-namespace] [class*="powered"],
    [data-cal-namespace] [class*="branding"],
    [data-cal-namespace] footer,
    [data-cal-namespace] [href*="cal.com"],
    #my-cal-inline-30min [class*="powered-by"],
    #my-cal-inline-30min [class*="branding"],
    #my-cal-inline-30min footer,
    .cal-powered-by,
    .cal-branding,
    a[href*="cal.com"]:not([href*="app.cal.com"]),
    /* Target specific confirmation page branding */
    [data-cal-namespace] [class*="create-your-own"],
    [data-cal-namespace] [class*="try-it-free"],
    [data-cal-namespace] [class*="promotional"],
    #my-cal-inline-30min [href*="cal.com/signup"],
    #my-cal-inline-30min [href*="cal.com"][target="_blank"],
    /* Target parent containers of Cal.com links */
    div:has(> a[href*="cal.com"]),
    p:has(> a[href*="cal.com"]),
    /* Target the specific text on confirmation */
    *:has-text("Create your own booking link"),
    *:has-text("Try it for free") {
      display: none !important;
      visibility: hidden !important;
      height: 0 !important;
      overflow: hidden !important;
      margin: 0 !important;
      padding: 0 !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    /* REMOVED: Let Cal.com handle color-scheme internally */
    
    /* Professional Cal.com Container - Consolidated Styling */
    #my-cal-inline-30min {
      width: 100% !important;
      max-width: 100% !important;
      font-family: inherit;
      border-radius: 8px;
      overflow: hidden;
      background-color: var(--primary-black) !important;
    }
    
    /* REMOVED AGGRESSIVE OVERRIDES: Let Cal.com handle its own internal styling */
    /* Only fixing the white container background issue with surgical approach */
    
    /* CORRECTED: Professional Loading Experience with Site Background */
    .loading-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 580px;
      width: 100%;
      color: var(--grey);
      background: var(--primary-black); /* Match main site black background */
      border-radius: 8px;
      position: relative;
      overflow: hidden;
    }
    
    /* Premium Loading Spinner */
    .loading-spinner {
      width: 50px;
      height: 50px;
      border: 3px solid var(--border);
      border-top: 3px solid var(--white);
      border-radius: 50%;
      animation: spin 1.2s linear infinite;
      margin-bottom: 2rem;
      position: relative;
    }
    
    .loading-spinner::before {
      content: '';
      position: absolute;
      top: -3px;
      left: -3px;
      right: -3px;
      bottom: -3px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      animation: pulse 2s ease-in-out infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 1; transform: scale(1.1); }
    }
    
    /* Calendar Skeleton Placeholder */
    .calendar-skeleton {
      width: 100%;
      max-width: 800px;
      margin: 2rem auto;
      background: var(--primary-black);
      border-radius: 12px;
      padding: 2rem;
      display: none; /* Show after initial spinner */
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .skeleton-header {
      height: 40px;
      background: linear-gradient(90deg, #404040 25%, #505050 50%, #404040 75%);
      border-radius: 8px;
      margin-bottom: 2rem;
      animation: shimmer 2.5s infinite;
      position: relative;
    }
    
    .skeleton-header::after {
      content: '';
      position: absolute;
      right: 15px;
      top: 50%;
      transform: translateY(-50%);
      width: 30px;
      height: 20px;
      background: linear-gradient(90deg, #303030 25%, #404040 50%, #303030 75%);
      border-radius: 4px;
      animation: shimmer 2.5s infinite 0.2s;
    }
    
    .skeleton-calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 12px;
      margin-bottom: 3rem;
    }
    
    .skeleton-day {
      height: 45px;
      background: linear-gradient(90deg, #3a3a3a 25%, #4a4a4a 50%, #3a3a3a 75%);
      border-radius: 8px;
      animation: shimmer 2.5s infinite;
      position: relative;
    }
    
    .skeleton-day:nth-child(odd) { animation-delay: 0.1s; }
    .skeleton-day:nth-child(even) { animation-delay: 0.2s; }
    
    .skeleton-day.available {
      background: linear-gradient(90deg, #1a5f3a 25%, #2a7f4a 50%, #1a5f3a 75%);
      animation: shimmer 2.5s infinite 0.3s;
    }
    
    /* Professional Custom Video Player */
    .professional-video-container {
      position: relative;
      width: 100%;
      max-width: 640px; /* Match child container for consistent sizing */
      margin: 0 auto 3rem;
      /* Remove aspect-ratio to let child container control dimensions */
      background: #202020;
      border-radius: 12px;
      overflow: hidden;
    }
    
    .video-poster-wrapper {
      position: relative;
      width: 100%;
      aspect-ratio: 16/9;
      border-radius: 12px;
      overflow: hidden;
      background: #202020 !important;
      border: 2px solid rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      box-shadow: 
        0 12px 40px rgba(0, 0, 0, 0.6),
        inset 0 1px 0 rgba(255, 255, 255, 0.1);
    }
    
    .video-poster {
      position: relative;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .video-poster:hover {
      /* Remove excessive scaling animation */
    }
    
    .video-poster-content {
      text-align: center;
      margin-bottom: 2rem;
      z-index: 2;
      position: relative;
    }
    
    .video-title {
      font-size: 2rem;
      font-weight: 600;
      color: #ffffff;
      margin-bottom: 0.5rem;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .video-subtitle {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.7);
      font-weight: 400;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    /* Professional Video Poster Overlay - Vercel Standard */
    .video-play-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.08);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    
    /* CONSOLIDATED: Professional Play Button - Apple/Vercel Style */
    .video-poster .professional-play-button {
      width: 80px !important;
      height: 80px !important;
      border-radius: 50% !important;
      background: rgba(255, 255, 255, 1) !important;
      border: none !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      cursor: pointer !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4), 0 0 0 0 rgba(255, 255, 255, 0.4) !important;
      position: relative !important;
      z-index: 10 !important;
      backdrop-filter: blur(8px) !important;
      outline: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      appearance: none !important;
    }
    
    .video-poster .professional-play-button:focus,
    .video-poster .professional-play-button:active {
      outline: none !important;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4) !important;
    }
    
    .video-poster .professional-play-button:hover {
      transform: scale(1.05) !important;
      background: rgba(255, 255, 255, 1) !important;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5), 0 0 0 4px rgba(255, 255, 255, 0.2) !important;
    }
    
    .video-poster .professional-play-button:active {
      transform: scale(1.02) !important;
    }
    
    /* Unicode Play Symbol - Bulletproof Rendering */
    .play-symbol {
      font-size: 24px !important;
      color: #2d2d2d !important;
      font-weight: normal !important;
      line-height: 1 !important;
      margin-left: 3px; /* Optical adjustment for play symbol */
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
      -webkit-font-smoothing: antialiased !important;
      text-rendering: optimizeLegibility !important;
    }
    
    .hidden-video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 12px;
      z-index: 5;
      display: none;
    }
    
    .hidden-video.playing {
      display: block;
    }
    
    /* Professional HTML5 Video Controls Styling */
    
    .replay-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.7);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
      z-index: 15;
    }
    
    .replay-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }
    
    .replay-button {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }
    
    .replay-button:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 1);
    }
    
    .replay-icon {
      width: 32px;
      height: 32px;
      color: #333;
    }
    
    /* Responsive adjustments */
    @media (max-width: 768px) {
      .video-title {
        font-size: 1.5rem;
      }
      
      .video-subtitle {
        font-size: 0.9rem;
      }
      
      .video-poster .professional-play-button {
        width: 80px !important;
        height: 80px !important;
      }
      
      .play-symbol {
        font-size: 20px !important;
      }
      
      .play-icon {
        width: 24px;
        height: 24px;
      }
    }
    
    /* Week Days Header */
    .skeleton-weekday {
      height: 20px;
      background: linear-gradient(90deg, #303030 25%, #404040 50%, #303030 75%);
      border-radius: 4px;
      animation: shimmer 2.5s infinite;
      margin-bottom: 10px;
    }
    
    .skeleton-times {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
      gap: 12px;
      margin-bottom: 2rem;
    }
    
    .skeleton-time {
      height: 44px;
      background: linear-gradient(90deg, #2a4a2a 25%, #3a5a3a 50%, #2a4a2a 75%);
      border-radius: 8px;
      animation: shimmer 2.5s infinite;
      position: relative;
    }
    
    .skeleton-time:nth-child(1) { animation-delay: 0.1s; }
    .skeleton-time:nth-child(2) { animation-delay: 0.2s; }
    .skeleton-time:nth-child(3) { animation-delay: 0.3s; }
    .skeleton-time:nth-child(4) { animation-delay: 0.4s; }
    .skeleton-time:nth-child(5) { animation-delay: 0.5s; }
    .skeleton-time:nth-child(6) { animation-delay: 0.6s; }
    
    @keyframes shimmer {
      0% {
        background-position: -200px 0;
      }
      100% {
        background-position: calc(200px + 100%) 0;
      }
    }
    
    /* Confirmation Page Styling - Matches Landing Page Design */
    .confirmation-container {
      text-align: center;
      padding: 2.5rem 2rem 1rem;
      min-height: auto;
      display: flex;
      flex-direction: column;
      justify-content: center;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .confirmation-icon {
      font-size: 4rem;
      margin-bottom: 1.5rem;
    }
    
    .confirmation-heading {
      font-size: clamp(2.5rem, 6vw, 4rem);
      margin-bottom: 1.5rem;
      color: var(--white);
      font-weight: 600;
      letter-spacing: -0.05em;
      line-height: 1;
      text-transform: uppercase;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .confirmation-text {
      font-size: 1.2rem;
      color: var(--grey);
      margin-bottom: 1.5rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.4;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .confirmation-message {
      font-size: 1.2rem;
      color: var(--white);
      margin-bottom: 3rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
      font-weight: 400;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .confirmation-button {
      display: inline-block;
      padding: 1rem 3rem;
      background: var(--white);
      color: var(--primary-black);
      text-decoration: none;
      border: 2px solid var(--white);
      border-radius: 0;
      font-weight: 600;
      font-size: 14px;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      transition: all 0.3s ease;
      cursor: pointer;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .confirmation-button:hover {
      background: transparent;
      color: var(--white);
    }
    
    /* Section Dividers */
    .section-divider {
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      margin: 2.5rem auto;
      width: 100%;
      max-width: 600px;
    }
    
    /* Enhanced Confirmation Page Styles */
    .confirmation-video {
      margin: 1.5rem 0;
      text-align: center;
    }
    
    .confirmation-video h3 {
      font-size: 1.375rem;
      margin-bottom: 0;
      color: var(--white);
      font-weight: 600;
    }
    
    .video-wrapper {
      max-width: 720px;
      margin: 0 auto;
      position: relative;
      background: #202020;
      border-radius: 12px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      /* Use aspect-ratio instead of padding hack */
      aspect-ratio: 16 / 9;
    }
    
    /* Fallback for older browsers */
    @supports not (aspect-ratio: 16 / 9) {
      .video-wrapper {
        padding-bottom: 56.25%;
        height: 0;
      }
    }
    
    .video-placeholder {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #202020;
      color: var(--grey);
      font-style: italic;
    }
    
    /* Video player styling - enhanced visibility and professional appearance */
    #confirmation-video-player {
      width: 100%;
      height: auto;
      display: block;
      object-fit: cover;
      background: #202020;
      border-radius: 12px;
    }
    
    #confirmation-video-player:hover {
      filter: brightness(1.02);
    }
    
    /* Professional video thumbnail styling */
    #confirmation-video-player[poster] {
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    }
    
    /* Clean video wrapper - minimalistic design */
    .video-wrapper {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      background: #202020;
    }
    
    /* Clean play button overlay - Professional dark overlay matching native controls */
    .video-play-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.3);
      backdrop-filter: blur(8px);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
      opacity: 1;
    }
    
    
    .video-play-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    /* Clean, simple play button */
    .video-play-button {
      width: 80px;
      height: 80px;
      background: rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
    }
    
    
    /* Play triangle - Unicode Symbol (No Black Square Issues) */
    .video-play-button::after {
      content: '▶';
      font-size: 24px;
      color: #2d2d2d;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin-left: 3px;
      line-height: 1;
      text-shadow: none;
      -webkit-text-stroke: none;
      text-stroke: none;
      display: inline-block;
      width: auto;
      height: auto;
      border: none;
    }
    
    /* ================================
       CLEAN VIDEO PLAYER STYLES
       ================================ */
    
    /* Parent Container Protection - Prevent Flex/Grid Interference */
    .professional-video-container {
      display: block !important;
      width: 100% !important;
      flex-shrink: 0 !important;
      flex-grow: 0 !important;
      align-self: stretch !important;
      justify-self: stretch !important;
      background: #202020 !important; /* Override any conflicting backgrounds */
    }
    
    /* NUCLEAR OVERRIDE - Force video background visibility */
    div.professional-video-container,
    .professional-video-container,
    .professional-video-container .video-poster-wrapper,
    .professional-video-container .professional-video-player {
      background: #202020 !important;
      background-color: #202020 !important;
      /* Override CSS variables in video context */
      --primary-black: #202020 !important;
      --secondary-black: #202020 !important;
    }
    
    /* Don't add borders to text elements or buttons */
    .professional-video-container p,
    .professional-video-container span,
    .professional-video-container button,
    .professional-video-container .video-play-overlay {
      border: none !important;
      box-shadow: none !important;
      background: transparent !important;
    }
    
    /* Professional Video Player Container - Simplified 16:9 Enforcement */
    .professional-video-player {
      position: relative !important;
      width: 100% !important;
      max-width: 640px !important;
      height: 0 !important; /* Required for padding-top technique */
      padding-top: 56.25% !important; /* 16:9 aspect ratio (9/16 * 100) */
      margin: 0 auto !important;
      border-radius: 12px !important;
      overflow: hidden !important;
      background: #202020 !important;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3) !important;
      
      /* Force exact dimensions - no browser/extension override */
      max-height: none !important;
      min-height: unset !important;
      flex-grow: 0 !important;
      flex-shrink: 0 !important;
      /* NUCLEAR override for aspect ratio conflicts */
      aspect-ratio: unset !important;
      display: block !important;
      box-sizing: border-box !important;
    }
    
    /* Main Video Element - Force Fill Container Completely */
    .professional-video-player .main-video,
    .main-video {
      /* POSITIONING - Force absolute positioning */
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      
      /* DIMENSIONS - Force exact container fill */
      width: 100% !important;
      height: 100% !important;
      min-width: 100% !important;
      min-height: 100% !important;
      max-width: none !important;
      max-height: none !important;
      
      /* OBJECT FIT - Force video to fill completely */
      object-fit: cover !important;
      object-position: center center !important;
      
      /* DISPLAY - Force block display */
      display: block !important;
      visibility: visible !important;
      opacity: 1 !important;
      
      /* STYLING */
      border-radius: 12px !important;
      background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 50%, #2d2d2d 100%) !important;
      
      /* LAYERING */
      z-index: 1 !important;
      
      /* PREVENT SHRINKING */
      flex-shrink: 0 !important;
      flex-grow: 0 !important;
      
      /* FORCE DIMENSIONS */
      box-sizing: border-box !important;
      margin: 0 !important;
      padding: 0 !important;
      border: none !important;
      outline: none !important;
    }
    
    /* Clean Play Button Overlay - Absolute Positioned for Padding-Top Container */
    .video-play-overlay {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      height: 100% !important;
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      background: rgba(0, 0, 0, 0.3) !important;
      backdrop-filter: blur(8px) !important;
      transition: all 0.3s ease !important;
      cursor: pointer !important;
      border-radius: 12px !important;
      z-index: 2 !important;
    }
    
    /* Consistent hover effect for high-specificity overlay */
    .video-play-overlay:hover {
      background: rgba(0, 0, 0, 0.4) !important;
    }
    
    /* BULLETPROOF PLAY BUTTON - Simplified */
    .video-play-overlay .clean-play-button,
    .clean-play-button {
      /* DIMENSIONS - Force exact size */
      width: 72px !important;
      height: 72px !important;
      min-width: 72px !important;
      min-height: 72px !important;
      border-radius: 50% !important;
      
      /* BACKGROUND - Force white background */
      background: rgba(255, 255, 255, 0.95) !important;
      background-color: rgba(255, 255, 255, 0.95) !important;
      border: none !important;
      border-width: 0 !important;
      box-shadow: 0 4px 24px rgba(0, 0, 0, 0.2) !important;
      
      /* TEXT - Force dark text */
      font-size: 24px !important;
      color: #1a1a1a !important;
      font-weight: normal !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      line-height: 1 !important;
      
      /* LAYOUT - Force centering */
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      text-align: center !important;
      padding: 0 !important;
      padding-left: 3px !important; /* Optical centering for play symbol */
      margin: 0 !important;
      margin-bottom: 16px !important;
      
      /* INTERACTION */
      cursor: pointer !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      
      /* ELIMINATE BLACK SQUARES - Nuclear option */
      text-shadow: none !important;
      -webkit-text-stroke: 0 !important;
      -moz-text-stroke: 0 !important;
      text-stroke: 0 !important;
      outline: none !important;
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      appearance: none !important;
      
      /* ADDITIONAL OVERRIDES */
      text-decoration: none !important;
      text-transform: none !important;
      letter-spacing: normal !important;
      word-spacing: normal !important;
      opacity: 1 !important;
      visibility: visible !important;
      display: flex !important;
      position: relative !important;
      z-index: 10 !important;
    }
    
    
    .video-play-overlay .clean-play-button:active,
    .clean-play-button:active {
      transform: scale(1.05) !important;
    }
    
    /* Video Info Caption */
    .video-info {
      text-align: center;
    }
    
    .video-caption {
      color: rgba(255, 255, 255, 0.9);
      font-size: 14px;
      font-weight: 500;
      margin: 0;
      padding: 8px 16px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 20px;
      backdrop-filter: blur(8px);
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    /* Hide overlay when video is playing */
    .video-play-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* Subtle hover effect - consistent dark overlay, just slightly more opaque */
    .video-play-overlay:hover {
      background: rgba(0, 0, 0, 0.4);
    }

    
    /* Professional video controls */
    .main-video::-webkit-media-controls {
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .main-video:hover::-webkit-media-controls {
      opacity: 1;
    }
    
    /* Mobile responsive styles for clean video player */
    @media screen and (max-width: 768px) {
      .professional-video-player {
        max-width: 100%;
        margin: 0;
      }
      
      .clean-play-button {
        width: 60px;
        height: 60px;
        font-size: 20px;
      }
      
      .video-caption {
        font-size: 12px;
        padding: 6px 12px;
      }
    }
    
    /* Custom video controls styling */
    video::-webkit-media-controls {
      width: 100%;
    }
    
    video::-webkit-media-controls-panel {
      background: rgba(0, 0, 0, 0.3);
      padding: 5px;
    }
    
    /* Show controls more readily */
    video::-webkit-media-controls-panel {
      opacity: 0.5;
      transition: opacity 0.3s ease;
    }
    
    video:hover::-webkit-media-controls-panel,
    video:focus::-webkit-media-controls-panel {
      opacity: 1;
    }
    
    /* Ensure play and mute buttons are white */
    video::-webkit-media-controls-play-button,
    video::-webkit-media-controls-mute-button {
      filter: brightness(2) contrast(2);
      -webkit-filter: brightness(2) contrast(2);
    }
    
    /* Hide time displays but show progress bar */
    video::-webkit-media-controls-current-time-display,
    video::-webkit-media-controls-time-remaining-display,
    video::-webkit-media-controls-fullscreen-button {
      display: none !important;
    }
    
    /* Style the timeline progress bar */
    video::-webkit-media-controls-timeline-container {
      filter: brightness(2) contrast(1.2);
      -webkit-filter: brightness(2) contrast(1.2);
    }
    
    video::-webkit-media-controls-timeline {
      filter: brightness(2) contrast(1.2);
      -webkit-filter: brightness(2) contrast(1.2);
    }
    
    /* Hide volume slider but keep mute button */
    video::-webkit-media-controls-volume-slider-container {
      display: none !important;
    }
    
    /* For Firefox */
    video::-moz-media-controls-panel {
      background: rgba(0, 0, 0, 0.3);
    }
    
    /* Hide time displays in Firefox but show progress bar */
    video::-moz-media-controls-current-time-display,
    video::-moz-media-controls-time-remaining-display {
      display: none !important;
    }
    
    /* Style Firefox progress bar */
    video::-moz-media-controls-progress-bar {
      filter: brightness(2) contrast(1.2);
    }
    
    /* General video element styling */
    video {
      background: #202020;
    }
    
    /* Loading spinner already defined earlier in the CSS */
    
    /* Calendar Section Styles */
    .calendar-section {
      margin: 3rem 0;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border: 1px solid var(--border);
    }

    /* Cal.com Confirmation Section */
    .cal-confirmation-section {
      margin: 2rem 0;
      padding: 2rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border: 1px solid rgba(74, 222, 128, 0.2);
      text-align: center;
    }

    .confirmation-details {
      margin-top: 1.5rem;
    }

    .confirmation-icon {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .confirmation-icon svg {
      color: #4ade80;
      background: rgba(74, 222, 128, 0.1);
      padding: 12px;
      border-radius: 50%;
      width: 72px;
      height: 72px;
    }

    .confirmation-text {
      font-size: 1.1rem;
      color: var(--white);
      line-height: 1.6;
      margin-bottom: 2rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
    }

    .next-steps {
      text-align: left;
      background: rgba(255, 255, 255, 0.02);
      padding: 1.5rem;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      max-width: 400px;
      margin: 0 auto;
    }

    .next-steps h4 {
      color: var(--white);
      margin-bottom: 1rem;
      font-size: 1rem;
      font-weight: 600;
    }

    .next-steps ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .next-steps li {
      color: rgba(255, 255, 255, 0.8);
      padding: 0.5rem 0;
      font-size: 0.95rem;
      line-height: 1.4;
      position: relative;
      padding-left: 1.5rem;
    }

    .next-steps li:before {
      content: '✓';
      position: absolute;
      left: 0;
      color: #4ade80;
      font-weight: bold;
    }
    
    .calendar-section h3 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      color: var(--white);
      text-align: center;
    }
    
    .calendar-subtext {
      text-align: center;
      color: var(--grey);
      margin-bottom: 1.5rem;
      font-size: 0.95rem;
    }
    
    .calendar-buttons {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .calendar-button {
      display: inline-flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem 1.75rem;
      background: var(--secondary-black);
      color: var(--white);
      text-decoration: none;
      border: 1px solid var(--border);
      border-radius: 12px;
      font-weight: 500;
      font-size: 0.95rem;
      transition: all 0.3s ease;
      cursor: pointer;
      font-family: 'General Sans', -apple-system, sans-serif;
      position: relative;
      overflow: hidden;
    }
    
    .calendar-button:before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, transparent 0%, rgba(255, 255, 255, 0.05) 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    .calendar-button:hover:before {
      opacity: 1;
    }
    
    .calendar-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }
    
    .calendar-button svg {
      width: 20px;
      height: 20px;
      flex-shrink: 0;
    }
    
    .google-cal:hover {
      border-color: #4285f4;
      box-shadow: 0 6px 20px rgba(66, 133, 244, 0.3);
    }
    
    .google-cal:hover svg {
      filter: drop-shadow(0 0 4px rgba(66, 133, 244, 0.5));
    }
    
    .outlook-cal:hover {
      border-color: #0078d4;
      box-shadow: 0 6px 20px rgba(0, 120, 212, 0.3);
    }
    
    .outlook-cal:hover svg {
      filter: drop-shadow(0 0 4px rgba(0, 120, 212, 0.5));
    }
    
    .apple-cal:hover {
      border-color: #555555;
      box-shadow: 0 6px 20px rgba(255, 255, 255, 0.1);
    }
    
    .apple-cal:hover svg {
      filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.3));
    }
    
    /* AI Assistant Section */
    .ai-assistant-section {
      margin: 3rem 0;
      padding: 2.5rem;
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.02) 100%);
      border-radius: 12px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .ai-assistant-section::before {
      content: '';
      position: absolute;
      top: -50%;
      right: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.05) 0%, transparent 70%);
      animation: pulse 4s ease-in-out infinite;
    }
    
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.1); opacity: 0.8; }
    }
    
    .ai-assistant-section h3 {
      font-size: 1.5rem;
      margin-bottom: 1rem;
      color: var(--white);
      position: relative;
      z-index: 1;
    }
    
    .ai-description {
      color: var(--grey);
      margin-bottom: 2rem;
      font-size: 1rem;
      line-height: 1.6;
      position: relative;
      z-index: 1;
    }
    
    .ai-discovery-button {
      display: inline-block;
      padding: 1rem 2.5rem;
      background: var(--white);
      color: var(--primary-black);
      text-decoration: none;
      border: 2px solid var(--white);
      border-radius: 0;
      font-weight: 600;
      font-size: 0.95rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      z-index: 1;
      font-family: 'General Sans', -apple-system, sans-serif;
    }
    
    .ai-discovery-button:hover {
      background: transparent;
      color: var(--white);
      transform: translateY(-2px);
      box-shadow: 0 4px 20px rgba(255, 255, 255, 0.2);
    }
    
    /* Cal.com Calendar Section */
    .cal-calendar-section {
      margin: 0.5rem 0 1rem 0;
      text-align: center;
    }
    
    .cal-calendar-section h3 {
      font-size: 1.4rem;
      margin-bottom: 0.5rem;
      color: var(--white);
    }
    
    /* Enhanced confirmation wrapper */
    .enhanced-confirmation {
      width: 100%;
      max-width: 900px;
      margin: 0 auto;
    }
    
    /* Confirmation page-specific styles for seamless integration */
    .calendly-embed-container.confirmation-page {
      height: auto !important;
      min-height: 1200px !important;
      overflow: visible !important;
      background: transparent !important;
      border: none !important;
      border-radius: 0 !important;
      box-shadow: none !important;
      padding: 0 !important;
      margin: 0 !important;
    }
    
    /* Professional container setup */
    .calendar-container {
      min-height: 100vh;
      height: auto;
      position: relative;
    }
    
    .calendly-embed-container.confirmation-page .calendly-inline-widget {
      width: 100%;
      height: auto;
      position: relative;
    }
    
    /* Ensure iframe can expand naturally */
    #my-cal-inline-30min.iframe-container {
      width: 100%;
      position: relative;
      overflow: visible;
    }
    
    /* Remove all scroll indicators on confirmation page */
    .calendly-embed-container.confirmation-page::before,
    .calendly-embed-container.confirmation-page::after {
      display: none !important;
      content: none !important;
    }
    
    /* Remove scrollbar styling on confirmation */
    .calendly-embed-container.confirmation-page::-webkit-scrollbar {
      display: none !important;
    }
    
    .calendly-embed-container.confirmation-page .calendly-inline-widget,
    .calendly-embed-container.confirmation-page #my-cal-inline-30min {
      height: auto !important;
      min-height: 600px !important;
      overflow: visible !important;
    }
    
    /* Simple confirmation page solution */
    .calendly-embed-container.confirmation-page {
      width: 100%;
      height: auto;
      min-height: 100vh;
      position: relative;
      background: transparent;
      border: none;
      overflow: visible;
    }
    
    /* Desktop/Laptop: Dynamic height based on content */
    @media screen and (min-width: 769px) {
      .calendly-embed-container.confirmation-page iframe {
        width: 100%;
        height: auto;
        min-height: 600px; /* Minimum while loading */
        border: none;
        display: block;
      }
    }
    
    /* Mobile: Fixed height to prevent excess space */
    @media screen and (max-width: 768px) {
      .calendly-embed-container.confirmation-page iframe {
        width: 100%;
        height: 1000px !important;
        min-height: 1000px !important;
        max-height: 1000px !important;
        border: none;
      }
    }
    
    /* iPad specific adjustment */
    @media screen and (min-width: 769px) and (max-width: 1024px) {
      .calendly-embed-container.confirmation-page iframe {
        height: auto;
        min-height: 600px; /* Minimum while loading */
      }
    }
    
    /* Mobile Responsive Styles */
    @media screen and (max-width: 768px) {
      /* Video wrapper already has 75% padding */
      
      .calendar-buttons {
        flex-direction: column;
        gap: 0.75rem;
      }
      
      .calendar-button {
        width: 100%;
        justify-content: center;
      }
      
      .ai-assistant-section {
        padding: 2rem 1.5rem;
      }
      
      .ai-description br {
        display: none;
      }
      
    }
    
    
    /* Tablet-specific styles (iPad Mini, etc) */
    @media screen and (min-width: 480px) and (max-width: 768px) {
      .calendar-header {
        padding: 2rem 0 1rem 0;
      }
      
      .calendar-header h1 {
        font-size: 2rem;
      }
      
      .calendar-container {
        padding: 0 1rem 2rem 1rem;
      }
      
      .personalized-message {
        padding: 0.75rem 0 1.5rem 0;
      }
      
      .personalized-text {
        font-size: 1rem;
      }
      
      .calendar-divider {
        width: 80px;
        margin-bottom: 0.375rem;
      }
      
      .progress-steps {
        flex-direction: column;
        gap: 0.5rem;
      }
      
      .step-divider {
        width: 35px; /* Tablet-optimized size */
        height: 1px;
        background: var(--grey); /* Match subtext color */
      }
      
      /* Scrollable container for tablets - same as mobile */
      .calendly-embed-container {
        height: 800px; /* Fixed viewport height */
        padding: 0;
        margin: 0;
        overflow-y: auto;
        overflow-x: hidden;
        position: relative;
        background: rgba(15, 15, 15, 0.5);
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
        /* Container boundaries */
        border: 1px solid rgba(180, 180, 180, 0.15);
        border-radius: 8px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1), 
                    inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      
      /* Scroll indicators for tablets */
      .calendly-embed-container::after {
        content: '';
        position: sticky;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(to bottom, transparent, rgba(15, 15, 15, 0.95));
        pointer-events: none;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s ease;
        border-radius: 0 0 8px 8px;
      }
      
      .calendly-embed-container::before {
        content: '';
        position: sticky;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(to top, transparent, rgba(15, 15, 15, 0.95));
        pointer-events: none;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s ease;
        border-radius: 8px 8px 0 0;
      }
      
      .calendly-embed-container.has-scroll-bottom::after {
        opacity: 1;
      }
      
      .calendly-embed-container.has-scroll-top::before {
        opacity: 1;
      }
      
      /* Styled scrollbar for tablets */
      .calendly-embed-container::-webkit-scrollbar {
        width: 6px;
        background: transparent;
      }
      
      .calendly-embed-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 3px;
      }
      
      .calendly-embed-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 3px;
        transition: background 0.2s ease;
      }
      
      .calendly-embed-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }
      
      .calendly-embed-container {
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.05);
      }
      
      .calendly-inline-widget {
        height: auto;
        position: relative;
        overflow: visible;
      }
      
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        width: 100% !important;
        height: 2000px !important; /* Increased to accommodate full day schedules */
        border: 0 !important;
        display: block;
        position: relative;
        border-radius: 8px;
      }
      
      .loading-container {
        height: 580px;
      }
      
      #my-cal-inline-30min {
        height: auto;
        overflow: visible;
        position: relative;
      }
    }
    
    @media screen and (max-width: 479px) {
      /* Ensure page scrolling on mobile */
      html, body {
        overflow-x: hidden;
        overflow-y: auto;
        height: auto;
        -webkit-overflow-scrolling: touch;
      }
      
      .page-wrapper {
        min-height: 100vh;
        height: auto;
        overflow: visible;
      }
      
      /* Reduce vertical spacing for more calendar room */
      .calendar-header {
        padding: 1.5rem 1.25rem 0.75rem 1.25rem; /* Less top/bottom padding */
      }
      
      .calendar-header h1 {
        font-size: 1.8rem;
      }
      
      .progress-indicator {
        padding: 0.5rem 0; /* Reduced vertical padding */
      }
      
      /* Smaller progress elements on mobile */
      .progress-steps {
        gap: 0.5rem; /* Tighter spacing */
        align-items: center;
        flex-direction: row; /* Keep horizontal on mobile */
      }
      
      .step-circle {
        width: 20px; /* Reduced from 24px */
        height: 20px;
        font-size: 0.7rem; /* Smaller font */
      }
      
      .step-text {
        font-size: 0.8rem; /* Reduced from 0.9rem */
      }
      
      .step-divider {
        width: 30px; /* Medium responsive size */
        height: 1px;
        background: var(--grey); /* Match subtext color */
      }
      
      .calendar-container {
        padding: 0 1rem 2rem 1rem; /* Add horizontal padding for proper spacing */
      }
      
      .personalized-message {
        padding: 0.5rem 1.25rem 1rem 1.25rem; /* Reduced vertical padding */
      }
      
      .personalized-text {
        font-size: 0.95rem;
      }
      
      .calendar-divider {
        width: 60px;
      }
      
      /* Refined scrollable container solution */
      .calendly-embed-container {
        height: 800px; /* Reasonable viewport height */
        padding: 0;
        margin: 0; /* Remove margin to prevent alignment issues */
        overflow-y: auto; /* Enable vertical scrolling */
        overflow-x: hidden;
        position: relative;
        background: rgba(15, 15, 15, 0.5); /* Subtle background */
        -webkit-overflow-scrolling: touch; /* Smooth iOS scrolling */
        scroll-behavior: smooth;
        /* Define container boundaries */
        border: 1px solid rgba(180, 180, 180, 0.15);
        border-radius: 8px;
        box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1), 
                    inset 0 1px 0 rgba(255, 255, 255, 0.05);
      }
      
      /* Bottom scroll indicator gradient */
      .calendly-embed-container::after {
        content: '';
        position: sticky;
        bottom: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(to bottom, transparent, rgba(15, 15, 15, 0.95));
        pointer-events: none;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s ease;
        border-radius: 0 0 8px 8px;
      }
      
      /* Top scroll indicator gradient */
      .calendly-embed-container::before {
        content: '';
        position: sticky;
        top: 0;
        left: 0;
        right: 0;
        height: 60px;
        background: linear-gradient(to top, transparent, rgba(15, 15, 15, 0.95));
        pointer-events: none;
        z-index: 10;
        opacity: 0;
        transition: opacity 0.3s ease;
        border-radius: 8px 8px 0 0;
      }
      
      /* Show gradients based on scroll position */
      .calendly-embed-container.has-scroll-bottom::after {
        opacity: 1;
      }
      
      .calendly-embed-container.has-scroll-top::before {
        opacity: 1;
      }
      
      /* End of content indicator */
      .scroll-end-indicator {
        display: none;
        text-align: center;
        padding: 1rem;
        color: rgba(180, 180, 180, 0.6);
        font-size: 0.85rem;
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to bottom, transparent, rgba(15, 15, 15, 0.9));
        pointer-events: none;
      }
      
      .calendly-embed-container.at-bottom .scroll-end-indicator {
        display: block;
      }
      
      .calendly-inline-widget {
        height: auto;
        position: relative;
        overflow: visible;
      }
      
      /* Keep iframe tall to show all content */
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        width: 100% !important;
        height: 1600px !important; /* Increased to accommodate full day schedules */
        border: 0 !important;
        display: block;
        position: relative;
        border-radius: 8px; /* Match container radius */
      }
      
      #my-cal-inline-30min {
        height: auto;
        overflow: visible;
        position: relative;
      }
      
      .loading-container {
        height: 600px;
      }
      
      /* Styled scrollbar for better UX */
      .calendly-embed-container::-webkit-scrollbar {
        width: 6px;
        background: transparent;
      }
      
      .calendly-embed-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 3px;
      }
      
      .calendly-embed-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 3px;
        transition: background 0.2s ease;
      }
      
      .calendly-embed-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }
      
      /* Firefox scrollbar styling */
      .calendly-embed-container {
        scrollbar-width: thin;
        scrollbar-color: rgba(255, 255, 255, 0.3) rgba(255, 255, 255, 0.05);
      }
      
      /* Confirmation page mobile styles */
      .confirmation-container {
        padding: 3rem 1.25rem;
      }
      
      .confirmation-heading {
        font-size: 2rem;
      }
      
      .confirmation-text {
        font-size: 1.1rem;
      }
      
      .confirmation-message {
        font-size: 1rem;
      }
      
      .confirmation-button {
        font-size: 12px;
        padding: 0.875rem 2.5rem;
      }
    }
    
    
    /* Desktop styles */
    @media screen and (min-width: 769px) {
      /* Fix Cal.com embed height on desktop - show full content */
      #my-cal-inline-30min {
        min-height: 700px;
        height: auto;
      }
      
      .calendly-inline-widget {
        min-height: 700px;
        height: auto;
      }
      
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        height: 700px !important; /* Taller height for desktop to show full calendar */
        min-height: 700px !important;
      }
      
      /* Ensure scrollable container doesn't add scrollbars on desktop */
      .calendly-embed-container {
        height: auto !important;
        overflow: visible !important;
      }
      
      /* Reduce spacing for single-screen view */
      .confirmation-video {
        margin: 2rem 0;
      }
      
      .ai-assistant-section {
        margin: 2rem 0;
      }
      
      .cal-calendar-section {
        margin: 1.5rem 0 1rem 0;
      }
    }
    
    /* Laptop screens (smaller desktops) */
    @media screen and (min-width: 1024px) and (max-width: 1440px) {
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        height: 650px !important; /* Slightly shorter for laptops */
        min-height: 650px !important;
      }
      
      #my-cal-inline-30min {
        min-height: 650px;
      }
      
      .calendly-inline-widget {
        min-height: 650px;
      }
    }
    
    /* Large desktop screens */
    @media screen and (min-width: 1441px) {
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        height: 750px !important; /* Even taller for large screens */
        min-height: 750px !important;
      }
      
      #my-cal-inline-30min {
        min-height: 750px;
      }
      
      .calendly-inline-widget {
        min-height: 750px;
      }
    }
    
    /* For very small screens (iPhone SE, etc) */
    @media screen and (max-width: 375px) {
      .calendly-inline-widget iframe,
      #my-cal-inline-30min iframe {
        height: 1100px !important; /* Slightly less for smaller screens */
      }
      
      /* Restored progress indicator text */
      .step-text {
        font-size: 0.8rem;
        color: var(--grey);
      }
      
      .step-divider {
        width: 25px; /* Visible but mobile-optimized */
        height: 1px;
        background: var(--grey); /* Match subtext color */
      }
      
      .progress-steps {
        gap: 0.25rem; /* Minimal spacing */
      }
    }
    
    /* Mobile confirmation page overrides */
    @media screen and (max-width: 768px) {
      .calendly-embed-container.confirmation-page {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        border-radius: 0 !important;
      }
      
      .calendly-embed-container.confirmation-page::before,
      .calendly-embed-container.confirmation-page::after {
        display: none !important;
      }
      
      .calendly-embed-container.confirmation-page iframe {
        border-radius: 0 !important;
      }
    }
    
    /* Larger screens optimization */
    @media screen and (min-width: 1280px) {
      .calendly-embed-container {
        max-width: 100%;
      }
      
      .calendar-container {
        max-width: 1400px;
      }
    }
    
    /* AI Discovery Section Styles - Premium Dark Design */
    .ai-discovery-section {
      padding: 3rem 2rem;
      background-color: var(--primary-black);
      position: relative;
      overflow: hidden;
      display: block;
      visibility: visible;
      opacity: 1;
      min-height: 200px;
    }
    
    
    .ai-discovery-container {
      max-width: 1000px;
      margin: 0 auto;
      position: relative;
      z-index: 1;
    }
    
    .ai-discovery-heading {
      font-size: 2rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.75rem;
      line-height: 1.2;
      letter-spacing: -0.02em;
      text-align: center;
      display: block;
      visibility: visible;
    }
    
    .ai-discovery-subheading {
      font-size: 1.125rem;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 2.5rem;
      line-height: 1.4;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      text-align: center;
    }
    
    
    /* Step Indicators for Visual Hierarchy */
    .step-indicator {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      margin-bottom: 1rem;
      justify-content: center;
    }
    
    .step-number-badge {
      width: 32px;
      height: 32px;
      background: transparent;
      border: 1px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.8);
      flex-shrink: 0;
    }
    
    .step-indicator h2,
    .step-indicator h3 {
      margin: 0;
      font-size: 1.375rem !important;
      font-weight: 600;
      color: var(--white);
      letter-spacing: -0.01em;
    }
    
    /* Recommended Label */
    .recommended-label {
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.15em;
      color: rgba(255, 255, 255, 0.5);
      margin-bottom: 1rem;
      text-align: center;
    }
    
    /* MAXIMUM SPECIFICITY: Phone Button - Bulletproof White Button */
    body .phone-form-container .ai-discovery-cta,
    body .phone-form-container button.ai-discovery-cta,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta,
    body .phone-form-container #submitPhoneButton,
    body button#submitPhoneButton.ai-discovery-cta,
    body #submitPhoneButton {
      display: inline-block !important;
      visibility: visible !important;
      margin: 1.5rem auto 0 !important;
      padding: 1.25rem 2rem !important;
      background: #ffffff !important;
      background-color: #ffffff !important;
      color: #1a1a1a !important;
      text-decoration: none !important;
      border: 2px solid rgba(255, 255, 255, 0.3) !important;
      border-radius: 12px !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      font-family: 'General Sans', -apple-system, sans-serif !important;
      text-transform: none !important;
      letter-spacing: -0.01em !important;
      cursor: pointer !important;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1) !important;
      opacity: 1 !important;
      transform: translateY(0) scale(1) !important;
      position: relative !important;
      text-align: center !important;
      backdrop-filter: none !important;
      width: auto !important;
      min-width: 280px !important;
      max-width: 400px !important;
      outline: none !important;
      -webkit-appearance: none !important;
      appearance: none !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1) !important;
      line-height: 1 !important;
      white-space: nowrap !important;
      overflow: visible !important;
      outline: none !important;
      box-shadow: none !important;
      backdrop-filter: none !important;
      min-width: auto !important;
    }
    
    /* MAXIMUM SPECIFICITY: Phone Button States */
    body .phone-form-container .ai-discovery-cta:hover,
    body .phone-form-container button.ai-discovery-cta:hover,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta:hover,
    body .phone-form-container .ai-discovery-cta:focus,
    body .phone-form-container button.ai-discovery-cta:focus,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta:focus,
    body .phone-form-container .ai-discovery-cta:active,
    body .phone-form-container button.ai-discovery-cta:active,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta:active,
    body #submitPhoneButton:hover,
    body #submitPhoneButton:focus,
    body #submitPhoneButton:active {
      color: #1a1a1a !important;
      background: #ffffff !important;
      background-color: #ffffff !important;
      border-color: rgba(255, 255, 255, 0.5) !important;
      transform: translateY(-1px) scale(1) !important;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15) !important;
      outline: none !important;
      -webkit-text-stroke: none !important;
      text-stroke: none !important;
    }
    
    /* Progressive Disclosure States */
    .ai-discovery-cta.transitioning {
      transform: translateY(-10px) scale(0.9) !important;
      opacity: 0.7 !important;
      pointer-events: none !important;
    }
    
    .ai-discovery-cta.hidden-smooth {
      transform: translateY(-20px) scale(0.8) !important;
      opacity: 0 !important;
      pointer-events: none !important;
    }
    
    .ai-discovery-cta .button-content {
      display: flex !important;
      flex-direction: column !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 3px !important;
      color: inherit !important;
      width: 100% !important;
      height: auto !important;
    }

    /* MAXIMUM SPECIFICITY: Phone Button Text - Force Dark Text */
    body .phone-form-container .ai-discovery-cta .button-content span,
    body .phone-form-container button.ai-discovery-cta .button-content span,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta .button-content span,
    body .phone-form-container .ai-discovery-cta span,
    body .phone-form-container button.ai-discovery-cta span,
    body .phone-form-container #submitPhoneButton.ai-discovery-cta span,
    body .phone-form-container #submitPhoneButton span,
    body .phone-form-container #submitPhoneButton .button-content span,
    body #submitPhoneButton span,
    body #submitPhoneButton .button-content span,
    body button#submitPhoneButton span,
    html body .phone-form-container #submitPhoneButton,
    html body #submitPhoneButton,
    html body button#submitPhoneButton {
      color: #1a1a1a !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      text-transform: none !important;
      letter-spacing: -0.01em !important;
      opacity: 1 !important;
      display: inline-block !important;
      visibility: visible !important;
      text-shadow: none !important;
      white-space: nowrap !important;
      line-height: 1.2 !important;
      -webkit-text-stroke: 0px transparent !important;
      text-stroke: 0px transparent !important;
      outline: none !important;
      user-select: none !important;
      -webkit-user-select: none !important;
      background: #ffffff !important;
      background-color: #ffffff !important;
      border: 1px solid rgba(255, 255, 255, 0.3) !important;
      text-decoration: none !important;
    }
    
    /* Hide underline effect for professional button */
    .ai-discovery-cta .button-underline {
      display: none !important;
    }
    
    .ai-discovery-cta .phone-icon {
      display: none !important; /* Hide icon for clean main site aesthetic */
    }
    
    /* Supporting text styling with proper spacing */
    .ai-supporting-text {
      color: var(--grey);
      font-size: 0.95rem;
      line-height: 1.6;
      margin: 2rem 0 3rem 0;
      padding: 1.5rem;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      border-left: 3px solid var(--primary-blue);
      position: relative;
    }
    
    .ai-supporting-text strong {
      color: var(--white);
      font-weight: 600;
    }
    
    .button-text-block.bigger {
      height: 1.4rem;
    }
    
    /* Professional Phone Form - Progressive Disclosure */
    /* AI CTA Container for In-Place Transformation */
    .ai-cta-container {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 80px;
      width: 100%;
      max-width: 420px;
      margin: 1.5rem auto;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .phone-form-container {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      padding: 2rem;
      text-align: center;
      opacity: 0;
      transform: translateY(20px) scale(0.95);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      visibility: hidden;
      pointer-events: none;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      backdrop-filter: blur(10px);
      z-index: 2;
    }
    
    .phone-form-container.active {
      opacity: 1;
      transform: translateY(0) scale(1);
      visibility: visible;
      pointer-events: auto;
    }
    
    .phone-form-container.entering {
      opacity: 0.5;
      transform: translateY(10px) scale(0.98);
    }
    
    /* Enhanced Phone Form Header */
    .phone-form-header {
      margin-bottom: 2rem;
      text-align: center;
    }
    
    .phone-form-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.5rem;
      line-height: 1.3;
      letter-spacing: -0.02em;
    }
    
    .phone-form-subtitle {
      font-size: 0.95rem;
      color: rgba(255, 255, 255, 0.7);
      line-height: 1.5;
      margin-bottom: 0;
      max-width: 320px;
      margin-left: auto;
      margin-right: auto;
    }
    
    /* Enhanced Phone Input Wrapper */
    .phone-input-wrapper {
      position: relative;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }
    
    .enhanced-phone-wrapper {
      margin-bottom: 2rem;
    }
    
    .phone-input-label {
      display: block;
      font-size: 0.9rem;
      font-weight: 500;
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 0.5rem;
      text-align: left;
    }
    
    .phone-input-container {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .phone-input-hint {
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.5);
      margin-top: 0.5rem;
      text-align: center;
      font-style: italic;
    }
    
    .phone-input {
      width: 100%;
      padding: 1.4rem 1.2rem 1.4rem 3.5rem;
      background: rgba(255, 255, 255, 0.04) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      border-radius: 12px !important;
      color: #ffffff !important;
      font-size: 16px !important;
      font-family: 'General Sans', -apple-system, sans-serif !important;
      font-weight: 400;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      outline: none !important;
      box-sizing: border-box;
      text-align: center;
      backdrop-filter: blur(5px);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
    }
    
    .phone-input:focus {
      border-color: rgba(255, 255, 255, 0.4) !important;
      background: rgba(255, 255, 255, 0.06) !important;
      box-shadow: 
        inset 0 1px 3px rgba(0, 0, 0, 0.1),
        0 0 0 3px rgba(255, 255, 255, 0.1),
        0 2px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px) scale(1.01);
    }
    
    /* Professional Input Validation States */
    .phone-input-wrapper.valid .phone-input {
      border-color: rgba(74, 222, 128, 0.6) !important;
      background: rgba(74, 222, 128, 0.05) !important;
      box-shadow: 
        inset 0 1px 3px rgba(0, 0, 0, 0.1),
        0 0 0 3px rgba(74, 222, 128, 0.15);
    }
    
    .phone-input-wrapper.valid .phone-input-icon {
      color: #4ade80 !important;
    }
    
    .phone-input-wrapper.error .phone-input {
      border-color: rgba(239, 68, 68, 0.6) !important;
      background: rgba(239, 68, 68, 0.05) !important;
      box-shadow: 
        inset 0 1px 3px rgba(0, 0, 0, 0.1),
        0 0 0 3px rgba(239, 68, 68, 0.15);
    }
    
    .phone-input-wrapper.error .phone-input-icon {
      color: #ef4444 !important;
    }
    
    /* Professional input states with micro-animations */
    .phone-input-wrapper.valid {
      animation: validPulse 0.3s ease;
    }
    
    .phone-input-wrapper.error {
      animation: errorShake 0.3s ease;
    }
    
    @keyframes validPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.02); }
      100% { transform: scale(1); }
    }
    
    @keyframes errorShake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }

    /* ============================================
       PROFESSIONAL POLISH & MICRO-INTERACTIONS
       ============================================ */

    /* Enhanced Button Hover States */
    .btn, .cta-button, .ai-cta-button, .phone-submit-btn, .back-button {
      position: relative;
      overflow: hidden;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
    }

    .btn::before, .cta-button::before, .ai-cta-button::before, .phone-submit-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      transition: left 0.5s ease;
      z-index: 1;
    }

    .btn:hover::before, .cta-button:hover::before, .ai-cta-button:hover::before, .phone-submit-btn:hover::before {
      left: 100%;
    }

    /* Professional Button Hover Effects */
    .btn:hover, .cta-button:hover, .ai-cta-button:hover, .phone-submit-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 8px 25px rgba(255, 255, 255, 0.15);
    }

    .btn:active, .cta-button:active, .ai-cta-button:active, .phone-submit-btn:active {
      transform: translateY(0px);
      transition: transform 0.1s ease;
    }

    /* Enhanced Focus States for Accessibility */
    .btn:focus-visible, .cta-button:focus-visible, .ai-cta-button:focus-visible, .phone-input:focus-visible {
      outline: 2px solid rgba(255, 255, 255, 0.6);
      outline-offset: 2px;
      box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.1);
    }

    /* Professional Loading States */
    .loading-state {
      position: relative;
      color: transparent !important;
      pointer-events: none;
    }

    .loading-state::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20px;
      height: 20px;
      margin: -10px 0 0 -10px;
      border: 2px solid rgba(255, 255, 255, 0.3);
      border-top: 2px solid white;
      border-radius: 50%;
      animation: loadingSpin 1s linear infinite;
    }

    @keyframes loadingSpin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Subtle Animations for State Changes */
    .confirmation-section, .ai-phone-form-container, .calendar-embed-container {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Professional Typography Enhancement */
    h1, h2, h3, .section-title {
      font-weight: 600;
      letter-spacing: -0.02em;
      line-height: 1.2;
    }

    /* Enhanced Card Hover Effects */
    .confirmation-section, .calendar-section {
      transition: all 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .confirmation-section:hover, .calendar-section:hover {
      border-color: rgba(255, 255, 255, 0.2);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      transform: translateY(-2px);
    }

    /* Professional Form Enhancements */
    .phone-input-wrapper {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .phone-input:focus {
      transform: scale(1.02);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    /* Enhanced Video Player Professional Touch */
    .professional-video-container {
      position: relative;
      transition: all 0.3s ease;
    }


    /* Duplicate definition removed - consolidated above */

    /* Smooth Scrolling Enhancement */
    html {
      scroll-behavior: smooth;
    }

    /* Professional Mobile Optimizations */
    @media (max-width: 768px) {
      .btn:hover, .cta-button:hover, .ai-cta-button:hover {
        transform: none;
        box-shadow: none;
      }
      
      .confirmation-section:hover, .calendar-section:hover {
        transform: none;
      }
      
      .professional-video-container:hover {
        transform: none;
      }
    }

    /* Enhanced Status Indicators */
    .status-indicator {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .status-indicator.success {
      background: rgba(34, 197, 94, 0.1);
      color: #22c55e;
      border: 1px solid rgba(34, 197, 94, 0.2);
    }

    .status-indicator.processing {
      background: rgba(59, 130, 246, 0.1);
      color: #3b82f6;
      border: 1px solid rgba(59, 130, 246, 0.2);
    }

    /* Professional Skeleton Loaders */
    .skeleton {
      background: linear-gradient(90deg, 
        rgba(255, 255, 255, 0.1) 0%, 
        rgba(255, 255, 255, 0.2) 50%, 
        rgba(255, 255, 255, 0.1) 100%);
      background-size: 200% 100%;
      animation: skeletonLoading 1.5s ease-in-out infinite;
      border-radius: 4px;
    }

    @keyframes skeletonLoading {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }
    
    .phone-input::placeholder {
      color: rgba(255, 255, 255, 0.6) !important;
      font-weight: 400;
      text-align: center;
    }
    
    .phone-input-icon {
      position: absolute;
      left: 1.2rem;
      top: 50%;
      transform: translateY(-50%);
      color: rgba(255, 255, 255, 0.6) !important;
      width: 18px;
      height: 18px;
      stroke-width: 2;
      transition: color 0.3s ease;
      z-index: 2;
      pointer-events: none;
    }
    
    /* Professional AI Discovery CTA Button */
    .professional-ai-cta {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 0.75rem;
      padding: 1rem 2rem;
      background: #ffffff;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      color: var(--primary-black) !important;
      font-size: 1rem;
      font-weight: 600;
      font-family: 'General Sans', -apple-system, sans-serif;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      text-decoration: none;
      backdrop-filter: blur(8px);
      margin: 1.5rem auto;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
      text-shadow: none;
      min-width: 280px;
    }
    
    
    .professional-ai-cta:hover {
      background: #ffffff;
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      border-color: rgba(255, 255, 255, 0.4);
    }
    
    
    .professional-ai-cta:active {
      transform: translateY(0px);
      transition: transform 0.1s ease;
    }
    
    .professional-ai-cta.fading-out {
      opacity: 0;
      transform: scale(0.95);
      pointer-events: none;
    }
    
    .professional-ai-cta .button-content {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      position: relative;
      z-index: 1;
    }
    
    .professional-ai-cta .button-text {
      font-weight: 600;
      letter-spacing: -0.01em;
      color: var(--primary-black) !important;
      text-shadow: none !important;
      background: transparent !important;
      -webkit-text-stroke: 0 !important;
    }
    
    .professional-ai-cta .button-arrow {
      width: 1.1rem;
      height: 1.1rem;
      transition: transform 0.3s ease;
    }
    
    .professional-ai-cta:hover .button-arrow {
      transform: translateX(2px);
    }

    /* Smart Phone CTA with Inline Transformation - NUCLEAR PRIORITY */
    .smart-phone-cta {
      position: relative;
      height: 64px;
      width: 100%;
      max-width: 520px;
      margin: 0 auto;
      overflow: hidden;
      background: #ffffff !important;
      background-color: #ffffff !important;
      border: 2px solid #e5e5e5 !important;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }

    .smart-phone-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15) !important;
      background: #ffffff !important;
      background-color: #ffffff !important;
    }

    /* Button and Phone States */
    .button-state,
    .phone-state {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 0 1.5rem;
      box-sizing: border-box;
    }

    /* Initial Button State - MAXIMUM VISIBILITY */
    .button-state {
      background: #ffffff !important;
      background-color: #ffffff !important;
      transform: translateX(0);
      z-index: 2;
    }

    .button-state .button-text {
      font-weight: 600 !important;
      font-size: 1rem !important;
      color: #1a1a1a !important;
      margin-right: 0.75rem;
      white-space: nowrap;
      text-shadow: none !important;
      -webkit-text-stroke: 0 !important;
      opacity: 1 !important;
      visibility: visible !important;
    }

    .button-state .button-arrow {
      width: 1.1rem;
      height: 1.1rem;
      color: #1a1a1a !important;
      fill: #1a1a1a !important;
      stroke: #1a1a1a !important;
      transition: transform 0.3s ease;
      opacity: 1 !important;
    }

    /* Phone Input State */
    .phone-state {
      background: #ffffff;
      transform: translateX(100%);
      z-index: 1;
      gap: 1rem;
    }

    .phone-state.active {
      transform: translateX(0);
      z-index: 3;
    }

    .button-state.sliding-out {
      transform: translateX(-100%);
    }

    /* Phone Icon */
    .phone-icon {
      flex-shrink: 0;
      width: 24px;
      height: 24px;
      color: var(--primary-black);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .phone-icon svg {
      width: 100%;
      height: 100%;
    }

    /* Digit Input Form */
    .digit-input-form {
      display: flex;
      align-items: center;
      gap: 1rem;
      flex: 1;
    }

    .digit-input-group {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      flex: 1;
    }

    /* Format Characters */
    .format-char {
      font-weight: 600;
      color: var(--primary-black);
      font-size: 1rem;
      user-select: none;
    }

    /* Individual Digit Boxes */
    .digit-box {
      width: 2.8rem;
      height: 2.8rem;
      text-align: center;
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--primary-black);
      background: rgba(0, 0, 0, 0.03);
      border: 1px solid rgba(0, 0, 0, 0.1);
      border-radius: 8px;
      transition: all 0.2s ease;
      outline: none;
      font-family: 'General Sans', -apple-system, sans-serif;
    }

    .digit-box:focus {
      background: rgba(37, 99, 235, 0.05);
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
      transform: scale(1.05);
    }

    .digit-box.filled {
      background: rgba(74, 222, 128, 0.05);
      border-color: #10b981;
    }

    .digit-box.error {
      background: rgba(239, 68, 68, 0.05);
      border-color: #ef4444;
      animation: shake 0.3s ease;
    }

    /* Confirm Button */
    .confirm-btn {
      flex-shrink: 0;
      padding: 0.75rem 1.5rem;
      background: #2563eb;
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'General Sans', -apple-system, sans-serif;
    }

    .confirm-btn:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
    }

    .confirm-btn:disabled {
      background: rgba(0, 0, 0, 0.1);
      color: rgba(0, 0, 0, 0.4);
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* Animations */
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      75% { transform: translateX(2px); }
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
      .smart-phone-cta {
        max-width: 100%;
        height: 60px;
      }
      
      .digit-box {
        width: 2.4rem;
        height: 2.4rem;
        font-size: 1rem;
      }
      
      .format-char {
        font-size: 0.9rem;
      }
      
      .confirm-btn {
        padding: 0.6rem 1.2rem;
        font-size: 0.85rem;
      }
    }

    /* APPLE-STYLE BUTTON - ABSOLUTE POSITIONED */
    html body .ai-cta-container button.emergency-phone-button,
    html body button.emergency-phone-button,
    html body .emergency-phone-button,
    body .emergency-phone-button {
      /* Reset and rebuild for absolute positioning */
      all: initial !important;
      
      /* Absolute positioning within container */
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      right: 0 !important;
      bottom: 0 !important;
      width: 100% !important;
      height: 100% !important;
      margin: 0 !important;
      padding: 0 !important;
      box-sizing: border-box !important;
      
      /* SOPHISTICATED BACKGROUND - matches site design */
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      border-radius: 8px !important;
      
      /* Sophisticated typography */
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      font-style: normal !important;
      line-height: 60px !important;
      color: #1f2937 !important;
      text-align: center !important;
      text-decoration: none !important;
      text-transform: none !important;
      letter-spacing: -0.01em !important;
      white-space: nowrap !important;
      
      /* Apple-style transitions */
      cursor: pointer !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      
      /* Default visible state */
      opacity: 1 !important;
      visibility: visible !important;
      z-index: 2 !important;
      transform: translateY(0) scale(1) !important;
      pointer-events: auto !important;
      
      /* Sophisticated shadow */
      outline: none !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1) !important;
      -webkit-appearance: none !important;
      appearance: none !important;
      
      /* Remove any potential conflicts */
      text-shadow: none !important;
      -webkit-text-stroke: none !important;
      filter: none !important;
      mask: none !important;
      -webkit-mask: none !important;
    }
    
    /* Apple-style button fade out is handled by .hidden class in the main system above */
    
    /* Sophisticated hover - matches site aesthetic */
    html body .ai-cta-container button.emergency-phone-button:hover,
    html body button.emergency-phone-button:hover,
    html body .emergency-phone-button:hover,
    body .emergency-phone-button:hover,
    .emergency-phone-button:hover {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
      color: #111827 !important;
      transform: translateY(-2px) !important;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* Sophisticated active state */
    html body .ai-cta-container button.emergency-phone-button:active,
    html body button.emergency-phone-button:active,
    html body .emergency-phone-button:active,
    body .emergency-phone-button:active,
    .emergency-phone-button:active {
      background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%) !important;
      border-color: rgba(255, 255, 255, 0.2) !important;
      color: #111827 !important;
      transform: translateY(0) !important;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Focus state for accessibility */
    .emergency-phone-button:focus {
      outline: 2px solid #93c5fd !important;
      outline-offset: 2px !important;
    }
    
    /* VERCEL-STYLE CLEAN PHONE COMPONENT */
    .phone-component-container {
      position: relative !important;
      width: 100% !important;
      max-width: 400px !important;
      height: 80px !important; /* Accommodate input + status message */
      margin: 2rem auto !important;
    }
    
    /* Shared transition for all elements */
    .transition-element {
      position: absolute !important;
      top: 0 !important;
      left: 0 !important;
      width: 100% !important;
      transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out !important;
    }
    
    /* Visible state */
    .fade-in {
      opacity: 1 !important;
      transform: translateY(0) !important;
      pointer-events: auto !important;
    }
    
    /* Hidden state */
    .fade-out {
      opacity: 0 !important;
      transform: translateY(5px) !important;
      pointer-events: none !important;
    }
    
    /* PROFESSIONAL BUTTON - MATCHES YOUR SITE DESIGN */
    .cta-button {
      width: 100% !important;
      height: 48px !important;
      padding: 0 24px !important;
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      border-radius: 8px !important;
      color: #1f2937 !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      cursor: pointer !important;
      transition: all 0.2s ease-in-out !important;
      display: flex !important;
      align-items: center !important;
      justify-content: center !important;
      gap: 10px !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1) !important;
      outline: none !important;
      letter-spacing: -0.01em !important;
    }
    
    .cta-button:hover {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* ULTRA-NUCLEAR OVERRIDES - ELIMINATE BLACK SQUARES/BARS IN CTA BUTTON */
    /* Maximum specificity overrides */
    .cta-button,
    .cta-button *,
    .cta-button span,
    .cta-button svg,
    .cta-button path,
    .phone-icon,
    .phone-icon * {
      /* ELIMINATE TEXT STROKE ISSUES */
      text-shadow: none !important;
      -webkit-text-stroke: 0 !important;
      -moz-text-stroke: 0 !important;
      text-stroke: 0 !important;
      -webkit-text-stroke-width: 0 !important;
      -webkit-text-stroke-color: transparent !important;
      
      /* FORCE PROPER FONT RENDERING */
      font-smooth: always !important;
      -webkit-font-smoothing: antialiased !important;
      -moz-osx-font-smoothing: grayscale !important;
      text-rendering: optimizeLegibility !important;
      
      /* ELIMINATE WEIRD APPEARANCE ISSUES */
      -webkit-appearance: none !important;
      -moz-appearance: none !important;
      appearance: none !important;
      
      /* FORCE VISIBILITY */
      opacity: 1 !important;
      visibility: visible !important;
      display: inherit !important;
      
      /* PREVENT BACKGROUND BLEEDING */
      background-clip: padding-box !important;
      -webkit-background-clip: padding-box !important;
      
      /* FORCE PROPER COLORS */
      color: inherit !important;
      fill: currentColor !important;
      stroke: currentColor !important;
    }
    
    /* ULTRA-SPECIFIC OVERRIDES - HIGHEST PRIORITY */
    #phoneComponentContainer #buttonContainer #ctaButton,
    #phoneComponentContainer #buttonContainer #ctaButton *,
    #phoneComponentContainer #buttonContainer #ctaButton span,
    #phoneComponentContainer #buttonContainer #ctaButton svg,
    #phoneComponentContainer #buttonContainer #ctaButton path,
    div.phone-component-container div.transition-element.fade-in button.cta-button,
    div.phone-component-container div.transition-element.fade-in button.cta-button *,
    div.phone-component-container div.transition-element.fade-in button.cta-button span,
    div.phone-component-container div.transition-element.fade-in button.cta-button svg {
      -webkit-text-stroke: 0 !important;
      -moz-text-stroke: 0 !important;
      text-stroke: 0 !important;
      -webkit-text-stroke-width: 0 !important;
      -webkit-text-stroke-color: transparent !important;
      text-shadow: none !important;
      color: inherit !important;
      fill: currentColor !important;
      stroke: currentColor !important;
      background-clip: padding-box !important;
      -webkit-background-clip: padding-box !important;
      pointer-events: auto !important;
      cursor: pointer !important;
      opacity: 1 !important;
      visibility: visible !important;
    }
    
    /* ENSURE CONTAINERS DON'T BLOCK CLICKS */
    #phoneComponentContainer,
    #buttonContainer,
    .phone-component-container,
    .transition-element.fade-in {
      pointer-events: auto !important;
      cursor: pointer !important;
      z-index: 10 !important;
      position: relative !important;
    }

    /* SPECIFIC SVG ICON FIXES */
    .phone-icon {
      width: 20px !important;
      height: 20px !important;
      color: #6b7280 !important;
    }
    
    /* DARK-THEMED FORM - MATCHES YOUR SITE */
    .phone-input-wrapper {
      position: relative !important;
      display: flex !important;
      align-items: center !important;
      width: 100% !important;
      height: 48px !important;
    }
    
    .phone-input {
      width: 100% !important;
      height: 48px !important;
      padding: 0 120px 0 20px !important; /* Space for Call Me button */
      background: #1f2937 !important;
      border: 1px solid #374151 !important;
      border-radius: 8px !important;
      color: #ffffff !important;
      font-size: 16px !important;
      font-weight: 500 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      outline: none !important;
      transition: all 0.2s ease-in-out !important;
      box-sizing: border-box !important;
    }
    
    .phone-input::placeholder {
      color: #9ca3af !important;
      font-weight: 400 !important;
    }
    
    .phone-input:focus {
      border-color: #3b82f6 !important;
      box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.1) !important;
    }
    
    .call-button {
      position: absolute !important;
      right: 6px !important;
      top: 50% !important;
      transform: translateY(-50%) !important;
      height: 36px !important;
      padding: 0 16px !important;
      background: #3b82f6 !important;
      color: #ffffff !important;
      border: none !important;
      border-radius: 6px !important;
      font-size: 14px !important;
      font-weight: 600 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      cursor: pointer !important;
      transition: all 0.2s ease-in-out !important;
      outline: none !important;
      white-space: nowrap !important;
    }
    
    .call-button:hover {
      background: #2563eb !important;
    }
    
    .call-button:disabled {
      background: #6b7280 !important;
      cursor: not-allowed !important;
    }
    
    .status-message {
      position: absolute !important;
      top: 56px !important;
      left: 0 !important;
      right: 0 !important;
      font-size: 12px !important;
      text-align: center !important;
      height: 16px !important;
      transition: color 0.2s ease !important;
      color: #6b7280 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
    }
    
    .status-success {
      color: #22c55e !important;
    }
    
    .status-error {
      color: #ef4444 !important;
    }
    
    /* Professional phone form container - matches button position */
    .smart-phone-cta .phone-state {
      display: none;
      width: 100% !important;
      height: 100% !important;
      position: relative !important;
      margin: 0 !important;
    }
    
    .smart-phone-cta .phone-state.active {
      display: block !important;
    }
    
    /* Professional phone form layout */
    .professional-phone-form {
      width: 100% !important;
      height: 100% !important;
    }
    
    /* PROFESSIONAL FORM - MATCHES BUTTON AESTHETIC */
    .phone-input-container {
      display: flex !important;
      align-items: center !important;
      gap: 12px !important;
      width: 100% !important;
      height: 60px !important;
      /* Match button's sophisticated gradient background */
      background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%) !important;
      border: 1px solid rgba(255, 255, 255, 0.2) !important;
      border-radius: 8px !important;
      padding: 0 16px !important;
      box-sizing: border-box !important;
      /* Match button's professional shadow */
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1) !important;
    }
    
    /* Professional phone input field */
    .professional-phone-input {
      flex: 1 !important;
      height: 44px !important;
      border: none !important;
      outline: none !important;
      font-size: 16px !important;
      font-weight: 500 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      color: #1f2937 !important;
      background: transparent !important;
      padding: 0 !important;
      letter-spacing: -0.01em !important;
    }
    
    .professional-phone-input::placeholder {
      color: #6b7280 !important;
      font-weight: 400 !important;
    }
    
    .professional-phone-input:focus {
      outline: none !important;
    }
    
    /* Sophisticated focus state */
    .phone-input-container:focus-within {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%) !important;
      border-color: rgba(255, 255, 255, 0.3) !important;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2), 0 2px 6px rgba(0, 0, 0, 0.15) !important;
    }
    
    /* Professional call button - matches button style */
    .professional-call-btn {
      height: 44px !important;
      padding: 0 20px !important;
      /* Sophisticated dark button to contrast with light form */
      background: #374151 !important;
      color: #ffffff !important;
      border: none !important;
      border-radius: 6px !important;
      font-size: 14px !important;
      font-weight: 600 !important;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif !important;
      cursor: pointer !important;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
      white-space: nowrap !important;
      outline: none !important;
      letter-spacing: -0.01em !important;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    }
    
    .professional-call-btn:hover {
      background: #1f2937 !important;
      transform: translateY(-0.5px) !important;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
    }
    
    .professional-call-btn:active {
      background: #111827 !important;
      transform: translateY(0) !important;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1) !important;
    }

    /* Enhanced Professional Back Button */
    .professional-back-button, .back-button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1.5rem;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      color: rgba(255, 255, 255, 0.8);
      font-size: 0.9rem;
      font-weight: 500;
      text-decoration: none;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-bottom: 2rem;
      backdrop-filter: blur(5px);
    }
    
    .professional-back-button:hover, .back-button:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: rgba(255, 255, 255, 0.3);
      color: rgba(255, 255, 255, 0.95);
      transform: translateX(-2px);
    }
    
    .back-icon {
      width: 1rem;
      height: 1rem;
      transition: transform 0.3s ease;
    }
    
    .professional-back-button:hover .back-icon, 
    .back-button:hover .back-icon {
      transform: translateX(-2px);
    }
    
    /* NUCLEAR OPTION: Global Text-Stroke Elimination */
    *, *::before, *::after {
      -webkit-text-stroke: 0px transparent !important;
      text-stroke: 0px transparent !important;
      text-shadow: none !important;
    }
    
    /* Force disable text-stroke on buttons specifically */
    button, .button, [type="submit"], .ai-discovery-cta, #submitPhoneButton {
      -webkit-text-stroke: 0px transparent !important;
      text-stroke: 0px transparent !important;
      text-shadow: none !important;
      outline: none !important;
    }
    
    /* Ultimate phone button fix - Maximum Nuclear Specificity */
    html body div .phone-form-container #submitPhoneButton {
      background: #ffffff !important;
      background-color: #ffffff !important;
      color: #1a1a1a !important;
      border: 1px solid rgba(0, 0, 0, 0.15) !important;
      padding: 1rem 2rem !important;
      font-size: 16px !important;
      font-weight: 600 !important;
      font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif !important;
      border-radius: 8px !important;
      -webkit-text-stroke: 0px transparent !important;
      text-stroke: 0px transparent !important;
      text-shadow: none !important;
      display: inline-block !important;
      visibility: visible !important;
      opacity: 1 !important;
      cursor: pointer !important;
      transition: all 0.3s ease !important;
      text-decoration: none !important;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    }
    
    html body div .phone-form-container #submitPhoneButton:hover {
      background: #f8f8f8 !important;
      transform: translateY(-1px) !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    }

    /* Professional Back Button */
    .back-button {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: transparent;
      border: none;
      color: rgba(255, 255, 255, 0.6);
      font-size: 14px;
      font-weight: 400;
      font-family: 'General Sans', -apple-system, sans-serif;
      cursor: pointer;
      padding: 0.5rem 0;
      margin-bottom: 1.5rem;
      transition: all 0.3s ease;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    
    .back-button:hover {
      color: rgba(255, 255, 255, 0.9);
      transform: translateX(-2px);
    }
    
    .back-icon {
      width: 16px;
      height: 16px;
      transition: transform 0.3s ease;
    }
    
    .back-button:hover .back-icon {
      transform: translateX(-2px);
    }

    /* AI Success Message Styling */
    .ai-success-message {
      display: none;
      margin-top: 1.5rem;
      animation: fadeIn 0.4s ease;
    }

    .ai-success-message.active {
      display: block;
    }
    
    .submit-phone-button {
      width: 100%;
      padding: 1rem 2rem;
      background: var(--white);
      color: var(--primary-black);
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .submit-phone-button:hover {
      background: var(--grey);
      transform: translateY(-1px);
    }
    
    .submit-phone-button:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }
    
    .ai-supporting-text {
      font-size: 0.875rem;
      color: var(--grey);
      margin-top: 2.5rem;
      line-height: 1.5;
    }
    
    /* Success State */
    .success-message {
      display: none;
      background: var(--secondary-black);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      padding: 1.5rem;
      margin-top: 1rem;
      text-align: center;
    }
    
    /* Premium Calendar Section */
    .cal-calendar-section {
      padding: 0.5rem 2rem 1.5rem 2rem;
      background-color: var(--primary-black);
      text-align: center;
      margin-top: 0;
    }
    
    .cal-calendar-section h3 {
      font-size: 1.375rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0;
      letter-spacing: -0.01em;
    }
    
    .calendar-subtext {
      font-size: 1rem;
      color: rgba(255, 255, 255, 0.6);
      margin-bottom: 0.5rem;
      max-width: 500px;
      margin-left: auto;
      margin-right: auto;
      line-height: 1.5;
    }
    
    .success-message.active {
      display: block;
      animation: slideUp 0.4s ease;
    }
    
    .success-icon {
      color: var(--white);
      width: 32px;
      height: 32px;
      margin: 0 auto 1rem;
    }
    
    .success-title {
      font-size: 1.125rem;
      font-weight: 600;
      color: var(--white);
      margin-bottom: 0.5rem;
    }
    
    .success-text {
      color: var(--grey);
      font-size: 0.875rem;
    }
    
    /* Footer Section - Premium Dark - Hidden by default, shown only on confirmation */
    .confirmation-footer {
      display: none; /* Hidden by default during calendar view */
      padding: 1.5rem;
      background: var(--primary-black); /* Match site background */
      border-top: 1px solid rgba(255, 255, 255, 0.05);
      text-align: center;
    }
    
    .footer-links {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      flex-wrap: wrap;
    }
    
    /* Import button styles from main site */
    .link-button {
      grid-column-gap: 3px;
      grid-row-gap: 3px;
      flex-flow: column;
      justify-content: flex-start;
      align-items: center;
      text-decoration: none;
      display: flex;
      overflow: hidden;
    }
    
    .button-link-wrapper {
      grid-column-gap: 5px;
      grid-row-gap: 5px;
      flex-flow: row;
      justify-content: flex-start;
      align-items: center;
      display: flex;
      position: relative;
    }
    
    .button-text-block {
      flex-flow: column;
      justify-content: center;
      align-items: center;
      width: 100%;
      height: 1rem;
      display: flex;
      position: relative;
      overflow: hidden;
    }
    
    .button-text {
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      white-space: nowrap;
      font-size: 12px;
      font-weight: 500;
      line-height: 1rem;
      transition: transform .3s cubic-bezier(.165, .84, .44, 1);
      display: flex;
      align-items: center;
      height: 1rem;
    }
    
    .button-text.is-hover {
      color: rgba(255, 255, 255, 0.8);
      position: absolute;
      top: 1rem;
    }
    
    .link-button:hover .button-text {
      transform: translateY(-100%);
    }
    
    .link-button:hover .button-text.is-hover {
      transform: translateY(-100%);
    }
    
    .arrow-button-block {
      justify-content: center;
      align-items: center;
      width: 1rem;
      height: 1rem;
      display: flex;
      position: relative;
      overflow: hidden;
    }
    
    .arrow-button {
      color: rgba(255, 255, 255, 0.6);
      width: 1rem;
      height: 1rem;
      display: block;
      position: absolute;
      inset: 0%;
      transition: transform .3s cubic-bezier(.165, .84, .44, 1);
    }
    
    .arrow-button._02 {
      color: rgba(255, 255, 255, 0.8);
      transform: translateX(-100%);
    }
    
    .link-button:hover .arrow-button._01 {
      transform: translateX(100%);
    }
    
    .link-button:hover .arrow-button._02 {
      transform: translateX(0);
    }
    
    .underline {
      background-color: rgba(255, 255, 255, 0.6);
      width: 100%;
      height: 1px;
      margin-top: 3px;
      transition: opacity .3s;
    }
    
    .link-button:hover .underline {
      background-color: rgba(255, 255, 255, 0.8);
    }
    
    .footer-divider {
      width: 1px;
      height: 14px;
      background: rgba(255, 255, 255, 0.1);
      display: inline-block;
    }
    
    /* Animations */
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    /* Responsive Styles */
    @media (max-width: 768px) {
      /* Stack step indicators vertically on mobile */
      .step-indicator {
        flex-direction: column;
        text-align: center;
        gap: 0.5rem;
      }
      
      .step-indicator h2,
      .step-indicator h3 {
        text-align: center;
      }
      
      .ai-discovery-section {
        padding: 3rem 1.5rem;
      }
      
      .ai-discovery-heading {
        font-size: 1.5rem;
      }
      
      .ai-discovery-subheading {
        font-size: 1rem;
      }
      
      .link-button.ai-discovery-cta,
      body .phone-form-container .ai-discovery-cta,
      body .phone-form-container button.ai-discovery-cta,
      body .phone-form-container #submitPhoneButton.ai-discovery-cta,
      body #submitPhoneButton {
        transform: scale(1) !important;
        display: inline-block !important;
        visibility: visible !important;
        background: #ffffff !important;
        background-color: #ffffff !important;
        color: #1a1a1a !important;
      }
      
      .footer-links {
        flex-direction: column;
        gap: 1rem;
      }
      
      .footer-divider {
        display: none;
      }
      
      .link-button {
        transform: scale(1);
        margin: 0.5rem 0;
      }
    }
    
    /* COMPREHENSIVE Background Fix - Zero White Backgrounds */
    html, body {
      background-color: var(--primary-black) !important; /* #0f0f0f */
      min-height: 100vh;
    }
    
    .page-wrapper {
      background-color: var(--primary-black) !important;
      min-height: 100vh;
    }
    
    /* Universal background enforcement for all containers */
    .page-wrapper *,
    main,
    section,
    header,
    footer {
      background-color: var(--primary-black) !important;
    }
    
    /* SURGICAL Cal.com Container Targeting - Fix ONLY White Background */
    /* Container styling consolidated above - targeting only wrapper divs */
    
    /* Target only the immediate wrapper divs, preserve Cal.com's internal styling */
    #my-cal-inline-30min > div:first-child {
      background-color: var(--primary-black) !important;
    }
    
    /* ✅ REMOVED SURGICAL TEXT OVERRIDES: 
     * User's original config with cal-brand: "#fafafa" handles text colors properly
     * No manual color overrides needed with month_view layout
     */
    
    /* ✅ REMOVED DESKTOP OVERLAY OVERRIDES:
     * month_view layout behaves differently than column_view
     * User's original configuration should handle overlays properly
     */
    
    /* PROFESSIONAL Cal.com Integration Best Practices 2024 */
    /* Professional loading states and error handling */
    
    /* Professional loading states */
    #my-cal-inline-30min[data-cal-loading="true"] {
      opacity: 0.8;
      pointer-events: none;
    }
    
    /* Enhanced Responsive Design for Professional Presentation */
    @media (max-width: 768px) {
      #my-cal-inline-30min {
        margin: 0;
        border-radius: 4px;
        padding: 0;
      }
    }
    
    @media (max-width: 480px) {
      #my-cal-inline-30min {
        border-radius: 0;
        margin: 0 -1rem; /* Extend to screen edges on small devices */
      }
    }
    
    /* Professional error handling */
    #my-cal-inline-30min .cal-error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #f87171;
      padding: 1rem;
      border-radius: 6px;
      text-align: center;
    }
    
    /* Catch any remaining transparent backgrounds */
    *[style*="background: transparent"],
    *[style*="background-color: transparent"] {
      background-color: var(--primary-black) !important;
    }
    
    /* Target specific Cal.com generated containers */
    [data-cal-namespace],
    [data-cal-namespace] *,
    [class*="cal-"],
    [id*="cal-"] {
      background-color: var(--primary-black) !important;
    }
    
    /* Modern CSS eliminates the need for complex height overrides */
    
    /* 🎯 PROFESSIONAL: Metadata-only approach - no customer-facing technical data */
  </style>
  <!-- Cookie Consent Styles -->
  <link href="css/cookie-consent.css" rel="stylesheet" type="text/css">
</head>

<body>

  <div class="page-wrapper">
    <!-- Header Section -->
    <header class="calendar-header">
      <div class="padding-global">
        <div class="container-large">
          <h1>Book Your Strategy Session</h1>
          <p>Let's map your highest-impact automations together in this personalized 30-minute consultation.</p>
        </div>
      </div>
    </header>

    <!-- Progress Indicator -->
    <div class="progress-indicator">
      <div class="progress-steps">
        <div class="progress-step">
          <div class="step-circle completed">✓</div>
          <span class="step-text">Assessment Complete</span>
        </div>
        <div class="step-divider"></div>
        <div class="progress-step">
          <div class="step-circle">2</div>
          <span class="step-text">Book Your Session</span>
        </div>
      </div>
    </div>

    <!-- Personalized Message Section -->
    <div class="personalized-message" id="personalized-message" style="display: none;">
      <p class="personalized-text" id="personalized-text">
        <!-- Personalized message will be populated via JavaScript -->
      </p>
      <div class="calendar-divider"></div>
    </div>
    

    <!-- Calendar Section - Official Cal.com Inline Embed -->
    <main class="calendar-container">
      <!-- Cal inline embed code begins -->
      <div style="width:100%;height:100%;overflow:scroll" id="my-cal-inline-30min"></div>
      <script type="text/javascript">
        // Load Cal.com embed script
        (function (C, A, L) { let p = function (a, ar) { a.q.push(ar); }; let d = C.document; C.Cal = C.Cal || function () { let cal = C.Cal; let ar = arguments; if (!cal.loaded) { cal.ns = {}; cal.q = cal.q || []; d.head.appendChild(d.createElement("script")).src = A; cal.loaded = true; } if (ar[0] === L) { const api = function () { p(api, arguments); }; const namespace = ar[1]; api.q = api.q || []; if(typeof namespace === "string"){cal.ns[namespace] = cal.ns[namespace] || api;p(cal.ns[namespace], ar);p(cal, ["initNamespace", namespace]);} else p(cal, ar); return;} p(cal, ar); }; })(window, "https://app.cal.com/embed/embed.js", "init");
        
        // Initialize Cal.com with questionnaire data
        document.addEventListener('DOMContentLoaded', function() {
          // Collect questionnaire data from sessionStorage
          let questionnaireData = {};
          try {
            const storedData = sessionStorage.getItem('questionnaireData');
            if (storedData) {
              questionnaireData = JSON.parse(storedData);
              console.log('📊 Questionnaire data found:', questionnaireData);
            }
          } catch (err) {
            console.log('No questionnaire data found, using defaults');
          }

          // Prepare metadata for Cal.com
          const calMetadata = {
            company: questionnaireData.company || '',
            role: questionnaireData.role || '',
            teamSize: questionnaireData.teamSize || '',
            challenge: questionnaireData.challenge || '',
            budget: questionnaireData.budget || '',
            original_source: questionnaireData.original_source || 'direct',
            original_medium: questionnaireData.original_medium || 'none',
            original_campaign: questionnaireData.original_campaign || 'none',
            original_term: questionnaireData.original_term || '',
            original_content: questionnaireData.original_content || ''
          };

          console.log('📤 Passing prefill data to Cal.com:', calMetadata);

          // PROFESSIONAL APPROACH: Use metadata-only for clean customer experience
          // Build prefill URL parameters with metadata fields only
          const prefillParams = new URLSearchParams({
            // Individual metadata fields for reliable n8n integration
            'metadata[company]': calMetadata.company || '',
            'metadata[role]': calMetadata.role || '',
            'metadata[teamSize]': calMetadata.teamSize || '',
            'metadata[challenge]': calMetadata.challenge || '',
            'metadata[budget]': calMetadata.budget || '',
            'metadata[original_source]': calMetadata.original_source || 'direct',
            'metadata[original_medium]': calMetadata.original_medium || 'none',
            'metadata[original_campaign]': calMetadata.original_campaign || 'none',
            'metadata[original_term]': calMetadata.original_term || '',
            'metadata[original_content]': calMetadata.original_content || ''
          });

          const calLinkWithPrefill = `nithichote/30min?${prefillParams.toString()}`;
          console.log('📤 Cal.com link with prefill:', calLinkWithPrefill);

          // Debug: Log the actual metadata being sent
          console.log('🔍 Metadata debug:', {
            company: calMetadata.company,
            role: calMetadata.role,
            teamSize: calMetadata.teamSize,
            challenge: calMetadata.challenge,
            budget: calMetadata.budget,
            original_source: calMetadata.original_source
          });

          // Initialize Cal.com with prefilled data
          Cal("init", "30min", {origin:"https://app.cal.com"});

          Cal.ns["30min"]("inline", {
            elementOrSelector:"#my-cal-inline-30min",
            config: {"layout":"month_view"},
            calLink: calLinkWithPrefill
          });

          Cal.ns["30min"]("ui", {"cssVarsPerTheme":{"light":{"cal-brand":"#292929"},"dark":{"cal-brand":"#fafafa"}},"hideEventTypeDetails":false,"layout":"month_view"});

          // PROFESSIONAL: Listen to ALL Cal.com events to debug what's actually firing
          Cal.ns["30min"]("on", {
            action: "*", // Listen to ALL events (professional debugging approach)
            callback: (e) => {
              console.log('🔍 Cal.com Event Fired:', {
                action: e.detail?.type,
                data: e.detail?.data,
                namespace: e.detail?.namespace,
                timestamp: new Date().toISOString(),
                fullEvent: e
              });
              
              // Check for booking-related events
              const eventType = e.detail?.type;
              if (eventType && (
                eventType === 'bookingSuccessful' || 
                eventType === 'booking.successful' ||
                eventType === 'BOOKING_CREATED' ||
                eventType === 'bookingCompleted' ||
                eventType === 'booking.completed' ||
                eventType.toLowerCase().includes('booking') ||
                eventType.toLowerCase().includes('success')
              )) {
                console.log('🎯 BOOKING SUCCESS EVENT DETECTED:', eventType);
                window.createConfirmationPage(e);
              }
            }
          });

          // BACKUP: Also try the standard event listener
          Cal.ns["30min"]("on", {
            action: "bookingSuccessful",
            callback: (e) => {
              console.log('🎯 bookingSuccessful event (backup listener):', e);
              window.createConfirmationPage(e);
            }
          });

          console.log('✅ Cal.com initialized with metadata and booking success handler');
          
          // Initialize form functionality on page load
          initializeSmartPhoneCta();
        });
      </script>
      <!-- Cal inline embed code ends -->
    </main>
    
    
    <!-- Footer -->
    <footer class="confirmation-footer">
      <div class="footer-links">
        <a href="mailto:hi@phunithichote.com" class="link-button w-inline-block">
          <div class="button-link-wrapper">
            <div class="button-text-block">
              <div class="button-text is-hover">HI@PHUNITHICHOTE.COM</div>
              <div class="button-text">HI@PHUNITHICHOTE.COM</div>
            </div>
          </div>
          <div class="underline is-nav"></div>
        </a>
        <span class="footer-divider"></span>
        <a href="/" class="link-button w-inline-block">
          <div class="button-link-wrapper">
            <div class="button-text-block">
              <div class="button-text is-hover">BACK TO HOMEPAGE</div>
              <div class="button-text">BACK TO HOMEPAGE</div>
            </div>
            <div class="arrow-button-block">
              <div class="arrow-button _01 w-embed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                </svg></div>
              <div class="arrow-button _02 w-embed"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M16.1716 10.9999L10.8076 5.63589L12.2218 4.22168L20 11.9999L12.2218 19.778L10.8076 18.3638L16.1716 12.9999H4V10.9999H16.1716Z"></path>
                </svg></div>
            </div>
          </div>
          <div class="underline is-nav"></div>
        </a>
      </div>
    </footer>
  </div>

  <script>
    // Global confirmation page state variables - make globally accessible
    window.confirmationPageCreated = false;
    window.confirmationTimeout = null;
    
    // Security: Input sanitization function
    function sanitizeInput(input) {
      if (typeof input !== 'string') return input;
      
      // Remove any HTML tags
      input = input.replace(/<[^>]*>/g, '');
      
      // Escape special characters
      input = input
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#x27;')
        .replace(/\//g, '&#x2F;');
      
      // Remove any script tags or javascript: protocols
      input = input.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi, '');
      input = input.replace(/javascript:/gi, '');
      
      // Trim whitespace
      input = input.trim();
      
      // Limit length to prevent buffer overflow attacks
      if (input.length > 500) {
        input = input.substring(0, 500);
      }
      
      return input;
    }
    
    // Cal.com integration with metadata for questionnaire data passing
    
    // Global environment detection
    const isProduction = window.location.hostname !== 'localhost' && !window.location.hostname.includes('127.0.0.1');
    
    // Global confirmation page state
    // Global variables declared above
    
    // Helper function to get challenge label
    function getChallengeLabel(challengeValue) {
      const challengeLabels = {
        'manual-tasks': 'Too many manual tasks',
        'slow-processes': 'Slow, inefficient processes',
        'scaling-issues': 'Can\'t scale operations',
        'missed-opportunities': 'Missing opportunities'
      };
      return challengeLabels[challengeValue] || challengeValue;
    }
    
    // Simple iframe embed approach - no complex initialization needed
    
    // Cal.com inline embed handles initialization automatically
    // Event handlers can be added separately if booking confirmation is needed
    
    // Simplified fallback function (no loading containers needed)
    function showFallbackOptions() {
      // Cal.com inline embed handles errors gracefully
      // Only needed if additional error handling is required
      console.log('Cal.com fallback options can be added if needed');
    }
    
    // Cal.com initialization and form setup handled in the inline script above
    
    // Browser Extension Detection and Warning System
    function detectProblematicExtensions() {
        const problematicExtensions = [];
        
        // Common extension signatures that can interfere with Cal.com
        if (window.YoinkUI || document.querySelector('script[src*="yoink"]')) {
          problematicExtensions.push('YoinkUI');
        }
        
        if (window.adBlock || window.uBlock) {
          problematicExtensions.push('Ad Blocker');
        }
        
        if (window.grammarly || document.querySelector('[data-gr-ext]')) {
          problematicExtensions.push('Grammarly');
        }
        
        // Generic extension detection
        const extensionScripts = document.querySelectorAll('script[src^="chrome-extension://"], script[src^="moz-extension://"]');
        if (extensionScripts.length > 0) {
          problematicExtensions.push(`${extensionScripts.length} browser extensions`);
        }
        
        return problematicExtensions;
      }
      
      // Duplicate variable declarations removed - using global ones below
      
      // Extract confirmation page creation logic into separate function for reuse  
      // First duplicate createConfirmationPage removed - using comprehensive version below
    
    // Duplicate function removed - using simplified version above
    
    // REMOVED duplicate code causing syntax errors - keeping only working functions below
    
    // Initialize when page loads - using promise-based approach
    document.addEventListener('DOMContentLoaded', function() {
      // Cal.com inline embed initializes automatically via script in HTML
      // No manual initialization needed
      
      // Initialize form functionality on page load (not just after booking)
      initializeSmartPhoneCta();
    });
    
    // Browser Extension Detection and Warning System
    function detectProblematicExtensions() {
        const problematicExtensions = [];
        
        // Common extension signatures that can interfere with Cal.com
        if (window.YoinkUI || document.querySelector('script[src*="yoink"]')) {
          problematicExtensions.push('YoinkUI');
        }
        
        if (window.adBlock || window.uBlock) {
          problematicExtensions.push('Ad Blocker');
        }
        
        if (window.grammarly || document.querySelector('[data-gr-ext]')) {
          problematicExtensions.push('Grammarly');
        }
        
        // Generic extension detection
        const extensionScripts = document.querySelectorAll('script[src^="chrome-extension://"], script[src^="moz-extension://"]');
        if (extensionScripts.length > 0) {
          problematicExtensions.push(`${extensionScripts.length} browser extensions`);
        }
        
        return problematicExtensions;
      }
      
      // Duplicate variable declarations removed - using global ones below
      
      // Second duplicate createConfirmationPage removed - using comprehensive version below
      
      // Simple iframe approach - no complex initialization needed
    
    
    // Global flag to prevent duplicate confirmation pages with timeout reset
    // Global variables declared above
    
    // Extract confirmation page creation logic into separate function for reuse - make globally accessible
    window.createConfirmationPage = function(e) {
      // Prevent duplicate confirmation pages with smart timeout logic
      if (window.confirmationPageCreated) {
        if (!isProduction) console.log('⚠️ Confirmation page already created, skipping...');
        return;
      }
      
      if (!isProduction) console.log('🎯 Creating confirmation page...');
      window.confirmationPageCreated = true; // Set flag immediately to prevent race conditions
      
      // Professional UX: Persist confirmation state to prevent form resubmission on reload
      try {
        sessionStorage.setItem('confirmationPageActive', 'true');
        sessionStorage.setItem('confirmationTimestamp', Date.now().toString());
        
        // Use History API to prevent "Confirm form resubmission" warning
        if (window.history.pushState && !window.location.href.includes('#confirmed')) {
          const newUrl = window.location.href + '#confirmed';
          window.history.pushState({confirmationPage: true}, 'Strategy Session Confirmed', newUrl);
        }
        
        if (!isProduction) console.log('✅ Confirmation state persisted');
      } catch (error) {
        if (!isProduction) console.log('⚠️ Could not persist confirmation state:', error);
      }
      
      // Clear any existing timeout
      if (window.confirmationTimeout) {
        clearTimeout(window.confirmationTimeout);
      }
      
      // Reset flag after 10 seconds to allow for multiple bookings in same session
      window.confirmationTimeout = setTimeout(() => {
        window.confirmationPageCreated = false;
        window.confirmationTimeout = null;
        if (!isProduction) console.log('🔄 Confirmation flag reset - ready for next booking');
      }, 10000);
      
      // Get stored user data for personalization
      let userData = {};
      try {
        const storedData = sessionStorage.getItem('questionnaireData');
        if (storedData) {
          userData = JSON.parse(storedData);
        }
      } catch (err) {
        console.log('No questionnaire data found');
      }
      
      // Create personalized message
      const personalMessage = userData.challenge ? 
        `Ready to tackle "${userData.challengeLabel || userData.challenge}" and transform ${userData.company ? 'how ' + userData.company + ' operates' : 'your operations'}!` : 
        'Looking forward to mapping your AI automation strategy!';
      
      // Create enhanced content ABOVE the Cal.com confirmation
      const enhancedContent = document.createElement('div');
      enhancedContent.className = 'enhanced-confirmation';
      enhancedContent.innerHTML = `
        <div class="confirmation-container" style="padding-bottom: 1rem;">
          <div class="confirmation-icon">🎯</div>
          <h2 class="confirmation-heading">
            Strategy Session Confirmed!
          </h2>
          <p class="confirmation-text">
            Great! Your calendar is being updated below.
          </p>
          <p class="confirmation-message">
            ${personalMessage}
          </p>
          
          <!-- Video Section -->
          <div class="confirmation-video">
            <div class="step-indicator">
              <span class="step-number-badge">1</span>
              <h3>Watch My Quick Message</h3>
            </div>
            <div class="professional-video-container">
              <!-- Professional Video Player - Clean & Modern -->
              <div class="professional-video-player" id="professionalVideoPlayer">
                <video 
                  id="mainVideo"
                  class="main-video"
                  poster=""
                  preload="metadata"
                  playsinline
                  webkit-playsinline
                >
                  <source src="" type="video/mp4" id="videoSource">
                  Your browser does not support the video tag.
                </video>
                
                <!-- Professional Play Button Overlay -->
                <div class="video-play-overlay" id="videoPlayOverlay">
                  <button class="clean-play-button" id="cleanPlayButton" aria-label="Play personalized video">
                    ▶
                  </button>
                  <div class="video-info">
                    <p class="video-caption">Click to play personalized video</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Divider -->
          <div class="section-divider"></div>
          
          <!-- AI Discovery Section -->
          <div class="ai-discovery-section">
            <div class="ai-discovery-container">
              <div class="step-indicator">
                <span class="step-number-badge">2</span>
                <h2 class="ai-discovery-heading">Start Your AI Discovery Call</h2>
              </div>
              
              <p class="ai-discovery-subheading">
                Spend 5 minutes with my AI assistant to identify your top automation opportunities before our call.
              </p>
              
              <!-- Success Message (initially hidden) -->
              <div class="ai-success-message" id="aiSuccessMessage">
                <div style="text-align: center; padding: 2rem; background: var(--secondary-black); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                  <div style="color: #4CAF50; font-size: 3rem; margin-bottom: 1rem;">✅</div>
                  <h3 style="color: var(--white); margin-bottom: 1rem;">AI Discovery Call Starting!</h3>
                  <p style="color: var(--grey); margin-bottom: 0;">You'll receive a call within 60 seconds. Have your automation challenges ready!</p>
                </div>
              </div>
              
              <!-- ZERO-DEPENDENCY PHONE COMPONENT IN DYNAMIC TEMPLATE -->
              <div id="phoneComponentContainer" style="position: relative; width: 100%; max-width: 400px; height: 80px; margin: 2rem auto;">
                <div id="buttonContainer" style="position: absolute; top: 0; left: 0; width: 100%; opacity: 1; transform: translateY(0); pointer-events: auto; transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out; z-index: 3;">
                  <button id="ctaButton" style="all: initial; display: flex; align-items: center; justify-content: center; gap: 10px; width: 100%; height: 48px; background: white; border: 1px solid #e5e5e5; border-radius: 8px; color: #333333; font-size: 16px; font-weight: bold; font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif; text-align: center; cursor: pointer; pointer-events: auto; -webkit-appearance: none; -moz-appearance: none; appearance: none; -webkit-text-stroke: 0; -moz-text-stroke: 0; text-stroke: 0; -webkit-text-stroke-width: 0; -webkit-text-stroke-color: transparent; text-shadow: none; outline: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; text-rendering: optimizeLegibility;">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="color: #333333;">
                      <path d="M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7293C21.7209 20.9845 21.5573 21.2136 21.3521 21.4019C21.1468 21.5901 20.9046 21.7335 20.6407 21.8227C20.3769 21.9119 20.0974 21.9451 19.82 21.92C16.7428 21.5856 13.787 20.5341 11.19 18.85C8.77382 17.3147 6.72533 15.2662 5.18999 12.85C3.49997 10.2412 2.44824 7.27099 2.11999 4.18C2.095 3.90347 2.12787 3.62476 2.21649 3.36162C2.30512 3.09849 2.44756 2.85669 2.63476 2.65162C2.82196 2.44655 3.0498 2.28271 3.30379 2.17052C3.55777 2.05833 3.83233 2.00026 4.10999 2H7.10999C7.59533 1.99522 8.06814 2.16708 8.43999 2.48353C8.81184 2.79999 9.06334 3.23945 9.14999 3.72C9.31071 4.68007 9.58887 5.61273 9.97999 6.5C10.1018 6.80258 10.1445 7.13162 10.1044 7.45606C10.0642 7.78049 9.94218 8.09014 9.74999 8.35L8.52999 9.57C9.85999 12.0756 11.9544 14.17 14.46 15.5L15.68 14.28C15.9399 14.0878 16.2495 13.9658 16.574 13.9256C16.8984 13.8855 17.2274 13.9282 17.53 14.05C18.4173 14.4411 19.3499 14.7193 20.31 14.88C20.7955 14.9685 21.2387 15.2239 21.5547 15.5997C21.8707 15.9755 22.0397 16.4499 22.03 16.94L22 16.92Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    Get AI Strategy Call in 60 Seconds
                  </button>
                </div>
                <div id="phoneFormContainer" style="position: absolute; top: 0; left: 0; width: 100%; opacity: 0; transform: translateY(5px); pointer-events: none; transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out; z-index: 5;">
                  <div style="position: relative; display: flex; align-items: stretch; width: 100%; height: 48px; gap: 8px;">
                    <input type="tel" id="phoneInput" placeholder="(555) 123-4567" maxlength="14" autocomplete="tel" style="flex: 1; height: 48px; padding: 0 16px; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 8px 0 0 8px; color: white; font-size: 16px; font-weight: normal; font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif; cursor: text; pointer-events: auto; -webkit-appearance: none; -moz-appearance: none; appearance: none; outline: none; -webkit-text-stroke: 0; -moz-text-stroke: 0; text-stroke: 0; text-shadow: none; box-sizing: border-box; z-index: 1;" />
                    <button type="button" id="callButton" style="flex: 0 0 100px; height: 48px; background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 0 8px 8px 0; color: rgba(255, 255, 255, 0.5); font-size: 14px; font-weight: 600; font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif; cursor: not-allowed; pointer-events: auto; display: flex; align-items: center; justify-content: center; -webkit-appearance: none; -moz-appearance: none; appearance: none; outline: none; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); box-sizing: border-box; z-index: 2; opacity: 0.6;">Call Me</button>
                  </div>
                  <p id="statusMessage" style="all: initial; color: rgba(255, 255, 255, 0.6); font-size: 12px; font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif; margin: 16px 0 0 0; text-align: center; -webkit-text-stroke: 0; -moz-text-stroke: 0; text-stroke: 0; text-shadow: none; line-height: 1.4;"></p>
                </div>
              </div>
              
              <p class="ai-supporting-text">
                <strong>Why this matters:</strong> 73% of our most successful implementations started with this AI discovery call. You'll arrive to our strategy session with clarity, not confusion.
              </p>
            </div>
          </div>
          
          <!-- Section Divider -->
          <div class="section-divider"></div>

          <!-- Professional Next Steps - Moved to proper location -->
          
          <!-- Cal.com Confirmation Section -->
          <div class="cal-confirmation-section">
            <div class="step-indicator">
              <span class="step-number-badge">3</span>
              <h3>Meeting Confirmed</h3>
            </div>
            <div class="confirmation-details">
              <div class="confirmation-icon">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                  <polyline points="22,4 12,14.01 9,11.01"></polyline>
                </svg>
              </div>
              <p class="confirmation-text">Your strategy session has been successfully scheduled. You'll receive a calendar invitation and meeting details at your email shortly.</p>
              <div class="next-steps">
                <h4>What's Next:</h4>
                <ul>
                  <li>Check your email for the calendar invitation</li>
                  <li>Add the meeting to your calendar</li>
                  <li>Prepare your automation challenges for discussion</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      `;
      
      // Modern container-free architecture - Insert enhanced content
      const calendarContainer = document.querySelector('.calendar-container');
      const calEmbedElement = document.getElementById('my-cal-inline-30min');
      
      if (!isProduction) {
        console.log('📍 Container elements:', {
          calendarContainer: !!calendarContainer,
          calEmbedElement: !!calEmbedElement
        });
      }
      
      // Insert the enhanced content BEFORE the cal embed
      if (calendarContainer && calEmbedElement) {
        calendarContainer.insertBefore(enhancedContent, calEmbedElement);
        if (!isProduction) console.log('✅ Enhanced confirmation content injected successfully');
      } else {
        console.error('❌ Failed to inject confirmation content - missing container elements');
        // Fallback: append to body if containers not found
        if (enhancedContent) {
          document.body.appendChild(enhancedContent);
          if (!isProduction) console.log('🔄 Fallback: Added confirmation to body');
        }
      }
      
      // Hide header, progress sections, and Cal.com embed on confirmation
      const header = document.querySelector('.calendar-header');
      const progress = document.querySelector('.progress-indicator');
      const personalizedMsg = document.querySelector('.personalized-message');
      const confirmationFooter = document.querySelector('.confirmation-footer');
      const calcomContainer = document.getElementById('my-cal-inline-30min');
      
      if (header) header.style.display = 'none';
      if (progress) progress.style.display = 'none';
      if (personalizedMsg) personalizedMsg.style.display = 'none';
      
      // CRITICAL: Hide Cal.com embed to prevent reload booking form issue
      if (calcomContainer) {
        calcomContainer.style.display = 'none';
        if (!isProduction) console.log('✅ Cal.com embed hidden to prevent reload issues');
      }
      
      // Show footer only during confirmation page
      if (confirmationFooter) {
        confirmationFooter.style.display = 'block';
        if (!isProduction) console.log('✅ Confirmation footer displayed');
      }
      
      // Set up professional Video.js player and AI discovery
      setTimeout(() => {
        // Initialize professional custom video player
        initializeCustomVideoPlayer(userData);
        
        // Initialize AI Discovery
        initializeSmartPhoneCta();
      }, 500);
      
      if (!isProduction) console.log('🎯 Confirmation page created successfully!');
    }
    
    // Re-enabled setupBookingSuccessHandler with duplication prevention
    function setupBookingSuccessHandler() {
      if (!isProduction) console.log('🚀 setupBookingSuccessHandler called');
      
      // Streamlined Cal.com API verification
      if (!isProduction) {
        console.log('🔍 Cal.com API Status:', {
          CalExists: typeof Cal !== 'undefined',
          NamespaceReady: !!(Cal.ns && Cal.ns["30min"])
        });
      }
      
      // Verify Cal.com API is available
      if (typeof Cal === 'undefined') {
        console.error('❌ Cal is not defined - Cal.com not loaded properly');
        return;
      }
      
      if (!Cal.ns) {
        console.error('❌ Cal.ns is not available - Cal.com API not ready');
        return;
      }
      
      if (!Cal.ns["30min"]) {
        console.error('❌ Cal.ns["30min"] is not available - calendar instance not ready');
        return;
      }
      
      console.log('✅ Cal.com API verified - registering booking success handler');
      
      // Booking success handler is now registered in the Cal.com initialization script above
    }
    
    
    function displayPersonalizedMessage(userData) {
      const personalizedSection = document.getElementById('personalized-message');
      const personalizedText = document.getElementById('personalized-text');
      
      // Hardcoded challenge-based messages for stability
      const challengeMessages = {
        'manual-tasks': "Let's unlock hours back in your week with smart automation",
        'slow-processes': "Ready to accelerate your operations with intelligent workflows",
        'scaling-issues': "Time to build systems that scale with your ambitions",
        'missed-opportunities': "Let's capture every opportunity with automated systems"
      };
      
      // Default message if no challenge or unknown challenge
      const defaultMessage = "Ready to transform your business with automation";
      
      // Get message based on challenge type
      let message = challengeMessages[userData.challenge] || defaultMessage;
      
      // Display the message
      if (personalizedText && personalizedSection) {
        personalizedText.textContent = message;
        personalizedSection.style.display = 'block';
      }
    }
    
    
    function getBookingData() {
      // Try to get booking date from sessionStorage
      const bookingDate = sessionStorage.getItem('bookingDate');
      let startDate, endDate;
      
      if (bookingDate) {
        const date = new Date(bookingDate);
        startDate = date.toISOString().replace(/[-:]/g, '').replace('.000', '');
        const endTime = new Date(date.getTime() + 30 * 60000); // Add 30 minutes
        endDate = endTime.toISOString().replace(/[-:]/g, '').replace('.000', '');
      } else {
        // Fallback to tomorrow at 10am
        const tomorrow = new Date();
        tomorrow.setDate(tomorrow.getDate() + 1);
        tomorrow.setHours(10, 0, 0, 0);
        startDate = tomorrow.toISOString().replace(/[-:]/g, '').replace('.000', '');
        const endTime = new Date(tomorrow.getTime() + 30 * 60000);
        endDate = endTime.toISOString().replace(/[-:]/g, '').replace('.000', '');
      }
      
      return { startDate, endDate };
    }
    
    // Initialize when page loads
    document.addEventListener('DOMContentLoaded', function() {
      
      // Professional UX: Check if confirmation page should be restored
      const confirmationActive = sessionStorage.getItem('confirmationPageActive');
      const confirmationTimestamp = sessionStorage.getItem('confirmationTimestamp');
      
      if (confirmationActive === 'true' && confirmationTimestamp) {
        // Only restore if less than 24 hours old (prevent stale confirmations)
        const timestamp = parseInt(confirmationTimestamp);
        const hoursSinceConfirmation = (Date.now() - timestamp) / (1000 * 60 * 60);
        
        if (hoursSinceConfirmation < 24 && (window.location.href.includes('#confirmed') || window.location.href.includes('calendar'))) {
          if (!isProduction) console.log('🔄 Restoring confirmation page state from previous session');
          
          // Hide Cal.com embed immediately to prevent showing booking form
          const calcomContainer = document.getElementById('my-cal-inline-30min');
          if (calcomContainer) {
            calcomContainer.style.display = 'none';
            if (!isProduction) console.log('✅ Cal.com embed hidden on state restoration');
          }
          
          // Restore confirmation page without triggering new confirmation detection
          setTimeout(() => {
            window.createConfirmationPage({detail: {source: 'state_restoration', text: 'Restored from session'}});
          }, 1000);
        } else {
          // Clean up old confirmation state
          sessionStorage.removeItem('confirmationPageActive');
          sessionStorage.removeItem('confirmationTimestamp');
        }
      }
      
      // Check if we have questionnaire data
      const storedData = sessionStorage.getItem('questionnaireData');
      if (storedData) {
      }
      
      // Cal.com inline embed initializes automatically via script in HTML
      // No manual initialization needed
      
      // Initialize form functionality on page load (not just after booking)
      initializeSmartPhoneCta();
    });
    
    // Clean Professional Video Player - Enhanced Debugging
    function initializeCustomVideoPlayer(userData) {
      console.log('🎬 === PROFESSIONAL VIDEO PLAYER INITIALIZATION ===');
      
      const videoPlayer = document.getElementById('professionalVideoPlayer');
      const mainVideo = document.getElementById('mainVideo');
      const playButton = document.getElementById('cleanPlayButton');
      const videoSource = document.getElementById('videoSource');
      const playOverlay = document.getElementById('videoPlayOverlay');
      
      // Debug element existence
      console.log('🔍 Element Check:');
      console.log('  videoPlayer:', videoPlayer ? '✅ Found' : '❌ Missing');
      console.log('  mainVideo:', mainVideo ? '✅ Found' : '❌ Missing');
      console.log('  playButton:', playButton ? '✅ Found' : '❌ Missing');
      console.log('  videoSource:', videoSource ? '✅ Found' : '❌ Missing');
      console.log('  playOverlay:', playOverlay ? '✅ Found' : '❌ Missing');
      
      if (!videoPlayer || !mainVideo || !playButton || !videoSource) {
        console.error('🚫 Missing video elements, aborting initialization');
        return;
      }
      
      // Debug button styling
      if (playButton) {
        const buttonStyles = window.getComputedStyle(playButton);
        console.log('🎯 Button Debugging:');
        console.log('  Background:', buttonStyles.background);
        console.log('  Background-color:', buttonStyles.backgroundColor);
        console.log('  Color:', buttonStyles.color);
        console.log('  Width:', buttonStyles.width);
        console.log('  Height:', buttonStyles.height);
        console.log('  Display:', buttonStyles.display);
        console.log('  Text-stroke:', buttonStyles.webkitTextStroke || 'none');
        console.log('  Text-shadow:', buttonStyles.textShadow);
      }
      
      // Challenge-based video mapping
      const videoMap = {
        'manual-tasks': 'videos/manual-tasks-blueprint.mp4',
        'slow-processes': 'videos/strategy-blueprint.mp4', 
        'scaling-issues': 'videos/scaling-blueprint.mp4',
        'missed-opportunities': 'videos/lead-saving-blueprint.mp4'
      };
      
      const challengeType = userData.challenge || 'manual-tasks';
      const videoPath = videoMap[challengeType] || videoMap['manual-tasks'];
      
      console.log('🎥 Video Configuration:');
      console.log('  Challenge type:', challengeType);
      console.log('  Video path:', videoPath);
      
      // Set video source - improved poster approach
      videoSource.src = videoPath;
      
      // Remove poster for clean blue overlay
      mainVideo.removeAttribute('poster');
      mainVideo.poster = '';
      console.log('📸 Poster removed for clean overlay experience');
      
      mainVideo.load();
      console.log('🔄 Video loading started');
      
      // Force video to fill container - JavaScript runtime fix
      function forceVideoFill() {
        const containerRect = videoPlayer.getBoundingClientRect();
        const videoRect = mainVideo.getBoundingClientRect();
        
        console.log('🔧 Forcing video to fill container:');
        console.log('  Container size:', containerRect.width + 'x' + containerRect.height);
        console.log('  Video size before fix:', videoRect.width + 'x' + videoRect.height);
        
        // Force exact dimensions via JavaScript
        mainVideo.style.setProperty('width', '100%', 'important');
        mainVideo.style.setProperty('height', '100%', 'important');
        mainVideo.style.setProperty('position', 'absolute', 'important');
        mainVideo.style.setProperty('top', '0', 'important');
        mainVideo.style.setProperty('left', '0', 'important');
        mainVideo.style.setProperty('right', '0', 'important');
        mainVideo.style.setProperty('bottom', '0', 'important');
        mainVideo.style.setProperty('object-fit', 'cover', 'important');
        
        // Force re-measurement
        setTimeout(() => {
          const newVideoRect = mainVideo.getBoundingClientRect();
          console.log('  Video size after fix:', newVideoRect.width + 'x' + newVideoRect.height);
          
          const fillsCorrectly = (Math.abs(newVideoRect.width - containerRect.width) < 1) && 
                                (Math.abs(newVideoRect.height - containerRect.height) < 1);
          console.log('  Video fills container:', fillsCorrectly ? '✅ YES' : '❌ STILL NO');
          
          if (!fillsCorrectly) {
            console.error('🚨 JavaScript video sizing failed - investigating parent containers');
            // Check for interference
            let parent = videoPlayer.parentElement;
            let level = 1;
            while (parent && level <= 3) {
              const parentStyles = window.getComputedStyle(parent);
              console.error(`  Parent Level ${level} (${parent.className}):`);
              console.error(`    Display: ${parentStyles.display}`);
              console.error(`    Position: ${parentStyles.position}`);
              console.error(`    Overflow: ${parentStyles.overflow}`);
              parent = parent.parentElement;
              level++;
            }
          }
        }, 50);
      }
      
      // Force video fill on load and resize
      forceVideoFill();
      setTimeout(forceVideoFill, 500); // Backup check
      window.addEventListener('resize', forceVideoFill);
      
      // Enhanced play button functionality with debugging
      playButton.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        
        console.log('🎬 === PLAY BUTTON CLICKED ===');
        console.log('  Event details:', e);
        console.log('  Button element:', playButton);
        console.log('  Video ready state:', mainVideo.readyState);
        console.log('  Video src:', mainVideo.currentSrc || videoSource.src);
        
        // Debug button state after click
        const clickStyles = window.getComputedStyle(playButton);
        console.log('🎯 Button State After Click:');
        console.log('  Background:', clickStyles.backgroundColor);
        console.log('  Color:', clickStyles.color);
        
        // Hide overlay and play video
        playOverlay.classList.add('hidden');
        mainVideo.controls = true;
        
        console.log('📱 Overlay hidden, controls enabled');
        
        const playPromise = mainVideo.play();
        if (playPromise !== undefined) {
          playPromise.then(() => {
            console.log('✅ Video playing successfully');
          }).catch(error => {
            console.error('⚠️ Video play failed:', error);
            console.log('📹 Video error details:', mainVideo.error);
            // Show overlay again on failure
            playOverlay.classList.remove('hidden');
            mainVideo.controls = false;
          });
        }
      });
      
      // Enhanced video event handlers with debugging
      mainVideo.addEventListener('loadstart', function() {
        console.log('🔄 Video loading started');
      });
      
      mainVideo.addEventListener('loadeddata', function() {
        console.log('📊 Video data loaded');
        console.log('  Video dimensions:', mainVideo.videoWidth + 'x' + mainVideo.videoHeight);
        console.log('  Video duration:', mainVideo.duration);
      });
      
      mainVideo.addEventListener('canplay', function() {
        console.log('✅ Video can start playing');
        console.log('  Ready state:', mainVideo.readyState);
      });
      
      mainVideo.addEventListener('pause', function() {
        if (!mainVideo.ended) {
          playOverlay.classList.remove('hidden');
          // Update text to show play option
          const videoCaption = document.querySelector('.video-caption');
          if (videoCaption) {
            videoCaption.textContent = 'Click to resume video';
          }
          console.log('⏸️ Video paused, showing overlay');
        }
      });
      
      mainVideo.addEventListener('play', function() {
        playOverlay.classList.add('hidden');
        // Update text for when user clicks during play (though hidden)
        const videoCaption = document.querySelector('.video-caption');
        if (videoCaption) {
          videoCaption.textContent = 'Click to pause video';
        }
        console.log('▶️ Video playing, hiding overlay');
      });
      
      mainVideo.addEventListener('ended', function() {
        playOverlay.classList.remove('hidden');
        mainVideo.controls = false;
        // Reset text when video ends
        const videoCaption = document.querySelector('.video-caption');
        if (videoCaption) {
          videoCaption.textContent = 'Click to replay video';
        }
        console.log('⏹️ Video ended, showing overlay');
      });
      
      mainVideo.addEventListener('error', function(e) {
        console.error('🚫 Video error occurred:', e);
        console.error('  Error details:', mainVideo.error);
        playOverlay.classList.remove('hidden');
      });
      
      // Enhanced container debugging with parent analysis
      setTimeout(() => {
        console.log('📐 === CONTAINER DIMENSION ANALYSIS ===');
        
        // Container analysis
        const containerStyles = window.getComputedStyle(videoPlayer);
        const containerRect = videoPlayer.getBoundingClientRect();
        console.log('🎬 Video Player Container:');
        console.log('  CSS width:', containerStyles.width);
        console.log('  CSS height:', containerStyles.height);
        console.log('  CSS padding-top:', containerStyles.paddingTop);
        console.log('  CSS max-width:', containerStyles.maxWidth);
        console.log('  Actual width:', containerRect.width + 'px');
        console.log('  Actual height:', containerRect.height + 'px');
        console.log('  Actual aspect ratio:', (containerRect.width / containerRect.height).toFixed(2));
        console.log('  Position:', containerStyles.position);
        console.log('  Display:', containerStyles.display);
        
        // Video element analysis
        const videoStyles = window.getComputedStyle(mainVideo);
        const videoRect = mainVideo.getBoundingClientRect();
        console.log('🎥 Video Element:');
        console.log('  CSS width:', videoStyles.width);
        console.log('  CSS height:', videoStyles.height);
        console.log('  Actual width:', videoRect.width + 'px');
        console.log('  Actual height:', videoRect.height + 'px');
        console.log('  Video object-fit:', videoStyles.objectFit);
        console.log('  Video position:', videoStyles.position);
        console.log('  Video z-index:', videoStyles.zIndex);
        
        // Parent container analysis
        const parentContainer = videoPlayer.parentElement;
        if (parentContainer) {
          const parentStyles = window.getComputedStyle(parentContainer);
          const parentRect = parentContainer.getBoundingClientRect();
          console.log('📦 Parent Container (' + parentContainer.className + '):');
          console.log('  Parent width:', parentRect.width + 'px');
          console.log('  Parent height:', parentRect.height + 'px');
          console.log('  Parent display:', parentStyles.display);
          console.log('  Parent flex-direction:', parentStyles.flexDirection);
          console.log('  Parent align-items:', parentStyles.alignItems);
          console.log('  Parent justify-content:', parentStyles.justifyContent);
        }
        
        // Button overlay analysis
        if (playOverlay) {
          const overlayStyles = window.getComputedStyle(playOverlay);
          const overlayRect = playOverlay.getBoundingClientRect();
          console.log('🎯 Play Overlay:');
          console.log('  Overlay width:', overlayRect.width + 'px');
          console.log('  Overlay height:', overlayRect.height + 'px');
          console.log('  Overlay position:', overlayStyles.position);
          console.log('  Overlay z-index:', overlayStyles.zIndex);
        }
        
        // Check for aspect ratio issues
        const expectedHeight = containerRect.width * (9/16);
        const heightDifference = Math.abs(containerRect.height - expectedHeight);
        console.log('🎯 Container Aspect Ratio Check:');
        console.log('  Expected height for 16:9:', expectedHeight.toFixed(2) + 'px');
        console.log('  Actual height:', containerRect.height + 'px');
        console.log('  Height difference:', heightDifference.toFixed(2) + 'px');
        
        // Enhanced debugging for parent container interference - reuse existing parentContainer
        if (parentContainer) {
          const parentRect = parentContainer.getBoundingClientRect();
          console.log('🔍 Enhanced Parent Container Analysis:');
          console.log('  Parent aspect-ratio:', getComputedStyle(parentContainer).aspectRatio);
          console.log('  Parent max-width:', getComputedStyle(parentContainer).maxWidth);
          console.log('  Expected parent height for 16:9:', (parentRect.width * (9/16)).toFixed(2) + 'px');
        }
        
        // Video content sizing analysis
        console.log('📹 Video Content Analysis:');
        console.log('  Video natural width:', mainVideo.videoWidth || 'Not loaded');
        console.log('  Video natural height:', mainVideo.videoHeight || 'Not loaded');
        if (mainVideo.videoWidth && mainVideo.videoHeight) {
          const videoAspectRatio = (mainVideo.videoWidth / mainVideo.videoHeight).toFixed(2);
          console.log('  Video natural aspect ratio:', videoAspectRatio);
          console.log('  Container aspect ratio:', (containerRect.width / containerRect.height).toFixed(2));
          
          // Check if video is filling container
          const videoFillsContainer = (Math.abs(videoRect.width - containerRect.width) < 2) && 
                                    (Math.abs(videoRect.height - containerRect.height) < 2);
          console.log('  Video fills container:', videoFillsContainer ? '✅ YES' : '❌ NO');
          
          if (!videoFillsContainer) {
            console.error('🚨 VIDEO SIZING ISSUE DETECTED!');
            console.error('  Video element is smaller than container');
            console.error('  Video size:', videoRect.width + 'x' + videoRect.height);
            console.error('  Container size:', containerRect.width + 'x' + containerRect.height);
            console.error('  This explains the "video within container" appearance');
          }
        }
        
        // Check for CSS conflicts
        console.log('🔍 CSS Conflict Check:');
        const computedObjectFit = videoStyles.objectFit;
        const computedPosition = videoStyles.position;
        const computedTop = videoStyles.top;
        const computedLeft = videoStyles.left;
        console.log('  object-fit applied:', computedObjectFit);
        console.log('  position applied:', computedPosition);
        console.log('  top applied:', computedTop);
        console.log('  left applied:', computedLeft);
        
        if (computedObjectFit !== 'cover') {
          console.error('❌ object-fit: cover not applied properly');
        }
        if (computedPosition !== 'absolute') {
          console.error('❌ position: absolute not applied properly');
        }
        
        if (heightDifference > 5) {
          console.error('⚠️ CONTAINER ASPECT RATIO ISSUE DETECTED!');
          console.error('  Container is not maintaining 16:9 ratio');
        } else {
          console.log('✅ CONTAINER ASPECT RATIO PERFECT!');
          console.log('  Container maintains proper 16:9 dimensions (difference: ' + heightDifference.toFixed(1) + 'px)');
          console.log('  🎉 VIDEO SIZING FIX SUCCESSFUL!');
        }
      }, 100);
      
      console.log('🎬 === VIDEO PLAYER INITIALIZATION COMPLETE ===');
    }

    // Smart Phone CTA Functionality
    function initializeSmartPhoneCta() {
      // New emergency button
      const emergencyButton = document.getElementById('emergencyPhoneButton');
      
      // Original elements (kept for compatibility)
      const smartPhoneCta = document.getElementById('smartPhoneCta');
      const buttonState = document.getElementById('buttonState');
      const phoneState = document.getElementById('phoneState');
      const digitInputForm = document.getElementById('digitInputForm');
      const confirmBtn = document.getElementById('confirmBtn');
      const aiSuccessMessage = document.getElementById('aiSuccessMessage');
      
      // Digit input boxes
      const area1 = document.getElementById('area1');
      const area2 = document.getElementById('area2');
      const area3 = document.getElementById('area3');
      const digitBoxes = [area1, area2, area3];
      
      // Emergency button click handler - show phone form with debugging
      if (emergencyButton) {
        console.log('✅ Emergency button found, adding click handler');
        emergencyButton.addEventListener('click', (e) => {
          e.preventDefault();
          console.log('🔥 Emergency button clicked - starting transition');
          console.log('📍 Elements check:', {
            emergencyButton: !!emergencyButton,
            smartPhoneCta: !!smartPhoneCta,
            phoneState: !!phoneState
          });
          
          if (smartPhoneCta && phoneState) {
            console.log('🎯 Starting Apple-style clean transition');
            
            // Step 1: Hide button with Apple-style animation
            emergencyButton.classList.add('hidden');
            
            // Step 2: Show form with clean fade-in (slight delay for overlap)
            setTimeout(() => {
              console.log('📱 Showing form with clean animation');
              smartPhoneCta.classList.add('visible');
              phoneState.classList.add('active');
              phoneState.style.display = 'block';
              
              // Focus phone input after form animation completes
              setTimeout(() => {
                const phoneInput = document.getElementById('phoneInput');
                if (phoneInput) {
                  phoneInput.focus();
                  console.log('✅ Apple-style transition complete - phone input focused');
                } else {
                  console.log('❌ Phone input not found');
                }
              }, 350); // Wait for form animation to complete
              
            }, 50); // Slight delay for smooth overlap
          } else {
            console.log('❌ Required elements not found:', {
              smartPhoneCta: !!smartPhoneCta,
              phoneState: !!phoneState
            });
          }
        });
      } else {
        console.log('❌ Emergency button not found in DOM');
      }
      
      // Professional phone input with real-time formatting
      const phoneInput = document.getElementById('phoneInput');
      const professionalForm = document.getElementById('professionalPhoneForm');
      
      if (phoneInput) {
        // Real-time phone number formatting as user types
        phoneInput.addEventListener('input', (e) => {
          let value = e.target.value.replace(/\D/g, ''); // Remove non-digits
          let formattedValue = '';
          
          if (value.length > 0) {
            if (value.length <= 3) {
              formattedValue = `(${value}`;
            } else if (value.length <= 6) {
              formattedValue = `(${value.slice(0, 3)}) ${value.slice(3)}`;
            } else {
              formattedValue = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
            }
          }
          
          e.target.value = formattedValue;
        });
        
        // Handle backspace properly
        phoneInput.addEventListener('keydown', (e) => {
          if (e.key === 'Backspace') {
            let value = e.target.value;
            let cursorPos = e.target.selectionStart;
            
            // If cursor is after a formatting character, move it back
            if (value[cursorPos - 1] === ')' || value[cursorPos - 1] === ' ' || value[cursorPos - 1] === '-') {
              setTimeout(() => {
                e.target.setSelectionRange(cursorPos - 1, cursorPos - 1);
              }, 0);
            }
          }
        });
      }
      
      // Form submission handler
      if (professionalForm) {
        professionalForm.addEventListener('submit', (e) => {
          e.preventDefault();
          
          const phoneValue = phoneInput.value.replace(/\D/g, '');
          
          if (phoneValue.length === 10) {
            console.log('📞 Valid phone number submitted:', phoneValue);
            
            // Show success message
            if (aiSuccessMessage) {
              // Hide form
              smartPhoneCta.style.display = 'none';
              // Show success message
              aiSuccessMessage.style.display = 'block';
              
              console.log('✅ Success message displayed');
            }
          } else {
            console.log('❌ Invalid phone number - needs 10 digits');
            // Add red border for invalid input
            phoneInput.style.borderColor = '#ef4444';
            setTimeout(() => {
              phoneInput.style.borderColor = '';
            }, 3000);
          }
        });
      }
      
      if (!smartPhoneCta || !buttonState || !phoneState) {
        console.log('⚠️ Smart phone CTA elements not found');
        return;
      }
      
      // State management
      let isPhoneMode = false;
      
      // Professional phone number formatting with advanced masking
      function formatPhoneNumber(value) {
        // Remove all non-digits
        const phoneNumber = value.replace(/\D/g, '');
        
        // Don't format if empty
        if (!phoneNumber) return '';
        
        // Limit to 10 digits max (US phone number)
        const limitedNumber = phoneNumber.substring(0, 10);
        
        // Progressive formatting based on length
        if (limitedNumber.length <= 3) {
          return limitedNumber;
        } else if (limitedNumber.length <= 6) {
          return `(${limitedNumber.slice(0, 3)}) ${limitedNumber.slice(3)}`;
        } else {
          return `(${limitedNumber.slice(0, 3)}) ${limitedNumber.slice(3, 6)}-${limitedNumber.slice(6)}`;
        }
      }
      
      // Enhanced phone validation
      function validatePhoneNumber(phone) {
        const digitsOnly = phone.replace(/\D/g, '');
        return digitsOnly.length === 10;
      }
      
      // Professional input feedback
      function showInputFeedback(input, isValid) {
        const wrapper = input.closest('.phone-input-wrapper');
        if (!wrapper) return;
        
        if (isValid) {
          wrapper.classList.remove('error');
          wrapper.classList.add('valid');
        } else {
          wrapper.classList.remove('valid');
          wrapper.classList.add('error');
        }
      }
      
      // Clear input feedback
      function clearInputFeedback(input) {
        const wrapper = input.closest('.phone-input-wrapper');
        if (wrapper) {
          wrapper.classList.remove('error', 'valid');
        }
      }
      
      // Professional progressive disclosure for button-to-form transition
      if (aiCtaButton && phoneFormContainer && phoneInput) {
        const backButton = document.getElementById('backButton');
        
        // Forward transition: Button to Form
        aiCtaButton.addEventListener('click', function(e) {
          e.preventDefault();
          showPhoneFormProfessionally();
        });
        
        // Reverse transition: Form to Button
        if (backButton) {
          backButton.addEventListener('click', function(e) {
            e.preventDefault();
            hidePhoneFormProfessionally();
          });
        }
        
        function showPhoneFormProfessionally() {
          // Stage 1: Button transitioning state
          aiCtaButton.classList.add('transitioning');
          
          setTimeout(() => {
            // Stage 2: Hide button and show form entering state
            aiCtaButton.classList.add('hidden-smooth');
            phoneFormContainer.classList.add('entering');
            
            setTimeout(() => {
              // Stage 3: Form fully active
              phoneFormContainer.classList.remove('entering');
              phoneFormContainer.classList.add('active');
              
              // Focus with slight delay for smooth UX
              setTimeout(() => {
                phoneInput.focus();
              }, 100);
            }, 100);
          }, 200);
        }
        
        function hidePhoneFormProfessionally() {
          // Stage 1: Form transitioning out
          phoneFormContainer.classList.remove('active');
          phoneFormContainer.classList.add('entering');
          
          setTimeout(() => {
            // Stage 2: Hide form completely
            phoneFormContainer.classList.remove('entering');
            
            // Stage 3: Show button transitioning in
            aiCtaButton.classList.remove('hidden-smooth');
            aiCtaButton.classList.add('transitioning');
            
            setTimeout(() => {
              // Stage 4: Button fully active
              aiCtaButton.classList.remove('transitioning');
              aiCtaButton.focus();
            }, 200);
          }, 200);
        }

        // Enhanced phone input with validation and professional feedback
        phoneInput.addEventListener('input', function(e) {
          const formatted = formatPhoneNumber(e.target.value);
          e.target.value = formatted;
          
          // Real-time validation with visual feedback
          const isValid = validatePhoneNumber(formatted);
          showInputFeedback(e.target, isValid);
        });
        
        // Validation on blur for comprehensive feedback
        phoneInput.addEventListener('blur', function(e) {
          const isValid = validatePhoneNumber(e.target.value);
          showInputFeedback(e.target, isValid);
          
          // Additional feedback for empty or invalid input
          if (!e.target.value.trim()) {
            clearInputFeedback(e.target);
          }
        });
        
        // Clear validation state on focus
        phoneInput.addEventListener('focus', function(e) {
          const wrapper = e.target.closest('.phone-input-wrapper');
          if (wrapper) {
            wrapper.classList.remove('error', 'valid');
          }
        });

        // Enhanced professional form submission with loading states
        if (aiPhoneForm && aiSuccessMessage) {
          aiPhoneForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const phoneValue = phoneInput.value.trim();
            const isValid = validatePhoneNumber(phoneValue);
            
            if (!isValid) {
              showInputFeedback(phoneInput, false);
              phoneInput.focus();
              return;
            }
            
            // Professional loading sequence
            const submitBtn = aiPhoneForm.querySelector('.phone-submit-btn') || 
                             aiPhoneForm.querySelector('[type="submit"]');
            
            if (submitBtn) {
              submitBtn.classList.add('loading-state');
              submitBtn.disabled = true;
            }
            
            // Simulate professional loading with progress feedback
            setTimeout(() => {
              // Hide form with smooth transition
              aiPhoneForm.style.opacity = '0';
              aiPhoneForm.style.transform = 'scale(0.95)';
              
              setTimeout(() => {
                aiPhoneForm.style.display = 'none';
                aiSuccessMessage.classList.add('active');
                
                // Reset form state for potential reuse
                if (submitBtn) {
                  submitBtn.classList.remove('loading-state');
                  submitBtn.disabled = false;
                }
              }, 300);
            }, 1200); // Professional loading duration
          });
        }
      }
      
      // NEW: Smart Phone CTA functionality
      // Phone number validation
      function validatePhoneNumber() {
        const area1Value = area1.value.trim();
        const area2Value = area2.value.trim();
        const area3Value = area3.value.trim();
        
        const isArea1Valid = area1Value.length === 3 && /^\d{3}$/.test(area1Value);
        const isArea2Valid = area2Value.length === 3 && /^\d{3}$/.test(area2Value);
        const isArea3Valid = area3Value.length === 4 && /^\d{4}$/.test(area3Value);
        
        return isArea1Valid && isArea2Valid && isArea3Valid;
      }
      
      // Update confirm button state
      function updateConfirmButton() {
        const isValid = validatePhoneNumber();
        if (confirmBtn) confirmBtn.disabled = !isValid;
      }
      
      // Update digit box styling
      function updateDigitBoxStyle(box) {
        if (!box) return;
        const isCurrentlyFilled = box.value.length === parseInt(box.maxLength);
        const isValidLength = box.value.length <= parseInt(box.maxLength);
        
        // Clear previous states
        box.classList.remove('filled', 'error');
        
        if (isCurrentlyFilled && /^\d+$/.test(box.value)) {
          box.classList.add('filled');
        } else if (box.value.length > 0 && (!isValidLength || !/^\d+$/.test(box.value))) {
          box.classList.add('error');
        }
      }
      
      // Initialize digit box event listeners if they exist
      if (digitBoxes.length > 0 && digitBoxes[0]) {
        digitBoxes.forEach((box, index) => {
          if (!box) return;
          
          // Input event for auto-advance
          box.addEventListener('input', (e) => {
            const nextBox = digitBoxes[index + 1];
            updateDigitBoxStyle(box);
            updateConfirmButton();
            
            // Auto-advance when current box is filled
            if (box.value.length === parseInt(box.maxLength) && nextBox) {
              nextBox.focus();
            }
          });
          
          // Keydown for special key handling
          box.addEventListener('keydown', (e) => {
            const allowedKeys = ['Backspace', 'Delete', 'Tab', 'Escape', 'Enter', 'ArrowLeft', 'ArrowRight'];
            if (!allowedKeys.includes(e.key) && !/\d/.test(e.key)) {
              e.preventDefault();
            }
            
            if (e.key === 'Backspace' && box.value.length === 0 && index > 0) {
              const previousBox = digitBoxes[index - 1];
              if (previousBox) {
                previousBox.focus();
                previousBox.value = '';
                updateDigitBoxStyle(previousBox);
              }
            }
            
            if (e.key === 'Enter' && validatePhoneNumber() && confirmBtn) {
              e.preventDefault();
              confirmBtn.click();
            }
          });
        });
        
        // Button to phone mode transition
        if (buttonState && phoneState) {
          buttonState.addEventListener('click', () => {
            buttonState.classList.add('sliding-out');
            phoneState.classList.add('active');
            setTimeout(() => area1.focus(), 200);
          });
          
          // ESC key to return to button mode
          document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && phoneState.classList.contains('active')) {
              buttonState.classList.remove('sliding-out');
              phoneState.classList.remove('active');
              digitBoxes.forEach(box => {
                if (box) {
                  box.value = '';
                  box.classList.remove('filled', 'error');
                }
              });
              updateConfirmButton();
            }
          });
        }
        
        // Initialize confirm button state
        updateConfirmButton();
        
        // Form submission handling
        if (digitInputForm && confirmBtn) {
          digitInputForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!validatePhoneNumber()) {
              // Highlight invalid boxes
              digitBoxes.forEach(box => {
                if (box && box.value.length !== parseInt(box.maxLength)) {
                  box.classList.add('error');
                }
              });
              return;
            }
            
            // Get phone number
            const phoneNumber = `(${area1.value}) ${area2.value}-${area3.value}`;
            console.log('📞 Submitting phone number:', phoneNumber);
            
            // Show loading state
            confirmBtn.disabled = true;
            confirmBtn.textContent = 'Calling...';
            
            // Simulate loading
            setTimeout(() => {
              // Hide phone state and show success
              if (phoneState) {
                phoneState.style.opacity = '0';
                phoneState.style.transform = 'scale(0.95)';
              }
              
              setTimeout(() => {
                if (phoneState) phoneState.style.display = 'none';
                if (aiSuccessMessage) aiSuccessMessage.classList.add('active');
                
                // Reset form state
                confirmBtn.disabled = false;
                confirmBtn.textContent = 'Call Me';
                if (phoneState) {
                  phoneState.style.opacity = '1';
                  phoneState.style.transform = 'scale(1)';
                  phoneState.style.display = 'flex';
                }
                
                // Return to button state
                if (buttonState && phoneState) {
                  buttonState.classList.remove('sliding-out');
                  phoneState.classList.remove('active');
                  digitBoxes.forEach(box => {
                    if (box) {
                      box.value = '';
                      box.classList.remove('filled', 'error');
                    }
                  });
                  updateConfirmButton();
                }
              }, 300);
            }, 1200);
          });
        }
      }
    }

    // Enhanced confirmation detection - multiple detection methods
    function setupConfirmationDetection() {
      if (!isProduction) console.log('🔍 Setting up enhanced confirmation detection...');
      
      // Method 1: DOM text observer for "This meeting is scheduled"
      const textObserver = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.type === 'childList' || mutation.type === 'characterData') {
            const calContainer = document.getElementById('my-cal-inline-30min');
            if (calContainer) {
              const textContent = calContainer.textContent || '';
              if (textContent.includes('This meeting is scheduled') || 
                  textContent.includes('Meeting confirmed') ||
                  textContent.includes('successfully scheduled') ||
                  textContent.includes('confirmed')) {
                console.log('🎯 CONFIRMATION via text observer:', textContent);
                textObserver.disconnect();
                window.createConfirmationPage({detail: {source: 'text_observer', text: textContent}});
              }
            }
          }
        });
      });
      
      // Start observing
      const calContainer = document.getElementById('my-cal-inline-30min');
      if (calContainer) {
        textObserver.observe(calContainer, {
          childList: true,
          subtree: true,
          characterData: true
        });
      }
      
      // Stop text observer after 5 minutes
      setTimeout(() => {
        textObserver.disconnect();
        console.log('⏰ Text observer timeout');
      }, 300000);
    }
    
    // Note: setupConfirmationDetection now called from initializeCalendar for better timing
    
    // PHASE 1: Intersection Observer Implementation - Professional Lazy Loading
    let calendarInitialized = false;
    
    // Create Intersection Observer for lazy loading
    const calendarObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting && !calendarInitialized) {
          if (!isProduction) console.log('🚀 Calendar section visible - Cal.com already initialized');
          
          calendarInitialized = true;
          observer.unobserve(entry.target); // Stop observing once initialized
          
          // Cal.com is already initialized in DOMContentLoaded - no need to call again
          console.log('✅ Calendar lazy loading completed');
        }
      });
    }, {
      // Trigger when 10% of calendar section is visible
      threshold: 0.1,
      // Add some margin for smoother experience
      rootMargin: '50px'
    });
    
    // Start observing calendar container when DOM is ready
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        const calendarContainer = document.querySelector('.calendar-container');
        if (calendarContainer) {
          calendarObserver.observe(calendarContainer);
          if (!isProduction) console.log('✅ Calendar lazy loading observer activated');
        }
      });
    } else {
      const calendarContainer = document.querySelector('.calendar-container');
      if (calendarContainer) {
        calendarObserver.observe(calendarContainer);
        if (!isProduction) console.log('✅ Calendar lazy loading observer activated');
      }
    }

    // PROFESSIONAL CSS CONFLICT CLEANUP - Phase 4
    function cleanupConflictingStyles() {
      console.log('🧹 CSS CLEANUP: Starting comprehensive conflict resolution...');
      
      // Remove any existing CSS injection that might be causing conflicts
      const existingStyles = document.querySelectorAll('style[id*="phone"], style[id*="cursor"]');
      existingStyles.forEach(style => style.remove());
      console.log('✅ CSS CLEANUP: Removed existing phone/cursor style injections');
      
      // Inject comprehensive cursor fix CSS to override ALL conflicts
      const cursorFixCSS = document.createElement('style');
      cursorFixCSS.id = 'professional-cursor-fix';
      cursorFixCSS.textContent = `
        /* PROFESSIONAL CURSOR FIX - HIGHEST PRIORITY */
        #phoneInput,
        input[type="tel"]#phoneInput {
          cursor: text !important;
          -webkit-user-select: text !important;
          -moz-user-select: text !important;
          user-select: text !important;
          pointer-events: auto !important;
        }
        
        #phoneInput:hover,
        #phoneInput:focus {
          cursor: text !important;
        }
        
        #callButton,
        button#callButton {
          cursor: pointer !important;
          -webkit-user-select: none !important;
          -moz-user-select: none !important;
          user-select: none !important;
          pointer-events: auto !important;
        }
        
        /* PLACEHOLDER STYLING - Match border color */
        #phoneInput::placeholder {
          color: rgba(255, 255, 255, 0.15) !important;
        }
        
        #phoneInput::-webkit-input-placeholder {
          color: rgba(255, 255, 255, 0.15) !important;
        }
        
        #phoneInput::-moz-placeholder {
          color: rgba(255, 255, 255, 0.15) !important;
          opacity: 1 !important;
        }
        
        /* CALL BUTTON STATES - Apple-like sophistication */
        #callButton.disabled {
          cursor: not-allowed !important;
          background: rgba(255, 255, 255, 0.15) !important;
          color: rgba(255, 255, 255, 0.5) !important;
          opacity: 0.6 !important;
        }
        
        #callButton.enabled {
          cursor: pointer !important;
          background: rgba(255, 255, 255, 0.9) !important;
          color: #333333 !important;
          opacity: 1 !important;
        }
        
        #callButton.enabled:hover {
          cursor: pointer !important;
          background: rgba(255, 255, 255, 1) !important;
          color: #000000 !important;
          transform: translateY(-1px) !important;
        }
        
        #callButton.disabled:hover {
          cursor: not-allowed !important;
          background: rgba(255, 255, 255, 0.15) !important;
          color: rgba(255, 255, 255, 0.5) !important;
          transform: none !important;
        }
        
        /* APPLE-LIKE PULSING ANIMATION */
        @keyframes pulse {
          0%, 100% { 
            opacity: 1;
            transform: scale(1);
          }
          50% { 
            opacity: 0.8;
            transform: scale(1.02);
          }
        }
        
        #callButton.calling {
          animation: pulse 2s infinite;
          background: rgba(34, 197, 94, 0.9) !important;
          color: white !important;
        }
        
        #phoneFormContainer,
        #phoneComponentContainer {
          cursor: auto !important;
          pointer-events: auto !important;
        }
        
        /* Prevent any container from blocking interactions */
        .cookie-consent-banner,
        .cookie-consent-modal {
          pointer-events: auto !important;
        }
        
        .cookie-consent-banner * {
          pointer-events: auto !important;
        }
        
        /* Restore General Sans font properly */
        #phoneInput,
        #callButton,
        #ctaButton,
        #statusMessage {
          font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif !important;
        }
        
        /* AGGRESSIVE CURSOR ENFORCEMENT - NUCLEAR OPTION */
        #phoneFormContainer * {
          cursor: inherit !important;
        }
        
        #phoneInput,
        #phoneInput:hover,
        #phoneInput:focus,
        #phoneInput:active,
        input#phoneInput,
        input[type="tel"]#phoneInput,
        input[placeholder*="555"]#phoneInput {
          cursor: text !important;
        }
        
        #callButton,
        #callButton:hover,
        #callButton:focus,
        #callButton:active,
        button#callButton,
        button[type="button"]#callButton {
          cursor: pointer !important;
        }
        
        /* OVERRIDE ALL POSSIBLE CONTAINER CURSOR CONFLICTS */
        div[id*="phone"] input[type="tel"] {
          cursor: text !important;
        }
        
        div[id*="phone"] button {
          cursor: pointer !important;
        }
      `;
      
      document.head.appendChild(cursorFixCSS);
      console.log('✅ CSS CLEANUP: Injected professional cursor fix CSS');
      
      // Also check for cookie consent CSS conflicts
      const cookieCSS = document.querySelector('link[href*="cookie-consent"]');
      if (cookieCSS) {
        console.log('⚠️ CSS CLEANUP: Cookie consent CSS detected - may cause conflicts');
        
        // Add specific overrides for cookie consent conflicts
        const cookieOverrideCSS = document.createElement('style');
        cookieOverrideCSS.id = 'cookie-consent-override';
        cookieOverrideCSS.textContent = `
          /* Override cookie consent font conflicts */
          #phoneInput {
            font-family: Arial, Helvetica, sans-serif !important;
            cursor: text !important;
          }
          
          #callButton {
            font-family: Arial, Helvetica, sans-serif !important;
            cursor: pointer !important;
          }
        `;
        document.head.appendChild(cookieOverrideCSS);
        console.log('✅ CSS CLEANUP: Applied cookie consent conflict overrides');
      }
    }

    // SIMPLIFIED PHONE COMPONENT INITIALIZATION  
    // Event delegation handles all interactions, this just verifies elements exist
    function initPhoneComponent() {
      console.log('📱 Initializing Phone Component System (Event Delegation Mode)...');
      
      const elements = {
        ctaButton: document.getElementById('ctaButton'),
        buttonContainer: document.getElementById('buttonContainer'),
        phoneFormContainer: document.getElementById('phoneFormContainer'),
        phoneInput: document.getElementById('phoneInput'),
        callButton: document.getElementById('callButton'),
        statusMessage: document.getElementById('statusMessage')
      };
      
      console.log('🔍 Elements found:', Object.entries(elements).reduce((acc, [key, val]) => {
        acc[key] = !!val;
        return acc;
      }, {}));
      
      // Clean up any conflicting styles first
      cleanupConflictingStyles();
      
      // Simple cursor verification - no complex overrides needed
      if (elements.phoneInput) {
        console.log('✅ Phone input found - cursor should work with inline styles');
      }
      
      if (elements.callButton) {
        console.log('✅ Call button found - cursor should work with inline styles');
      }
      
      // Try to add direct listeners during initialization too
      setTimeout(() => {
        addDirectEventListeners();
      }, 500);
      
      // Simple debugging without complex overlays
      console.log('📱 Phone component initialized with clean inline styles');
      
      console.log('✅ Phone Component System initialized (relying on event delegation + direct listeners + debugging)');
      return true;
    }


    // TEST: Verify script is loading
    console.log('🔥 SCRIPT IS LOADING - This should appear immediately!');
    
    // SMART INITIALIZATION: Wait for dynamic confirmation content
    function waitForDynamicContent() {
      console.log('⏳ Waiting for dynamic confirmation content to be created...');
      
      // Check if confirmation page elements exist (means dynamic content was created)
      const checkForContent = () => {
        const enhancedConfirmation = document.querySelector('.enhanced-confirmation');
        const phoneContainer = document.getElementById('phoneComponentContainer');
        
        if (enhancedConfirmation && phoneContainer) {
          console.log('✅ Dynamic confirmation content found, initializing phone component...');
          initPhoneComponent();
          return true;
        }
        return false;
      };
      
      // Try immediately first
      if (checkForContent()) return;
      
      // If not found, wait and check periodically
      let attempts = 0;
      const maxAttempts = 50; // 5 seconds total
      const checkInterval = setInterval(() => {
        attempts++;
        console.log(`🔍 Attempt ${attempts}/${maxAttempts}: Looking for dynamic content...`);
        
        if (checkForContent() || attempts >= maxAttempts) {
          clearInterval(checkInterval);
          if (attempts >= maxAttempts) {
            console.log('⚠️ Timeout waiting for dynamic content, trying fallback initialization...');
            initPhoneComponent(); // Try anyway as fallback
          }
        }
      }, 100); // Check every 100ms
    }
    
    // Initialize when DOM is ready, then wait for dynamic content
    if (document.readyState === 'loading') {
      console.log('📄 DOM still loading, adding DOMContentLoaded listener');
      document.addEventListener('DOMContentLoaded', waitForDynamicContent);
    } else {
      console.log('📄 DOM already loaded, waiting for dynamic content');
      waitForDynamicContent();
    }
    
    // PHASE 2: BULLETPROOF CALL BUTTON DETECTION - Multiple event methods
    function addDirectEventListeners() {
      console.log('🎯 Adding bulletproof direct event listeners...');
      
      const callButton = document.getElementById('callButton');
      const phoneInput = document.getElementById('phoneInput');
      const statusMessage = document.getElementById('statusMessage');
      
      if (callButton) {
        console.log('🔲 Setting up multiple event detection for Call button...');
        
        // Remove any existing listeners first
        callButton.onclick = null;
        
        // BULLETPROOF CALL HANDLER - Shared function with deduplication
        let isProcessing = false;
        const handleCallRequest = function(eventType) {
          // Prevent duplicate calls within 1000ms
          if (isProcessing) {
            console.log(`🚫 BLOCKED DUPLICATE (${eventType}): Already processing, ignoring`);
            return;
          }
          
          isProcessing = true;
          console.log(`🚨 DIRECT LISTENER (${eventType}): Call Me button activated!`);
          
          // Reset the processing flag after 1 second
          setTimeout(() => {
            isProcessing = false;
            console.log('🔄 Ready for next call request');
          }, 1000);
          
          // Visual feedback - flash border
          callButton.style.border = '2px solid #22c55e';
          setTimeout(() => {
            callButton.style.border = '';
          }, 200);
          
          if (phoneInput) {
            const phoneValue = phoneInput.value.replace(/\D/g, '');
            console.log('📱 DIRECT: Phone value:', phoneValue, 'Length:', phoneValue.length);
            
            if (phoneValue.length !== 10) {
              if (statusMessage) {
                statusMessage.textContent = 'Please enter a valid 10-digit phone number';
                statusMessage.style.color = '#ef4444';
              }
              console.log('❌ DIRECT: Invalid phone number length:', phoneValue.length);
              return;
            }
            
            // APPLE DESIGN: Sophisticated success state - Execute call functionality directly
            console.log('🍎 DIRECT HANDLER: Executing call functionality directly (event delegation unavailable due to stopPropagation)');
            
            // FIRST: Send data to n8n webhook for AI agent workflow
            console.log('📡 N8N WEBHOOK: Sending AI discovery call data to n8n...');
            
            // Get matching data from localStorage/sessionStorage (from previous questionnaire)
            const getStoredData = () => {
              try {
                // Check various storage keys that might contain questionnaire data
                const calMetadata = JSON.parse(localStorage.getItem('cal_metadata') || '{}');
                const formData = JSON.parse(localStorage.getItem('form_data') || '{}');
                const sessionData = JSON.parse(sessionStorage.getItem('questionnaireData') || '{}');
                
                return {
                  email: calMetadata.email || formData.email || sessionData.email || '',
                  name: calMetadata.name || formData.name || sessionData.name || '',
                  company: calMetadata.company || formData.company || sessionData.company || '',
                  role: calMetadata.role || formData.role || sessionData.role || '',
                  teamSize: calMetadata.teamSize || formData.teamSize || sessionData.teamSize || '',
                  challenge: calMetadata.challenge || formData.challenge || sessionData.challenge || ''
                };
              } catch (e) {
                console.warn('Could not retrieve stored questionnaire data:', e);
                return {};
              }
            };
            
            const storedData = getStoredData();
            const webhookData = {
              phone: phoneValue.replace(/\D/g, ''), // Clean phone number
              formatted_phone: phoneInput.value, // Formatted display version
              source: "ai_discovery_call",
              timestamp: new Date().toISOString(),
              matching_data: {
                email: storedData.email,
                name: storedData.name,
                company: storedData.company,
                role: storedData.role,
                teamSize: storedData.teamSize,
                challenge: storedData.challenge
              },
              call_request: {
                type: "ai_discovery_callback",
                requested_at: new Date().toISOString(),
                page_source: "ai_discovery_call_section",
                user_agent: navigator.userAgent,
                referrer: document.referrer || 'direct'
              }
            };
            
            // Use production webhook URL only
            const webhookUrl = 'https://n8n.umbryth.com/webhook/d1c24b37-79c4-4a4a-8fae-34008bf985a0';
            
            console.log('📡 Webhook payload:', webhookData);
            console.log('📡 Sending to:', webhookUrl);
            
            // Send webhook with enhanced debugging
            console.log('🚀 WEBHOOK: Starting fetch request...');
            fetch(webhookUrl, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json',
              },
              body: JSON.stringify(webhookData)
            })
            .then(response => {
              console.log('📡 WEBHOOK RESPONSE:', {
                status: response.status,
                statusText: response.statusText,
                ok: response.ok,
                url: response.url
              });
              
              if (response.ok) {
                console.log('✅ N8N WEBHOOK: Data sent successfully to AI agent workflow');
                return response.text();
              } else {
                console.warn('⚠️ N8N WEBHOOK: Non-200 response:', response.status, response.statusText);
                return response.text();
              }
            })
            .then(responseText => {
              console.log('📡 WEBHOOK RESPONSE BODY:', responseText);
            })
            .catch(error => {
              console.error('❌ N8N WEBHOOK: Network error:', error);
              console.error('❌ Error details:', {
                message: error.message,
                name: error.name,
                stack: error.stack
              });
            });
            
            // Execute the call functionality directly since we stopped propagation
            const statusMessage = document.getElementById('statusMessage');
            const phoneFormContainer = document.getElementById('phoneFormContainer');
            
            console.log('🎯 CLEAN UX: Transitioning to calling state - hiding form, showing status only');
            
            // Check if calling state already exists to prevent duplicates
            const existingCallingContainer = document.getElementById('callingStateContainer');
            if (existingCallingContainer) {
              console.log('⚠️ Calling state already active, ignoring duplicate call');
              return;
            }
            
            // Hide the entire phone form with smooth transition - EXACT ORIGINAL TIMING
            if (phoneFormContainer) {
              phoneFormContainer.style.transition = 'opacity 0.25s ease-in-out, transform 0.25s ease-in-out';
              phoneFormContainer.style.opacity = '0';
              phoneFormContainer.style.transform = 'translateY(5px)'; // Match button→form transition
              phoneFormContainer.style.pointerEvents = 'none';
              
              // After transition, replace with clean calling state
              setTimeout(() => {
                phoneFormContainer.style.display = 'none';
                
                // Create clean calling state container with improved styling
                const callingContainer = document.createElement('div');
                callingContainer.id = 'callingStateContainer';
                callingContainer.style.cssText = `
                  position: absolute;
                  top: 0;
                  left: 0;
                  width: 100%;
                  height: 48px;
                  display: flex;
                  align-items: center;
                  justify-content: center;
                  background: rgba(34, 197, 94, 0.15);
                  border: 1px solid rgba(34, 197, 94, 0.3);
                  border-radius: 8px;
                  opacity: 0;
                  transform: translateY(5px);
                  transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out;
                  z-index: 10;
                  box-sizing: border-box;
                `;
                
                // Simplified calling status - matches button size
                callingContainer.innerHTML = `
                  <div style="
                    display: flex;
                    align-items: center;
                    gap: 8px;
                    font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif;
                    font-size: 14px;
                    font-weight: 600;
                    color: #22c55e;
                  ">
                    <div style="
                      width: 8px;
                      height: 8px;
                      background: #22c55e;
                      border-radius: 50%;
                      animation: pulse 2s infinite;
                    "></div>
                    AI agent will call you within 60 seconds
                  </div>
                `;
                
                // Insert the calling container in same position as phone form
                phoneFormContainer.parentNode.insertBefore(callingContainer, phoneFormContainer);
                
                // Animate in
                setTimeout(() => {
                  callingContainer.style.opacity = '1';
                  callingContainer.style.transform = 'translateY(0)';
                }, 100);
                
                console.log('✅ CLEAN UX: Phone form hidden, clean calling state displayed (no duplicates)');
              }, 250); // Match transition duration exactly
            } else {
              // Fallback: just update status message if container not found
              if (statusMessage) {
                statusMessage.textContent = 'AI agent will call you within 60 seconds...';
                statusMessage.style.color = '#22c55e';
                statusMessage.style.fontSize = '16px';
                statusMessage.style.fontWeight = '600';
              }
            }
            
            console.log('✅ DIRECT HANDLER: Clean calling state initiated');
          } else {
            console.log('❌ DIRECT: Phone input not found during call request');
          }
        };
        
        // PRIMARY METHOD: Standard click (handles most cases)
        callButton.addEventListener('click', function(e) {
          console.log('🖱️ PRIMARY: Click detected');
          e.preventDefault();
          e.stopPropagation();
          handleCallRequest('CLICK');
        });
        
        // MOBILE FALLBACK: Touch events (only if click doesn't work)
        let touchHandled = false;
        callButton.addEventListener('touchend', function(e) {
          if (!touchHandled) {
            console.log('📱 MOBILE FALLBACK: Touch end detected');
            touchHandled = true;
            e.preventDefault();
            e.stopPropagation();
            // Delay to allow click event to fire first, prevent if it does
            setTimeout(() => {
              if (!isProcessing) {
                handleCallRequest('TOUCH');
              }
              touchHandled = false;
            }, 10);
          }
        });
        
        // Add hover effects with debugging
        callButton.addEventListener('mouseenter', function() {
          console.log('👆 DIRECT: Mouse enter Call button');
          this.style.background = '#1e40af';
          this.style.transform = 'scale(1.02)';
        });
        
        callButton.addEventListener('mouseleave', function() {
          console.log('👋 DIRECT: Mouse leave Call button');
          if (this.textContent === 'Call Me') {
            this.style.background = '#2563eb';
            this.style.transform = 'scale(1)';
          }
        });
        
        console.log('✅ Optimized event handlers added to Call button (click + mobile fallback)');
        console.log('🚫 Duplicate event protection: 1-second cooldown prevents multiple calls');
      } else {
        console.log('❌ Call button not found for direct listeners');
      }
      
      if (phoneInput) {
        // Force cursor styling on hover/focus
        phoneInput.addEventListener('mouseenter', function() {
          console.log('👆 DIRECT: Mouse enter phone input');
          this.style.setProperty('cursor', 'text', 'important');
        });
        
        phoneInput.addEventListener('focus', function() {
          console.log('🎯 DIRECT: Phone input focused');
          this.style.setProperty('cursor', 'text', 'important');
        });
        
        console.log('✅ Direct listeners added to Phone input');
      }
      
      console.log('🎯 Direct event listeners setup complete');
    }

    // ADVANCED: Event delegation for dynamic content (bulletproof backup)
    console.log('🛡️ Setting up event delegation for dynamic phone button...');
    
    // Use event delegation on document body to catch any button clicks
    document.body.addEventListener('click', function(event) {
      console.log('🖱️ CLICK DETECTED:', {
        id: event.target.id || 'no-id', 
        tagName: event.target.tagName,
        className: event.target.className || 'no-class',
        textContent: event.target.textContent?.trim() || 'no-text',
        pointerEvents: getComputedStyle(event.target).pointerEvents,
        cursor: getComputedStyle(event.target).cursor,
        element: event.target
      });
      
      // Check if clicked element is our CTA button
      if (event.target && event.target.id === 'ctaButton') {
        console.log('🎯 EVENT DELEGATION: CTA Button clicked via delegation!');
        event.preventDefault();
        
        // Apply the transition
        const buttonContainer = document.getElementById('buttonContainer');
        const phoneFormContainer = document.getElementById('phoneFormContainer');
        const phoneInput = document.getElementById('phoneInput');
        
        if (buttonContainer && phoneFormContainer) {
          console.log('🔄 PROFESSIONAL TRANSITION: Starting clean form transition with complete isolation...');
          
          // Step 1: Completely disable and hide button container - EXACT ORIGINAL TIMING
          buttonContainer.style.transition = 'opacity 0.25s ease-in-out, transform 0.25s ease-in-out';
          buttonContainer.style.opacity = '0';
          buttonContainer.style.transform = 'translateY(5px)';
          buttonContainer.style.pointerEvents = 'none';
          buttonContainer.style.zIndex = '1'; // Lower priority
          buttonContainer.style.visibility = 'hidden'; // Complete isolation
          
          // Step 2: Enable form container with highest priority - EXACT ORIGINAL TIMING  
          phoneFormContainer.style.transition = 'opacity 0.25s ease-in-out, transform 0.25s ease-in-out';
          phoneFormContainer.style.opacity = '1';
          phoneFormContainer.style.transform = 'translateY(0)';
          phoneFormContainer.style.pointerEvents = 'auto';
          phoneFormContainer.style.zIndex = '10'; // Highest priority
          phoneFormContainer.style.visibility = 'visible';
          
          // PROFESSIONAL CURSOR & INTERACTION FIX - Phase 3
          setTimeout(() => {
            const callButton = document.getElementById('callButton');
            const phoneInput = document.getElementById('phoneInput');
            const phoneFormContainer = document.getElementById('phoneFormContainer');
            
            console.log('🔧 PROFESSIONAL FIX: Applying comprehensive cursor and interaction fixes...');
            
            // Fix phone input field cursor and interactions
            if (phoneInput) {
              // Force proper cursor behavior with multiple fallbacks
              phoneInput.style.setProperty('pointer-events', 'auto', 'important');
              phoneInput.style.setProperty('cursor', 'text', 'important');
              phoneInput.style.setProperty('-webkit-user-select', 'text', 'important');
              phoneInput.style.setProperty('-moz-user-select', 'text', 'important');
              phoneInput.style.setProperty('user-select', 'text', 'important');
              
              // Add hover state cursor enforcement
              phoneInput.addEventListener('mouseenter', function() {
                this.style.setProperty('cursor', 'text', 'important');
                console.log('🖱️ CURSOR FIX: Phone input hover - text cursor applied');
              });
              
              phoneInput.addEventListener('mouseleave', function() {
                this.style.setProperty('cursor', 'text', 'important');
              });
              
              phoneInput.focus();
              console.log('✅ CURSOR FIX: Phone input - text cursor and interactions fixed');
            }
            
            // APPLE-LIKE BUTTON STATE MANAGEMENT
            if (callButton && phoneInput) {
              console.log('🍎 APPLE DESIGN: Initializing sophisticated button state management...');
              
              // Initialize button as disabled
              callButton.className = 'disabled';
              callButton.style.setProperty('cursor', 'not-allowed', 'important');
              
              // Phone input validation function
              const validatePhoneInput = () => {
                const phoneValue = phoneInput.value.replace(/\D/g, ''); // Remove non-digits
                const isValid = phoneValue.length >= 10; // At least 10 digits
                
                if (isValid && !callButton.classList.contains('enabled')) {
                  // Enable button with Apple-like transition
                  callButton.classList.remove('disabled');
                  callButton.classList.add('enabled');
                  callButton.style.setProperty('cursor', 'pointer', 'important');
                  console.log('✅ APPLE DESIGN: Button enabled - phone number valid');
                } else if (!isValid && !callButton.classList.contains('disabled')) {
                  // Disable button 
                  callButton.classList.remove('enabled');
                  callButton.classList.add('disabled');
                  callButton.style.setProperty('cursor', 'not-allowed', 'important');
                  console.log('❌ APPLE DESIGN: Button disabled - phone number invalid');
                }
              };
              
              // Real-time phone validation
              phoneInput.addEventListener('input', validatePhoneInput);
              phoneInput.addEventListener('keyup', validatePhoneInput);
              phoneInput.addEventListener('paste', () => setTimeout(validatePhoneInput, 10));
              
              // Initial validation
              validatePhoneInput();
              
              console.log('✅ APPLE DESIGN: Sophisticated button state management active');
            }
            
            // Fix form container to ensure no blocking
            if (phoneFormContainer) {
              phoneFormContainer.style.setProperty('pointer-events', 'auto', 'important');
              phoneFormContainer.style.setProperty('cursor', 'auto', 'important');
              console.log('✅ CURSOR FIX: Form container interactions enabled');
            }
            
            // REAL-TIME CURSOR MONITORING SYSTEM - AGGRESSIVE ENFORCEMENT
            console.log('🔄 REAL-TIME MONITOR: Starting aggressive cursor enforcement...');
            
            // Continuous cursor enforcement for phone input
            if (phoneInput) {
              const enforceInputCursor = () => {
                const currentCursor = getComputedStyle(phoneInput).cursor;
                if (currentCursor !== 'text') {
                  phoneInput.style.setProperty('cursor', 'text', 'important');
                  console.log('⚡ REAL-TIME FIX: Input cursor corrected from', currentCursor, 'to text');
                }
              };
              
              // Multiple enforcement strategies
              setInterval(enforceInputCursor, 200); // Every 200ms
              phoneInput.addEventListener('mousemove', enforceInputCursor);
              phoneInput.addEventListener('mouseenter', enforceInputCursor);
              phoneInput.addEventListener('mouseover', enforceInputCursor);
              
              console.log('✅ REAL-TIME MONITOR: Phone input cursor enforcement active');
            }
            
            // Continuous cursor enforcement for call button
            if (callButton) {
              const enforceButtonCursor = () => {
                const currentCursor = getComputedStyle(callButton).cursor;
                if (currentCursor !== 'pointer') {
                  callButton.style.setProperty('cursor', 'pointer', 'important');
                  console.log('⚡ REAL-TIME FIX: Button cursor corrected from', currentCursor, 'to pointer');
                }
              };
              
              // Multiple enforcement strategies
              setInterval(enforceButtonCursor, 200); // Every 200ms
              callButton.addEventListener('mousemove', enforceButtonCursor);
              callButton.addEventListener('mouseenter', enforceButtonCursor);
              callButton.addEventListener('mouseover', enforceButtonCursor);
              
              console.log('✅ REAL-TIME MONITOR: Call button cursor enforcement active');
            }
            
            // Run diagnostics to verify fixes
            if (cssInspector) {
              const report = cssInspector.inspectFormInteractions();
              console.log('📊 POST-FIX ANALYSIS:', report);
            }
            
            if (overlayDetector) {
              const blockers = overlayDetector.detectFormBlockers();
              if (blockers.length === 0) {
                console.log('✅ OVERLAY CHECK: No blocking elements detected');
              } else {
                console.log('⚠️ OVERLAY CHECK: Still found potential blockers:', blockers);
              }
            }
            
            // Add direct event listeners as backup
            addDirectEventListeners();
            
          }, 250);
          
          console.log('✅ EVENT DELEGATION: Transition completed successfully!');
        } else {
          console.log('❌ EVENT DELEGATION: Missing container elements');
        }
      }
      
      // Also handle Call Me button - comprehensive detection
      const isCallButton = event.target && (
        event.target.id === 'callButton' || 
        event.target.textContent?.includes('Call Me') ||
        event.target.textContent?.includes('Calling')
      );
      
      if (isCallButton) {
        console.log('📞 APPLE DESIGN: Call Me button clicked!', {
          id: event.target.id,
          textContent: event.target.textContent,
          enabled: event.target.classList.contains('enabled')
        });
        
        event.preventDefault();
        event.stopPropagation();
        
        // Check if button is enabled (either by class or by checking phone input)
        const phoneInput = document.getElementById('phoneInput');
        const phoneValue = phoneInput ? phoneInput.value.replace(/\D/g, '') : '';
        const isButtonEnabled = event.target.classList.contains('enabled') || phoneValue.length >= 10;
        
        console.log('🔍 DEBUG: Button state check:', {
          hasEnabledClass: event.target.classList.contains('enabled'),
          phoneValueLength: phoneValue.length,
          isButtonEnabled: isButtonEnabled,
          classList: event.target.className
        });
        
        if (!isButtonEnabled) {
          console.log('❌ APPLE DESIGN: Button disabled - ignoring click');
          // Show validation message
          const statusMessage = document.getElementById('statusMessage');
          if (statusMessage) {
            statusMessage.textContent = 'Please enter a complete phone number';
            statusMessage.style.color = '#ef4444';
          }
          return;
        }
        
        const statusMessage = document.getElementById('statusMessage');
        const callButton = event.target;
        
        if (phoneInput) {
          
          if (phoneValue.length < 10) {
            // Show error message ONLY in status, don't change button
            if (statusMessage) {
              statusMessage.textContent = 'Please enter a complete phone number';
              statusMessage.style.color = '#ef4444';
            }
            console.log('❌ APPLE DESIGN: Invalid phone number length:', phoneValue.length);
            return;
          }
          
          // APPLE-LIKE SUCCESS ANIMATION - Only change button, not entire section
          console.log('🍎 APPLE DESIGN: Starting sophisticated call animation...');
          
          // FIRST: Send data to n8n webhook for AI agent workflow
          console.log('📡 N8N WEBHOOK (EVENT DELEGATION): Sending AI discovery call data to n8n...');
          
          const phoneValue = phoneInput.value.replace(/\D/g, '');
          
          // Get matching data from localStorage/sessionStorage (from previous questionnaire)
          const getStoredData = () => {
            try {
              const calMetadata = JSON.parse(localStorage.getItem('cal_metadata') || '{}');
              const formData = JSON.parse(localStorage.getItem('form_data') || '{}');
              const sessionData = JSON.parse(sessionStorage.getItem('questionnaireData') || '{}');
              
              return {
                email: calMetadata.email || formData.email || sessionData.email || '',
                name: calMetadata.name || formData.name || sessionData.name || '',
                company: calMetadata.company || formData.company || sessionData.company || '',
                role: calMetadata.role || formData.role || sessionData.role || '',
                teamSize: calMetadata.teamSize || formData.teamSize || sessionData.teamSize || '',
                challenge: calMetadata.challenge || formData.challenge || sessionData.challenge || ''
              };
            } catch (e) {
              console.warn('Could not retrieve stored questionnaire data:', e);
              return {};
            }
          };
          
          const storedData = getStoredData();
          const webhookData = {
            phone: phoneValue,
            formatted_phone: phoneInput.value,
            source: "ai_discovery_call",
            timestamp: new Date().toISOString(),
            matching_data: {
              email: storedData.email,
              name: storedData.name,
              company: storedData.company,
              role: storedData.role,
              teamSize: storedData.teamSize,
              challenge: storedData.challenge
            },
            call_request: {
              type: "ai_discovery_callback",
              requested_at: new Date().toISOString(),
              page_source: "ai_discovery_call_section",
              user_agent: navigator.userAgent,
              referrer: document.referrer || 'direct'
            }
          };
          
          // Use production webhook URL only
          const webhookUrl = 'https://n8n.umbryth.com/webhook/d1c24b37-79c4-4a4a-8fae-34008bf985a0';
          
          console.log('📡 EVENT DELEGATION Webhook payload:', webhookData);
          
          // Send webhook with enhanced debugging
          console.log('🚀 EVENT DELEGATION WEBHOOK: Starting fetch request...');
          fetch(webhookUrl, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify(webhookData)
          })
          .then(response => {
            console.log('📡 EVENT DELEGATION WEBHOOK RESPONSE:', {
              status: response.status,
              statusText: response.statusText,
              ok: response.ok,
              url: response.url
            });
            
            if (response.ok) {
              console.log('✅ N8N WEBHOOK (EVENT DELEGATION): Data sent successfully');
              return response.text();
            } else {
              console.warn('⚠️ N8N WEBHOOK (EVENT DELEGATION): Non-200 response:', response.status, response.statusText);
              return response.text();
            }
          })
          .then(responseText => {
            console.log('📡 EVENT DELEGATION WEBHOOK RESPONSE BODY:', responseText);
          })
          .catch(error => {
            console.error('❌ N8N WEBHOOK (EVENT DELEGATION): Network error:', error);
            console.error('❌ Event Delegation Error details:', {
              message: error.message,
              name: error.name,
              stack: error.stack
            });
          });
          
          // Hide phone form and show clean calling state
          const phoneFormContainer = document.getElementById('phoneFormContainer');
          
          console.log('🎯 EVENT DELEGATION: Transitioning to clean calling state');
          
          // Check if calling state already exists to prevent duplicates
          const existingCallingContainer = document.getElementById('callingStateContainer');
          if (existingCallingContainer) {
            console.log('⚠️ EVENT DELEGATION: Calling state already active, ignoring duplicate call');
            return;
          }
          
          if (phoneFormContainer) {
            phoneFormContainer.style.transition = 'opacity 0.25s ease-in-out, transform 0.25s ease-in-out';
            phoneFormContainer.style.opacity = '0';
            phoneFormContainer.style.transform = 'translateY(5px)'; // Match button→form transition
            phoneFormContainer.style.pointerEvents = 'none';
            
            setTimeout(() => {
              phoneFormContainer.style.display = 'none';
              
              // Create clean calling state with improved styling
              const callingContainer = document.createElement('div');
              callingContainer.id = 'callingStateContainer';
              callingContainer.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 48px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: rgba(34, 197, 94, 0.15);
                border: 1px solid rgba(34, 197, 94, 0.3);
                border-radius: 8px;
                opacity: 0;
                transform: translateY(5px);
                transition: opacity 0.25s ease-in-out, transform 0.25s ease-in-out;
                z-index: 10;
                box-sizing: border-box;
              `;
              
              callingContainer.innerHTML = `
                <div style="
                  display: flex;
                  align-items: center;
                  gap: 8px;
                  font-family: 'General Sans', -apple-system, BlinkMacSystemFont, sans-serif;
                  font-size: 14px;
                  font-weight: 600;
                  color: #22c55e;
                ">
                  <div style="
                    width: 8px;
                    height: 8px;
                    background: #22c55e;
                    border-radius: 50%;
                    animation: pulse 2s infinite;
                  "></div>
                  AI agent will call you within 60 seconds
                </div>
              `;
              
              phoneFormContainer.parentNode.insertBefore(callingContainer, phoneFormContainer);
              
              setTimeout(() => {
                callingContainer.style.opacity = '1';
                callingContainer.style.transform = 'translateY(0)';
              }, 100);
              
              console.log('✅ EVENT DELEGATION: Clean calling state displayed (no duplicates)');
            }, 400);
          }
          
          console.log('✅ EVENT DELEGATION: Call initiated with clean state transition');
        } else {
          console.log('❌ APPLE DESIGN: Phone input not found!');
        }
      }
    });
    
    // EVENT DELEGATION: Phone input formatting
    document.body.addEventListener('input', function(event) {
      if (event.target && event.target.id === 'phoneInput') {
        let value = event.target.value.replace(/\D/g, ''); // Remove non-digits
        let formattedValue = '';
        
        if (value.length > 0) {
          if (value.length <= 3) {
            formattedValue = `(${value}`;
          } else if (value.length <= 6) {
            formattedValue = `(${value.slice(0, 3)}) ${value.slice(3)}`;
          } else {
            formattedValue = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6, 10)}`;
          }
        }
        
        event.target.value = formattedValue;
        console.log('📱 EVENT DELEGATION: Phone formatted to:', formattedValue);
      }
    });
    
    // EVENT DELEGATION: Enter key handling
    document.body.addEventListener('keypress', function(event) {
      if (event.target && event.target.id === 'phoneInput' && event.key === 'Enter') {
        const callButton = document.getElementById('callButton');
        if (callButton) {
          callButton.click();
          console.log('⌨️ EVENT DELEGATION: Enter key triggered call button');
        }
      }
    });
    
    // PROFESSIONAL CSS CASCADE INSPECTOR - Phase 1
    function createCSSCascadeInspector() {
      console.log('🔍 INSPECTOR: Starting professional CSS cascade analysis...');
      
      const inspector = {
        // Diagnose cursor conflicts for any element
        diagnoseCursorConflicts: function(element) {
          if (!element) return null;
          
          const computedStyle = getComputedStyle(element);
          const inlineStyle = element.style;
          
          const diagnosis = {
            elementId: element.id || 'no-id',
            elementTag: element.tagName,
            computedCursor: computedStyle.cursor,
            inlineCursor: inlineStyle.cursor,
            pointerEvents: computedStyle.pointerEvents,
            zIndex: computedStyle.zIndex,
            position: computedStyle.position,
            conflicts: []
          };
          
          // Check for common conflicts
          if (computedStyle.cursor !== inlineStyle.cursor && inlineStyle.cursor) {
            diagnosis.conflicts.push(`Computed cursor "${computedStyle.cursor}" differs from inline "${inlineStyle.cursor}"`);
          }
          
          if (computedStyle.pointerEvents === 'none') {
            diagnosis.conflicts.push('Pointer events disabled - element not clickable');
          }
          
          return diagnosis;
        },
        
        // Find elements blocking interactions
        findBlockingElements: function(x, y) {
          const elementsAtPoint = document.elementsFromPoint(x, y);
          const blockingElements = [];
          
          elementsAtPoint.forEach((elem, index) => {
            const style = getComputedStyle(elem);
            if (style.pointerEvents === 'none' && index < 3) {
              blockingElements.push({
                element: elem,
                id: elem.id || 'no-id',
                className: elem.className || 'no-class',
                zIndex: style.zIndex,
                reason: 'pointer-events: none but positioned above target'
              });
            }
          });
          
          return blockingElements;
        },
        
        // Inspect form interaction layers
        inspectFormInteractions: function() {
          const phoneInput = document.getElementById('phoneInput');
          const callButton = document.getElementById('callButton');
          const phoneFormContainer = document.getElementById('phoneFormContainer');
          
          const report = {
            timestamp: new Date().toISOString(),
            elements: {}
          };
          
          if (phoneInput) {
            report.elements.phoneInput = this.diagnoseCursorConflicts(phoneInput);
          }
          
          if (callButton) {
            report.elements.callButton = this.diagnoseCursorConflicts(callButton);
          }
          
          if (phoneFormContainer) {
            report.elements.phoneFormContainer = this.diagnoseCursorConflicts(phoneFormContainer);
          }
          
          console.log('📊 INSPECTOR: Form interaction analysis:', report);
          return report;
        }
      };
      
      // Make inspector globally available for manual debugging
      window.cssInspector = inspector;
      console.log('✅ INSPECTOR: CSS cascade inspector ready (window.cssInspector)');
      return inspector;
    }

    // ELEMENT OVERLAY DETECTOR - Phase 2
    function createOverlayDetector() {
      console.log('🎯 OVERLAY DETECTOR: Starting element overlay analysis...');
      
      const overlayDetector = {
        // Create visual debugging overlay
        createDebugOverlay: function(element, color = 'rgba(255, 0, 0, 0.3)') {
          if (!element) return null;
          
          const rect = element.getBoundingClientRect();
          const overlay = document.createElement('div');
          
          overlay.style.cssText = `
            position: fixed;
            top: ${rect.top}px;
            left: ${rect.left}px;
            width: ${rect.width}px;
            height: ${rect.height}px;
            background: ${color};
            border: 2px solid ${color.replace('0.3', '1')};
            pointer-events: none;
            z-index: 10000;
            font-size: 12px;
            color: white;
            padding: 4px;
            box-sizing: border-box;
          `;
          
          overlay.textContent = `${element.tagName}#${element.id || 'no-id'}`;
          document.body.appendChild(overlay);
          
          setTimeout(() => overlay.remove(), 5000);
          return overlay;
        },
        
        // Detect invisible layers blocking form
        detectFormBlockers: function() {
          const phoneFormContainer = document.getElementById('phoneFormContainer');
          if (!phoneFormContainer) return [];
          
          const rect = phoneFormContainer.getBoundingClientRect();
          const centerX = rect.left + rect.width / 2;
          const centerY = rect.top + rect.height / 2;
          
          const elementsAtCenter = document.elementsFromPoint(centerX, centerY);
          const blockers = [];
          
          elementsAtCenter.forEach((elem, index) => {
            if (index === 0) return; // Skip the target element itself
            
            const style = getComputedStyle(elem);
            if (style.pointerEvents !== 'none' && index < 5) {
              blockers.push({
                element: elem,
                id: elem.id || 'no-id',
                className: elem.className || 'no-class',
                zIndex: style.zIndex,
                position: style.position,
                stackOrder: index
              });
              
              // Visual overlay disabled to avoid user confusion
              // this.createDebugOverlay(elem, `rgba(255, ${index * 50}, 0, 0.4)`);
            }
          });
          
          console.log('🚫 OVERLAY DETECTOR: Found potential form blockers:', blockers);
          return blockers;
        }
      };
      
      window.overlayDetector = overlayDetector;
      console.log('✅ OVERLAY DETECTOR: Ready (window.overlayDetector)');
      return overlayDetector;
    }

    // Initialize diagnostic tools
    const cssInspector = createCSSCascadeInspector();
    const overlayDetector = createOverlayDetector();

    // MANUAL DEBUGGING UTILITIES - Available in browser console
    window.phoneDebug = {
      // Manual cursor fix trigger
      fixCursors: function() {
        console.log('🔧 MANUAL FIX: Applying cursor fixes...');
        
        const phoneInput = document.getElementById('phoneInput');
        const callButton = document.getElementById('callButton');
        
        if (phoneInput) {
          phoneInput.style.setProperty('cursor', 'text', 'important');
          phoneInput.style.setProperty('pointer-events', 'auto', 'important');
          console.log('✅ Phone input cursor fixed manually');
        }
        
        if (callButton) {
          callButton.style.setProperty('cursor', 'pointer', 'important');
          callButton.style.setProperty('pointer-events', 'auto', 'important');
          console.log('✅ Call button cursor fixed manually');
        }
        
        // Re-run CSS cleanup
        cleanupConflictingStyles();
      },
      
      // Test form interactions
      testForm: function() {
        console.log('🧪 MANUAL TEST: Testing form interactions...');
        const phoneInput = document.getElementById('phoneInput');
        const callButton = document.getElementById('callButton');
        
        if (phoneInput) {
          console.log('📝 Phone Input Test:');
          console.log('  - Element exists:', !!phoneInput);
          console.log('  - Computed cursor:', getComputedStyle(phoneInput).cursor);
          console.log('  - Pointer events:', getComputedStyle(phoneInput).pointerEvents);
          console.log('  - Z-index:', getComputedStyle(phoneInput).zIndex);
        }
        
        if (callButton) {
          console.log('🔘 Call Button Test:');
          console.log('  - Element exists:', !!callButton);
          console.log('  - Computed cursor:', getComputedStyle(callButton).cursor);
          console.log('  - Pointer events:', getComputedStyle(callButton).pointerEvents);
          console.log('  - Z-index:', getComputedStyle(callButton).zIndex);
        }
        
        // Run full diagnostic
        return cssInspector.inspectFormInteractions();
      },
      
      // Detect blocking elements
      detectBlockers: function() {
        console.log('🚫 MANUAL BLOCKER DETECTION: Scanning for blocking elements...');
        return overlayDetector.detectFormBlockers();
      },
      
      // Show form (for testing)
      showForm: function() {
        console.log('👁️ MANUAL FORM DISPLAY: Showing phone form...');
        const buttonContainer = document.getElementById('buttonContainer');
        const phoneFormContainer = document.getElementById('phoneFormContainer');
        
        if (buttonContainer && phoneFormContainer) {
          // Complete button container isolation
          buttonContainer.style.opacity = '0';
          buttonContainer.style.pointerEvents = 'none';
          buttonContainer.style.zIndex = '1';
          buttonContainer.style.visibility = 'hidden';
          
          // Form container activation with highest priority
          phoneFormContainer.style.opacity = '1';
          phoneFormContainer.style.pointerEvents = 'auto';
          phoneFormContainer.style.transform = 'translateY(0)';
          phoneFormContainer.style.zIndex = '10';
          phoneFormContainer.style.visibility = 'visible';
          
          // Apply fixes immediately
          setTimeout(() => this.fixCursors(), 100);
          console.log('✅ Form displayed manually with proper isolation');
        }
      },
      
      // Test Call Me button functionality
      testCallButton: function() {
        console.log('🧪 MANUAL TEST: Testing Call Me button functionality...');
        const phoneInput = document.getElementById('phoneInput');
        const callButton = document.getElementById('callButton');
        
        if (!phoneInput || !callButton) {
          console.log('❌ TEST: Form elements not found');
          return;
        }
        
        // Show current state
        console.log('📊 Current State:', {
          phoneValue: phoneInput.value,
          phoneDigits: phoneInput.value.replace(/\D/g, '').length,
          buttonClass: callButton.className,
          buttonText: callButton.textContent,
          buttonEnabled: callButton.classList.contains('enabled')
        });
        
        // Test with sample number
        phoneInput.value = '(555) 123-4567';
        phoneInput.dispatchEvent(new Event('input', { bubbles: true }));
        
        setTimeout(() => {
          console.log('📊 After Sample Input:', {
            phoneValue: phoneInput.value,
            phoneDigits: phoneInput.value.replace(/\D/g, '').length,
            buttonClass: callButton.className,
            buttonEnabled: callButton.classList.contains('enabled')
          });
          
          // Simulate button click
          callButton.click();
          console.log('🖱️ Button click simulated');
        }, 100);
      },
      
      // Emergency cursor reset - NUCLEAR OPTION
      emergencyCursorReset: function() {
        console.log('☢️ EMERGENCY: Nuclear cursor reset initiated...');
        
        const phoneInput = document.getElementById('phoneInput');
        const callButton = document.getElementById('callButton');
        
        if (phoneInput) {
          // Remove all existing cursor styles
          phoneInput.style.removeProperty('cursor');
          phoneInput.removeAttribute('style');
          
          // Re-apply with maximum priority
          phoneInput.style.cssText += 'cursor: text !important; pointer-events: auto !important;';
          console.log('☢️ Phone input cursor NUCLEAR reset');
          
          // Force immediate cursor check
          const currentCursor = getComputedStyle(phoneInput).cursor;
          console.log('📍 Phone input cursor now:', currentCursor);
        }
        
        if (callButton) {
          // Remove all existing cursor styles
          callButton.style.removeProperty('cursor');
          callButton.removeAttribute('style');
          
          // Re-apply with maximum priority
          callButton.style.cssText += 'cursor: pointer !important; pointer-events: auto !important; background: rgba(255, 255, 255, 0.9) !important; color: #333333 !important;';
          console.log('☢️ Call button cursor NUCLEAR reset');
          
          // Force immediate cursor check
          const currentCursor = getComputedStyle(callButton).cursor;
          console.log('📍 Call button cursor now:', currentCursor);
        }
      }
    };
    
    console.log('🛠️ MANUAL DEBUG TOOLS: Available as window.phoneDebug');

    // DIAGNOSTIC: Enhanced periodic checker with professional analysis
    setInterval(() => {
      const button = document.getElementById('ctaButton');
      const container = document.getElementById('phoneComponentContainer');
      const phoneInput = document.getElementById('phoneInput');
      const callButton = document.getElementById('callButton');
      
      if (button && container) {
        console.log('💚 DIAGNOSTIC: Phone button is available and ready');
      }
      
      // Run enhanced diagnostics when form is visible
      if (phoneInput && callButton) {
        const phoneFormContainer = document.getElementById('phoneFormContainer');
        const containerStyle = getComputedStyle(phoneFormContainer);
        
        if (containerStyle.opacity > 0.5) {
          console.log('📋 DIAGNOSTIC: Running enhanced form analysis...');
          cssInspector.inspectFormInteractions();
        }
      }
    }, 10000); // Check every 10 seconds
    
  </script>
  
  <!-- Cookie Consent Script -->
  <script src="js/cookie-consent.js" type="text/javascript"></script>
</body>
</html>
